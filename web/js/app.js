(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.app = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
// Generated by CoffeeScript 1.10.0

/*

  Tyler Anderson 2011-2015
 */

(function() {
  var BinaryHeap;

  BinaryHeap = (function() {
    function BinaryHeap(score_func) {
      this.heap = [];
      this.scoreFunction = score_func;
    }

    BinaryHeap.prototype.push = function(element) {
      this.heap.push(element);
      this.sinkDown(this.heap.length - 1);
      return true;
    };

    BinaryHeap.prototype.pop = function() {
      var end, result;
      result = this.heap[0];
      end = this.heap.pop();
      if (this.heap.length > 0) {
        this.heap[0] = end;
        this.bubbleUp(0);
      }
      return result;
    };

    BinaryHeap.prototype.remove = function(node) {
      var end, i;
      i = this.heap.indexOf(node);
      end = this.heap.pop();
      if (i !== this.heap.length - 1) {
        this.heap[i] = end;
        if (this.scoreFunction(end) < this.scoreFunction(node)) {
          this.sinkDown(i);
        } else {
          this.bubbleUp(i);
        }
      }
      return true;
    };

    BinaryHeap.prototype.size = function() {
      return this.heap.length;
    };

    BinaryHeap.prototype.rescoreElement = function(node) {
      return this.sinkDown(this.heap.indexOf(node));
    };

    BinaryHeap.prototype.sinkDown = function(n) {
      var element, parent, parentN;
      element = this.heap[n];
      while (n > 0) {
        parentN = ((n + 1) >> 1) - 1;
        parent = this.heap[parentN];
        if (this.scoreFunction(element) < this.scoreFunction(parent)) {
          this.heap[parentN] = element;
          this.heap[n] = parent;
          n = parentN;
          true;
        } else {
          break;
        }
      }
      return true;
    };

    BinaryHeap.prototype.bubbleUp = function(n) {
      var child1, child1N, child1Score, child2, child2N, child2Score, elemScore, element, length, swap;
      length = this.heap.length;
      element = this.heap[n];
      elemScore = this.scoreFunction(element);
      while (true) {
        child2N = (n + 1) << 1;
        child1N = child2N - 1;
        swap = null;
        if (child1N < length) {
          child1 = this.heap[child1N];
          child1Score = this.scoreFunction(child1);
          if (child1Score < elemScore) {
            swap = child1N;
          }
        }
        if (child2N < length) {
          child2 = this.heap[child2N];
          child2Score = this.scoreFunction(child2);
          if (child2Score < (swap === null ? elemScore : child1Score)) {
            swap = child2N;
          }
        }
        if (swap !== null) {
          this.heap[n] = this.heap[swap];
          this.heap[swap] = element;
          n = swap;
          true;
        } else {
          break;
        }
      }
      return true;
    };

    return BinaryHeap;

  })();

  module.exports = function(score_function) {
    return new BinaryHeap(score_function);
  };

}).call(this);

},{}],2:[function(require,module,exports){
'use strict';

//From https://en.wikipedia.org/wiki/List_of_ancient_Romans

var names = ['Titus Acciu', 'Gaius Aciliu', 'Claudia Act', 'Claudius Aelianu', 'Sextus Aeliu', 'Paetus Catu', 'Lucius Aeliu', 'Aemilia Scaur', 'Marcus Aemiliu', 'Flavius Aetiu', 'Gnaeus Domitiu', 'Lucius Afraniu', 'Julius Africanu', 'Sextus Caeciliu', 'Claudius Agathinu', 'Gnaeus Juliu', 'Sextus Calpurniu', 'Marcus Juliu', 'Marcus Agripp', 'Marcus Postumu', 'Vipsania Agrippin', 'Agrippina Majo', 'Agrippina Mino', 'Gaius Serviliu', 'Ahenobarbus', 'Aius Locutiu', 'Albinovanus Ped', 'Titus Albuciu', 'Gaius Silu', 'Alfenus Varu', 'Alfius Avitu', 'Allectus', 'Gaius Amafiniu', 'Lucius Ambiviu', 'Amelius Gentilianu', 'Ammianus Marcellinu', 'Lucius Ampeliu', 'Gaius Antistiu', 'Lucius Antistiu', 'Antonia', 'Antoninus Piu', 'Arrius Antoninu', 'Antoninus Liberali', 'Gaius Antoniu', 'Iullus Antoniu', 'Lucius Antoniu', 'Marcus Antoniu', 'Marcus Orato', 'Marcus Creticu', 'Mark Anton', 'Marcus Antyllu', 'Antonius Casto', 'Antonius Mus', 'Antonius Diogene', 'Marcus Ape', 'Aelius Festu', 'Apicius', 'Lucius Aproniu', 'Pontius Aquil', 'Romanus Aquil', 'Manius Aquilliu', 'Gaius Gallu', 'Flavius Arcadiu', 'Aulus Archia', 'Arellius Fuscu', 'Arria Majo', 'Arria Mino', 'Flavius Arrianu', 'Lucius Arruntiu', 'Lucius Arruntius', 'Arruntius Celsu', 'Lucius Artoriu', 'Quintus Juniu', 'Arusianus Messiu', 'Quintus Asconiu', 'Sempronius Aselli', 'Aemilius Aspe', 'Nonius Asprena', 'Lucius Philologu', 'Atia', 'Aulus Atiliu', 'Aulus Atiliu', 'Marcus Atiliu', 'Atilius Fortunatianu', 'Titus Quinctiu', 'Publius Aciliu', 'Caecilia Attic', 'Titus Pomponiu', 'Julius Atticu', 'Aufidius Bassu', 'Gnaeus Aufidiu', 'Sentius Augurinu', 'Augustus', 'Aurelia', 'Lucius Domitiu', 'Marcus Aureliu', 'Marcus Antoninu', 'Sextus Victo', 'Aureolus', 'Decimus Magnu', 'Publius Paetu', 'Titus Avidiu', 'Gaius Avidiu', 'Gaius Cassiu', 'Avienus', 'Gnaeus Baebiu', 'Marcus Baebiu', 'Quintus Baebius', 'Tiberius Claudius', 'Decius Caelius', 'Marcus Atius', 'Titus Ampius', 'Lucius Cornelius', 'Balbus', 'Balista', 'Quintus Marcius', 'Quintus Caecilius', 'Caesius Bassu', 'Saleius Bassu', 'Bavius', 'Belisarius', 'Lucius Calpurnius', 'Marcus Furius', 'Marcus Calpurnius', 'Quintus Junius', 'Gaius Blossiu', 'Anicius Manlius', 'Vettius Bolanu', 'Bonifacius', 'Bonosus', 'Tiberius Claudius', 'Bruttidius Nige', 'Lucius Junius', 'Decimus Junius', 'Decimus Junius', 'Lucius Junius', 'Brutus', 'Sextus Afranius', 'Caecilius of', 'Gaius Caecilius', 'Caecilus Statiu', 'Quintus Caecilius', 'Lucius Caecilius', 'Aulus Caecin', 'Aulus Caecina', 'Aulus Caecina', 'Marcus Caelius', 'Quintus Servilius', 'Fannius Caepi', 'Gaius Julius', 'Gaius Julius', 'Lucius Julius', 'Sextus Julius', 'Gaius Caesa', 'Lucius Caesa', 'Marcus Calidiu', 'Gaius Julius', 'Calpurnia', 'Titus Calpurnius', 'Calpurnius Flaccu', 'Gaius Sextius', 'Gnaeus Domitius', 'Gnaeus Domitius', 'Gaius Calvisius', 'Gaius Licinius', 'Marcus Furius', 'Lucius Furius', 'Publius Canidius', 'Gaius Caninius', 'Caninius Rufu', 'Canius Rufu', 'Gaius Canuleiu', 'Flavius Cape', 'Gaius Ateius', 'Marcus Aurelius', 'Gaius Papirius', 'Gnaeus Papirius', 'Gaius Papirius', 'Marcus Aurelius', 'Gaius Carrinu', 'Marcus Aurelius', 'Spurius Carvilius', 'Spurius Carvilius', 'Servilius Casc', 'Cassiodorus', 'Spurius Cassius', 'Lucius Cassius', 'Lucius Cassius', 'Quintus Cassius', 'Gaius Cassius', 'Lucius Cassius', 'Cassius Parmensi', 'Cassius Severu', 'Cassius Chaere', 'Lucius Sergius', 'Titus Catiu', 'Cato', 'Gaius Porcius', 'Lucius Porcius', 'Catullus', 'Gaius Lutatius', 'Quintus Lutatius', 'Celsus Albinovanu', 'Aulus Cornelius', 'Publius Juventius', 'Censorinus', 'Quintus Petellius', 'Gaius Cestius', 'Gaius Cestius', 'Lucius Cestius', 'Publius Cornelius', 'Flavius Sosipater', 'Lucius Cornelius', 'Marcus Tullius', 'Quintus Tullius', 'Lucius Fabius', 'Lucius Quinctius', 'Lucius Cincius', 'Lucius Cornelius', 'Gaius Helvius', 'Gnaeus Cornelius', 'Gaius Julius', 'Gaius Julius', 'Julius Classicu', 'Claudius Claudianu', 'Claudius', 'Claudia Procul', 'Claudius II', 'Appius Claudiu', 'Appius Claudius', 'Appius Claudius', 'Publius Claudius', 'Quintus Claudiu', 'Gaius Claudius', 'Appius Claudius', 'Marcus Claudius', 'Quintus Claudius', 'Tiberius Claudiu', 'Claudius Etruscu', 'Tiberius Claudius', 'Claudius Mamertinu', 'Titus Flavius', 'Clodia', 'Clodius Aesopu', 'Publius Clodius', 'Lucius Clodius', 'Publius Clodius', 'Decimus Clodius', 'Cloelia', 'Aulus Cluentius', 'Lucius Coelius', 'Gaius Coelius', 'Lucius Junius', 'Cominianus', 'Commodianus', 'Lucius Aelius', 'Constans', 'Flavius Valerius', 'Constantine I', 'Flavius Claudius', 'Flavius Valerius', 'Constantius I', 'Constantius II', 'Gnaeus Marcius', 'Cornelia African', 'Cornelia', 'Cornelia Metell', 'Gaius Corneliu', 'Cornelius Severu', 'Lucius Cornificiu', 'Quintus Cornificiu', 'Lucius Annaeus', 'Gaius Julius', 'Gaius Coruncaniu', 'Lucius Coruncaniu', 'Tiberius Coruncaniu', 'Titus Statilius', 'Quintus Conconiu', 'Aulus Cornelius', 'Gaius Aurelius', 'Lucius Aurelius', 'Marcus Aurelius', 'Marcus Julius', 'Gaius Calpurnius', 'Publius Licinius', 'Lucius Licinius', 'Marcus Licinius', 'Publius Licinius', 'Aulus Cremutius', 'Quintus Terentius', 'Curiatius Maternu', 'Marcus Curtiu', 'Curtius Montanu', 'Thascius Caecilius', 'Damophilus', 'Lucius Decidius', 'Gaius Messius', 'Publius Decius', 'Publius Decius', 'Quintus Delliu', 'Sempronius Densu', 'Lucius Siccius', 'Manius Curius', 'Publius Herennius', 'Lucius Pollentius', 'Titus Didiu', 'Marcus Didius', 'Dio Cassiu', 'Gaius Aurelius', 'Dioscorides Pedaniu', 'Gnaeus Cornelius', 'Publius Cornelius', 'Titus Flavius', 'Flavia Domitill', 'Gnaeus Domitius', 'Lucius Domitius', 'Domitius Marsu', 'Aelius Donatu', 'Tiberius Claudius', 'Dorotheus', 'Blossius Aemilius', 'Julia Drusill', 'Julius Caesar', 'Nero Claudius', 'Marcus Livius', 'Marcus Livius', 'Gaius Duiliu', 'Marcus Egnatius', 'Elagabalus', 'Sextilius En', 'Severus Sanctus', 'Quintus Enniu', 'Magnus Felix', 'Titus Clodius', 'Erotian', 'Sextus Erucius', 'Flavius Eugeniu', 'Eumenius', 'Eusebius of', 'Eutropius', 'Iulius Exsuperantiu', 'Fabianus Papiriu', 'Marcus Fabius', 'Quintus Fabius', 'Marcus Fabius', 'Lucius Fabius', 'Paullus Fabius', 'Quintus Fabius', 'Quintus Fabius', 'Quintus Fabius', 'Quintus Fabius', 'Quintus Fabius', 'Fabius Rusticu', 'Gaius Fabricius', 'Marcus Fadius', 'Gaius Fanniu', 'Annia Galeria', 'Marcus Cetius', 'Eulogius Favoniu', 'Marcus Favoniu', 'Favorinus', 'Marcus Antonius', 'Fenestella', 'Porcius Festu', 'Rufius Festu', 'Sextus Pompeius', 'Gaius Flavius', 'Julius Firmicus', 'Aulus Avilius', 'Quintus Fulvius', 'Lucius Valerius', 'Marcus Fulvius', 'Verrius Flaccu', 'Lucius Quinctius', 'Titus Quinctius', 'Gaius Flaminiu', 'Gnaeus Flaviu', 'Flavius Feli', 'Titus Flavius', 'Marcus Annius', 'Florus', 'Marcus Fonteiu', 'Sextus Julius', 'Marcus Cornelius', 'Quintus Fufius', 'Fabius Planciades', 'Fulvia', 'Gaius Fundaniu', 'Minicius Fundanu', 'Aulus Furius', 'Lucius Furius', 'Cornelius Fuscu', 'Aulus Gabiniu', 'Gaius Julius', 'Gaius', 'Gaius Sulpicius', 'Servius Sulpicius', 'Publius Sulpicius', 'Gaius Galerius', 'Galerius Trachalu', 'Publius Licinius', 'Lucius Iunius', 'Aelius Gallu', 'Appius Annius', 'Gaius Asinius', 'Gaius Cornelius', 'Aulus Didius', 'Gaius Lucretius', 'Gaius Sulpicius', 'Gallus Caesa', 'Quintus Gargilius', 'Gavius Bassu', 'Gavius Sil', 'Aulus Gelliu', 'Gnaeus Gelliu', 'Lucius Gellius', 'Geminus', 'Lucius Genuciu', 'Germanicus', 'Gessius Floru', 'Hosidius Get', 'Gnaeus Hosidius', 'Publius Septimius', 'Manius Acilius', 'Gaius Servilius', 'Glitius Atilius', 'Marcus Antonius', 'Marcus Antonius', 'Gaius Sempronius', 'Tiberius Sempronius', 'Julius Graecinu', 'Granius Licinianu', 'Flavius Gratia', 'Grattius', 'Grillius', 'Publius Aelius', 'Quintus Hateriu', 'Helvidius Priscu', 'Herennius Etruscu', 'Herennius Modestinu', 'Herennius Seneci', 'Herodes Atticu', 'Aulus Hirtiu', 'Honorius', 'Horatius Cocle', 'Quintus Horatius', 'Quintus Hortensiu', 'Hostilian', 'Hostius', 'Hyginus', 'Gaius Julius', 'Lucius Iciliu', 'Irenaeus', 'Isidorus Hispalensi', 'Isigonus', 'Januarius Nepotianu', 'Javolenus Priscu', 'Jordanes', 'Flavius Jovia', 'Juba', 'Jugurtha', 'Julia', 'Julia', 'Juliae Caesare', 'Julia Flavi', 'Vipsania Juli', 'Julia Antoni', 'Julia the', 'Julia Domn', 'Julia Maes', 'Julia Soaemias', 'Julia Avita', 'Flavius Claudius', 'Julianus Salviu', 'Gaius Julius', 'Julius Caesa', 'Lucius Julius', 'Julius Canu', 'Julius Cereali', 'Sextus Julius', 'Julius Modestu', 'Julius Romanu', 'Julius Tir', 'Julius Valerius', 'Gaius Julius', 'Junius Congu', 'Marcus Junius', 'Junius Oth', 'Justin Marty', 'Justinian I', 'Marcus Justinianus', 'Decimus Iunius', 'Gaius Vettius', 'Marcus Juventius', 'Attius Labe', 'Cornelius Antistius', 'Marcus Antistius', 'Quintus Labienu', 'Titus Labienu', 'Lactantius', 'Lucius Furiu', 'Gaius Laeliu', 'Gaius Laelius', 'Laelius Archelau', 'Marcus Valerius', 'Laevius', 'Gaius Octavius', 'Larcius Licinu', 'Latinus', 'Marcus Tullius', 'Pompeius Lenaeu', 'Gnaeus Cornelius', 'Lucius Cornelius', 'Lucius Cornelius', 'Gnaeus Cornelius', 'Gnaeus Cornelius', 'Publius Cornelius', 'Publius Cornelius', 'Manius Aemilius', 'Marcus Aemilius', 'Libanius', 'Licentius', 'Valerius Licinianus', 'Licinius Imbre', 'Quintus Ligariu', 'Livia Drusill', 'Livilla', 'Lucius Livius', 'Titus Liviu', 'Lollia Paulin', 'Marcus Lolliu', 'Lollius Bassu', 'Marcus Lollius', 'Quintus Lollius', 'Marcus Annaeus', 'Lucius Lucceiu', 'Gaius Luciliu', 'Gaius Lucilius', 'Lucilla', 'Lucretia', 'Lucretius', 'Spurius Lucretius', 'Lucius Licinius', 'Marcus Terentius', 'Luscius Lanuvinu', 'Marcus Luriu', 'Quintus Lusius', 'Lygdamus', 'Gaius Licinius', 'Gaius Licinius', 'Aemilius Mace', 'Titus Fulvius', 'Marcus Opellius', 'Quintus Naevius', 'Macrobius Ambrosius', 'Gaius Maecena', 'Lucius Volusius', 'Spurius Maeliu', 'Gaius Maeniu', 'Maevius', 'Flavius Magnus', 'Magnus Maximu', 'Julius Majoria', 'Mallius Theodoru', 'Octavius Mamilius', 'Lucius Mamiliu', 'Gaius Mamilius', 'Mamurra', 'Gaius Hostilius', 'Gaius Maniliu', 'Manius Maniliu', 'Marcus Maniliu', 'Marcus Manliu', 'Gaius Claudius', 'Gaius Claudius', 'Marcus Claudius', 'Marcus Pomponius', 'Ulpius Marcellu', 'Marcia', 'Ulpia Marcian', 'Aelius Marcianu', 'Marcius', 'Ancus Marciu', 'Gaius Marcius', 'Marcus Aemilius', 'Gaius Mariu', 'Marcus Marius', 'Sextus Mariu', 'Marius Priscu', 'Marius Maximu', 'Marcus Valerius', 'Marullus', 'Salonina Matidi', 'Gaius Matiu', 'Gnaeus Matiu', 'Mavortius', 'Marcus Aurelius', 'Marcus Aurelius', 'Gaius Julius', 'Gaius Galerius', 'Sextus Quinctilius', 'Pomponius Mel', 'Lucius Annaeus', 'Aelius Melissu', 'Gaius Melissu', 'Gaius Memmiu', 'Agrippa Menenius', 'Flavius Merobaude', 'Lucius Cornelius', 'Manius Valerius', 'Marcus Valerius', 'Marcus Valerius', 'Marcus Valerius', 'Vipstanus Messal', 'Statilia Messalin', 'Valeria Messalin', 'Caecilia Metella', 'Caecilia Metell', 'Lucius Caecilius', 'Quintus Caecilius', 'Quintus Caecilius', 'Quintus Caecilius', 'Quintus Caecilius', 'Quintus Caecilius', 'Quintus Caecilius', 'Quintus Caecilius', 'Quintus Caecilius', 'Mettius Pompusianu', 'Titus Annius', 'Lucius Minucius', 'Marcus Minucius', 'Marcus Minucius', 'Gaius Minucius', 'Mucia Terti', 'Gaius Licinius', 'Lucius Mummius', 'Lucius Staius', 'Lucius Licinius', 'Musaeus Grammaticu', 'Gaius Musonius', 'Narses Genera', 'Gnaeus Naeviu', 'Rutilius Claudius', 'Narcissus', 'Marcus Aurelius', 'Cornelius Nepo', 'Lucius Neratius', 'Nero Claudius', 'Gaius Claudius', 'Tiberius Claudius', 'Nero Julius', 'Lucius Cocceius', 'Marcus Cocceius', 'Attus Naviu', 'Lucius Septimius', 'Virius Nicomachus', 'Publius Nigidius', 'Ninnius Crassu', 'Marcus Fulvius', 'Nonius Marcellu', 'Gaius Norbanu', 'Aulus Lappius', 'Quintus Noviu', 'Numa Pompiliu', 'Marcus Aurelius', 'Gaius Nymphidius', 'Iulius Obsequen', 'Octavia', 'Claudia Octavi', 'Gaius Octaviu', 'Gnaeus Octaviu', 'Marcus Octaviu', 'Septimius Odenathu', 'Quintus Lucretius', 'Quintus Ogulnius', 'Olympiodorus of', 'Olympiodorus the', 'Aurelius Opiliu', 'Lucius Opimiu', 'Gaius Oppiu', 'Publilius Optatianus', 'Lucius Orbilius', 'Paulus Orosiu', 'Publius Ostorius', 'Titus Otacilius', 'Marcus Salvius', 'Publius Ovidius', 'Ovinius', 'Marcus Pacuviu', 'Lucius Caesennius', 'Quintus Remmius', 'Palfurius Sur', 'Rutilius Taurus', 'Aulus Cornelius', 'Gaius Vibius', 'Aemilius Papinianu', 'Papirianus', 'Lucius Papirius', 'Gaius Papius', 'Passienus', 'Aemilius Lepidus', 'Lucius Aemilius', 'Lucius Aemilius', 'Julius Paulu', 'Paulus Alexandrinu', 'Quintus Pediu', 'Sextus Pediu', 'Marcus Perpern', 'Marcus Perperna', 'Aulus Persius', 'Publius Helvetius', 'Gaius Pescennius', 'Quintus Petilliu', 'Marcus Petreiu', 'Petronius', 'Publius Petroniu', 'Petronius Arbite', 'Publius Petronius', 'Julius Verus', 'Lucius Marcius', 'Quintus Marcius', 'Calpurnius Pis', 'Gaius Calpurnius', 'Gnaeus Calpurnius', 'Lucius Calpurnius', 'Lucius Calpurnius', 'Lucius Calpurnius', 'Lucius Calpurnius', 'Marcus Pupius', 'Galla Placidi', 'Placidus', 'Lactantius Placidu', 'Munatia Plancin', 'Gnaeus Planciu', 'Lucius Munatius', 'Titus Munatius', 'Pompeius Plant', 'Aulus Platorius', 'Plautia Urgulanill', 'Gaius Fulvius', 'Plautius', 'Aulus Plautiu', 'Publius Plautius', 'Plautius Lateranu', 'Marcus Plautius', 'Tiberius Plautius', 'Titus Maccius', 'Quintus Pleminiu', 'Gaius Plinius', 'Gaius Plinius', 'Pompeia Plotin', 'Plotinus', 'Plotius Tucc', 'Mestrius Plutarchu', 'Gaius Poetelius', 'Gaius Asinius', 'Julius Pollu', 'Polybius', 'Pompeius', 'Gnaeus Pompeiu', 'Quintus Pompeiu', 'Gnaeus Pompeius', 'Sextus Pompeius', 'Quintus Pompeius', 'Pompeius Saturninu', 'Pompeius Sil', 'Pompeius Strab', 'Pompilius', 'Lucius Pomponiu', 'Sextus Pomponiu', 'Marcus Pomponius', 'Titus Pomponius', 'Pomponius Rufu', 'Pomponius Secundu', 'Gavius Pontiu', 'Pontius Telesinu', 'Pontius Pilatu', 'Gaius Popillius', 'Publius Popillius', 'Poppaea Sabin', 'Quintus Poppaedius', 'Porcia', 'Porcius Licinu', 'Marcus Porcius', 'Pomponius Porphyrio', 'Porsenna', 'Aulus Postumius', 'Spurius Postumius', 'Lucius Postumius', 'Aulus Postumius', 'Marcus Cassianus', 'Potillius Cereali', 'Marcus Antonius', 'Priscianus', 'Priscus', 'Marcus Aurelius', 'Valerius Probu', 'Saint Procul', 'Proculus', 'Proculus', 'Sextus Propertiu', 'Aurelius Clemens', 'Quintus Publilius', 'Publilius Syru', 'Volero Publiliu', 'Publius Pupiu', 'Gaius Iulius', 'Asinius Quadratu', 'Titus Quinctius', 'Marcus Fabius', 'Quintus', 'Quintus Smyrnaeu', 'Publius Sulpicius', 'Quintus Marcius', 'Gaius Rabiriu', 'Gaius Rabirius', 'Lucius Aemilius', 'Marcus Aqilius', 'Marcus Atilius', 'Publius Memmius', 'Remus', 'Reposianus', 'Quintus Marcius', 'Flavius Ricime', 'Romulus', 'Romulus Augustulu', 'Sextus Rosciu', 'Lucius Roscius', 'Quintus Roscius', 'Rubellius Blandu', 'Gaius Rubellius', 'Gaius Rubellius', 'Rubellia Buss', 'Rufinus', 'Flavius Rufinu', 'Curtius Rufu', 'Quintus Curtius', 'Cluvius Rufu', 'Publius Servilius', 'Publius Rupiliu', 'Gaius Rutilius', 'Publius Rutilius', 'Publius Rutilius', 'Vibia Sabin', 'Sabinus', 'Titus Flavius', 'Titus Flavius', 'Masurius Sabinu', 'Marius Plotius', 'Julius Sacrovi', 'Saevius Nicano', 'Marcus Livius', 'Sallustius', 'Gaius Sallustius', 'Gaius Sallustius', 'Salvianus', 'Salvidienus Rufu', 'Lucius Antonius', 'Lucius Appuleius', 'Gaius Sentius', 'Gaius Mucius', 'Publius Mucius', 'Quintus Mucius', 'Cassius Scaevu', 'Lucius Cornelius', 'Publius Cornelius', 'Scipio Africanu', 'Publius Cornelius', 'Lucius Cornelius', 'Lucius Cornelius', 'Gnaeus Cornelius', 'Publius Cornelius', 'Publius Cornelius', 'Publius Cornelius', 'Publius Cornelius', 'Scribonia', 'Lucius Arruntius', 'Lucius Scribonius', 'Marcus Scribonius', 'Scribonius Largu', 'Gnaeus Tremellius', 'Julius Secundu', 'Sedulius', 'Sejanus', 'Lucius Seius', 'Lucius Annaeus', 'Publius Septimiu', 'Septimius Serenu', 'Serenus Sammonicu', 'Quintus Serenu', 'Sergius', 'Marcus Sergiu', 'Serranus', 'Quintus Sertoriu', 'Sulpicius Lupercus', 'Lucius Julius', 'Servilia', 'Publius Servilius', 'Publius Servilius', 'Marcus Servilius', 'Servius', 'Servius Tulliu', 'Publius Sestiu', 'Lucius Septimius', 'Marcus Aurelius', 'Sextus Julius', 'Flavius Valerius', 'Sulpicius Severu', 'Quintus Sextiu', 'Titus Sextiu', 'Sextus', 'Sextus Empiricu', 'Gnaeus Siciniu', 'Siculus Flaccu', 'Gaius Sollius', 'Decimus Junius', 'Gaius Junius', 'Gaius Appius', 'Marcus Junius', 'Decimus Junius', 'Lucius Junius', 'Marcus Junius', 'Gaius Siliu', 'Publius Silius', 'Silius Italicu', 'Lucius Cornelius', 'Publius Sittiu', 'Gaius Iulius', 'Gaius Sosiu', 'Quintus Sosius', 'Titus Vestricius', 'Staberius Ero', 'Titus Statilius', 'Publius Papinius', 'Stertinius', 'Flavius Stilich', 'Lucius Aelius', 'Gaius Licinius', 'Sueis', 'Gaius Suetonius', 'Gaius Suetonius', 'Publius Suillius', 'Lucius Cornelius', 'Publius Cornelius', 'Faustus Cornelius', 'Sulpicia', 'Servius Sulpiciu', 'Sulpicius Apollinari', 'Sulpicius Blith', 'Quintus Sulpicius', 'Publius Sulpicius', 'Servius Sulpicius', 'Lucius Licinius', 'Quintus Aurelius', 'Cornelius Tacitu', 'Marcus Claudius', 'Tanaquil', 'Tanusius Geminu', 'Lucius Tarius', 'Tarpeia', 'Lucius Tarquinius', 'Tarquinius Priscu', 'Tarquinius Superbu', 'Tarquitius Priscu', 'Titus Tatiu', 'Publius Terentius', 'Terentia', 'Terentianus Mauru', 'Quintus Terentius', 'Quintus Septimius', 'Gaius Pius', 'Theodosius I', 'Theodosius I', 'Publius Clodius', 'Tiberius Julius', 'Tiberius Julius', 'Tiberius Julius', 'Albius Tibullu', 'Gaius Oponius', 'Gaius Furius', 'Marcus Tullius', 'Julius Titianu', 'Titinius', 'Gnaeus Octavius', 'Gaius Titiu', 'Marcus Titiu', 'Titius Arist', 'Titus Flavius', 'Titus Larciu', 'Titus Manlius', 'Quintus Trabe', 'Marcus Ulpius', 'Gaius Trebatius', 'Trebius Nige', 'Gaius Vibius', 'Gaius Treboniu', 'Gaius Valerius', 'Tribonianus', 'Pompeius Trogu', 'Lucius Aelius', 'Quintus Aelius', 'Gaius Sempronius', 'Publius Sempronius', 'Tullia Ciceroni', 'Tullus Hostiliu', 'Quintus Marcius', 'Turia', 'Turnus', 'Sextus Turpiliu', 'Turrianus Gracili', 'Clodius Turrinu', 'Tuticanus', 'Ulpianus of', 'Domitius Ulpianu', 'Marcus Ulpius', 'Urbanus', 'Septimius Vaballathu', 'Vagellius', 'Valens', 'Fabius Valen', 'Vettius Valen', 'Valentinian I', 'Valentinian I', 'Valentinian II', 'Publius Licinius', 'Valerius Aedituu', 'Valerius Antia', 'Decimus Valerius', 'Publius Valerius', 'Marcus Valerius', 'Gaius Calpetanus', 'Gaius Valerius', 'Lucius Valerius', 'Valerius Maximu', 'Publius Valerius', 'Lucius Valerius', 'Quintus Valerius', 'Quintus Valerius', 'Valgius Rufu', 'Vallius Syriacu', 'Varenus Rufu', 'Quintus Vargunteiu', 'Quintus Variu', 'Varius Rufu', 'Gaius Terentius', 'Marcus Terentius', 'Publius Terentius', 'Aulus Terentius', 'Publius Attius', 'Publius Quinctilius', 'Quinctilius Varu', 'Arrius Varu', 'Publius Vatiniu', 'Publius Vedius', 'Flavius Vegetius', 'Aulus Didius', 'Velius Longu', 'Velleius Paterculu', 'Venantius Honorius', 'Vennonius', 'Publius Ventidiu', 'Ventidius Cumanu', 'Verginia', 'Verginius Flavu', 'Lucius Verginius', 'Gaius Verre', 'Lucius Veru', 'Lucius Vettiu', 'Vettius Philocomu', 'Lucius Vettius', 'Caelius Vibenn', 'Quintus Vibius', 'Gaius Vibius', 'Gaius Vibius', 'Gaius Vibius', 'Gaius Marius', 'Maximus Victorinu', 'Lucius Villius', 'Gaius Julius', 'Annius Vinicianu', 'Lucius Viniciu', 'Marcus Viniciu', 'Publius Viniciu', 'Titus Viniu', 'Publius Vergilius', 'Viriathus', 'Aulus Vitelliu', 'Lucius Vitelliu', 'Vitruvius', 'Gaius Dillius', 'Volcatius Sedigitu', 'Volcacius Moschu', 'Lucius Voltacilius', 'Publius Volumniu', 'Gnaeus Manlius', 'Lucius Manlius'];

module.exports = names;


},{}],3:[function(require,module,exports){
'use strict';

var drd = require('definitely-random-data');
require('./markov-chain-source');
module.exports = new drd.Generator();


},{"./markov-chain-source":5,"definitely-random-data":6}],4:[function(require,module,exports){
'use strict';

var fabrico = require('./fabrico');
var name = exports.name = fabrico.markov(require('./data/names/roman-name'));
var gender = exports.gender = fabrico.list(['male', 'female']);

var humanEyes = fabrico.list(['brown', 'blue', 'green', 'hazel']);
var elfEyes = fabrico.list(['brown', 'blue', 'green', 'white', 'silver', 'black']);
var halfElfEyes = fabrico.oneOf(humanEyes, elfEyes);
var dwarfEyes = fabrico.list(['brown', 'dark brown', 'black']);
var gnomeEyes = fabrico.list(['blue', 'green', 'red', 'orange']);

//I'm lazy
var hair = fabrico.list(['brown', 'blonde', 'red', 'gray', 'white', 'silver']);

var adventurer = fabrico.list('wizard', 'fighter', 'rogue');
var profession = fabrico.oneOf('baker', 'smith', 'carpenter', 'elder', 'councilman', 'peasant', 'drunkard', 'commoner', 'noble', adventurer);

var commonInventory = fabrico.list(['dagger', 'necklace', 'ring']).repeat(0, 3);
var professionInventory = {
    drunkard: fabrico.list(['beer', 'ale', 'whiskey']),
    wizard: fabrico.tokens('spellbook', fabrico.literal('scrollcase').flip(), fabrico.list(['quarterstaff', 'wand', 'crossbow'])),
    fighter: fabrico.tokens('armor', fabrico.literal('shield').repeat(0, 1), fabrico.list(['sword', 'dagger', 'crossbow', 'bow', 'axe'])),
    rogue: fabrico.tokens('lock picks', fabrico.literal('contraband').repeat(0, 1), fabrico.list(['disguise kit', 'dagger', 'bow']))
};

var inventory = function inventory(char) {

    var ret = commonInventory.get();
    var prof = char.profession;
    if (!prof) return ret;

    var other = professionInventory[prof];
    if (!other) return ret;

    return ret.concat(other.get());
};

var human = exports.human = fabrico.map({ name: name, race: 'human', gender: gender, eyes: humanEyes, hair: hair, profession: profession, inventory: inventory });
var elf = exports.elf = fabrico.map({ name: name, race: 'elf', gender: gender, eyes: elfEyes, hair: hair, profession: profession, inventory: inventory });
var halfElf = exports.helfElf = fabrico.map({ name: name, race: 'half-elf', gender: gender, eyes: halfElfEyes, hair: hair, profession: profession, inventory: inventory });
var dwarf = exports.dwarf = fabrico.map({ name: name, race: 'dwarf', gender: gender, eyes: dwarfEyes, hair: hair, profession: profession, inventory: inventory });
var gnome = exports.gnome = fabrico.map({ name: name, race: 'gnome', gender: gender, eyes: gnomeEyes, hair: hair, profession: profession, inventory: inventory });

var character = exports.character = fabrico.oneOf(human, elf, dwarf, gnome, halfElf);


},{"./data/names/roman-name":2,"./fabrico":3}],5:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var drd = require('definitely-random-data');

var MarkovChainSource = function (_drd$AbstractSource) {
  _inherits(MarkovChainSource, _drd$AbstractSource);

  function MarkovChainSource(list) {
    _classCallCheck(this, MarkovChainSource);

    var _this = _possibleConstructorReturn(this, (MarkovChainSource.__proto__ || Object.getPrototypeOf(MarkovChainSource)).call(this));

    _this.list = list;
    _this.chain = null;
    return _this;
  }

  _createClass(MarkovChainSource, [{
    key: 'getItem',
    value: function getItem(rng) {

      if (this.chain === null) {
        this.chain = construct_chain(this.list);
      }

      return markov_name(this.chain, rng || drd.Defaults.defaultRng);
    }
  }]);

  return MarkovChainSource;
}(drd.AbstractSource);

exports.MarkovChainSource = MarkovChainSource;

/*
Extend DRD to have a markov source
*/
drd.Generator.prototype.markov = function (list) {
  return new MarkovChainSource(list);
};

// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
// name_generator.js
// written and released to the public domain by drow <drow@bin.sh>
// http://creativecommons.org/publicdomain/zero/1.0/
// https://donjon.bin.sh/code/name/name_generator.js

var name_set = {};
var chain_cache = {};

// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
// generator function

function generate_name(type) {
  var chain;if (chain = markov_chain(type)) {
    return markov_name(chain);
  }
  return '';
}

// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
// get markov chain by type

function markov_chain(type) {
  var chain;if (chain = chain_cache[type]) {
    return chain;
  } else {
    var list;if (list = name_set[type]) {
      var chain;if (chain = construct_chain(list)) {
        chain_cache[type] = chain;
        return chain;
      }
    }
  }
  return false;
}

// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
// construct markov chain from list of names

function construct_chain(list) {
  var chain = {};

  var i;for (i = 0; i < list.length; i++) {
    var names = list[i].split(/\s+/);
    chain = incr_chain(chain, 'parts', names.length);

    var j;for (j = 0; j < names.length; j++) {
      var name = names[j];
      chain = incr_chain(chain, 'name_len', name.length);

      var c = name.substr(0, 1);
      chain = incr_chain(chain, 'initial', c);

      var string = name.substr(1);
      var last_c = c;

      while (string.length > 0) {
        var c = string.substr(0, 1);
        chain = incr_chain(chain, last_c, c);

        string = string.substr(1);
        last_c = c;
      }
    }
  }
  return scale_chain(chain);
}
function incr_chain(chain, key, token) {
  if (chain[key]) {
    if (chain[key][token]) {
      chain[key][token]++;
    } else {
      chain[key][token] = 1;
    }
  } else {
    chain[key] = {};
    chain[key][token] = 1;
  }
  return chain;
}
function scale_chain(chain) {
  var table_len = {};

  var key;for (key in chain) {
    table_len[key] = 0;

    var token;for (token in chain[key]) {
      var count = chain[key][token];
      var weighted = Math.floor(Math.pow(count, 1.3));

      chain[key][token] = weighted;
      table_len[key] += weighted;
    }
  }
  chain['table_len'] = table_len;
  return chain;
}

// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
// construct name from markov chain

function markov_name(chain, rng) {
  var parts = select_link(chain, 'parts', rng);
  var names = [];

  var i;for (i = 0; i < parts; i++) {
    var name_len = select_link(chain, 'name_len', rng);
    var c = select_link(chain, 'initial', rng);
    var name = c;
    var last_c = c;

    while (name.length < name_len) {
      c = select_link(chain, last_c, rng);
      name += c;
      last_c = c;
    }
    names.push(name);
  }
  return names.join(' ');
}
function select_link(chain, key, rng) {
  var len = chain['table_len'][key];
  var idx = rng ? rng.getRandomInt(0, len) : Math.floor(Math.random() * len);

  var t = 0;for (var token in chain[key]) {
    t += chain[key][token];
    if (idx < t) {
      return token;
    }
  }
  return '-';
}


},{"definitely-random-data":6}],6:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var seedrandom = require('seedrandom');
var util = require('util');

var Prng = function () {
  function Prng(fn) {
    _classCallCheck(this, Prng);

    this.fn = fn || Math.random;
  }

  _createClass(Prng, [{
    key: 'getRandomInt',
    value: function getRandomInt(min, max) {
      min = Math.ceil(min);
      max = Math.floor(max);
      return Math.floor(this.fn() * (max - min)) + min;
    }
  }, {
    key: 'getRandomFloat',
    value: function getRandomFloat(min, max) {
      if (util.isUndefined(min)) min = 0;
      if (util.isUndefined(max)) max = 1;

      return this.fn() * (max - min) + min;
    }
  }]);

  return Prng;
}();

var defaults = {
  defaultRng: new Prng(seedrandom())
};

var Source = function () {
  function Source() {
    _classCallCheck(this, Source);
  }

  _createClass(Source, [{
    key: 'get',
    value: function get(rng) {
      return this.getItem(rng || defaults.defaultRng);
    }
  }, {
    key: 'getItem',
    value: function getItem(rng) {
      throw 'getItem() is not implemented on ' + this.constructor.name;
    }
  }, {
    key: 'repeat',
    value: function repeat(min, max) {
      return new RangeSource(this, min, max);
    }
  }, {
    key: 'withRng',
    value: function withRng(rng) {
      return new RngOverrideSource(this, rng);
    }

    /*
    Wraps a source such that it will execute only if a certain probability is met.
    It's basically a special case of repeat(0, 1). 
    
    repeat(0,1) is an uniform distribution of 0 or 1 and would be the same as flip() or flip(0.5).  However the 
    result of a flip isn't necessarily an array (whereas repeat(0,1) is), and the probability is controlled
    
    */

  }, {
    key: 'flip',
    value: function flip(successProbability, defaultValue) {
      return new FlipSource(this, successProbability, defaultValue);
    }
  }]);

  return Source;
}();

var ListSource = function (_Source) {
  _inherits(ListSource, _Source);

  function ListSource(obj, ctx) {
    _classCallCheck(this, ListSource);

    var _this = _possibleConstructorReturn(this, (ListSource.__proto__ || Object.getPrototypeOf(ListSource)).call(this, ctx));

    _this.list = obj;
    return _this;
  }

  _createClass(ListSource, [{
    key: 'getItem',
    value: function getItem(rng) {
      var idx = rng.getRandomInt(0, this.list.length);
      return this.list[idx];
    }
  }]);

  return ListSource;
}(Source);

function flatten(arr) {
  return arr.reduce(function (f, a) {
    return f.concat(Array.isArray(a) ? flatten(a) : a);
  }, []);
}

var RngOverrideSource = function (_Source2) {
  _inherits(RngOverrideSource, _Source2);

  function RngOverrideSource(src, rng) {
    _classCallCheck(this, RngOverrideSource);

    var _this2 = _possibleConstructorReturn(this, (RngOverrideSource.__proto__ || Object.getPrototypeOf(RngOverrideSource)).call(this));

    _this2.src = src;
    _this2.rng = rng;
    return _this2;
  }

  _createClass(RngOverrideSource, [{
    key: 'getItem',
    value: function getItem() {
      return this.src.get(this.rng);
    }
  }]);

  return RngOverrideSource;
}(Source);

var RangeSource = function (_Source3) {
  _inherits(RangeSource, _Source3);

  function RangeSource(src, min, max) {
    _classCallCheck(this, RangeSource);

    var _this3 = _possibleConstructorReturn(this, (RangeSource.__proto__ || Object.getPrototypeOf(RangeSource)).call(this));

    _this3.src = src;
    _this3.min = min;
    _this3.max = Math.max(max || 1, min);
    return _this3;
  }

  _createClass(RangeSource, [{
    key: 'getItem',
    value: function getItem(rng) {

      var ret = [];

      var n = 1;
      if (this.min !== 1 || this.max !== 1) n = rng.getRandomInt(this.min, this.max + 1);

      for (var idx = 0; idx < n; idx++) {
        //don't pass the possibly overriden rng down to the next level (prevents infinite overrides)
        ret.push(this.src.get());
      }

      return flatten(ret);
    }
  }]);

  return RangeSource;
}(Source);

var FlipSource = exports.FlipSource = function (_Source4) {
  _inherits(FlipSource, _Source4);

  function FlipSource(src, prob, defaultValue) {
    _classCallCheck(this, FlipSource);

    var _this4 = _possibleConstructorReturn(this, (FlipSource.__proto__ || Object.getPrototypeOf(FlipSource)).call(this));

    _this4.src = src;
    _this4.prob = prob || 0.5;
    _this4.defaultValue = defaultValue;
    return _this4;
  }

  _createClass(FlipSource, [{
    key: 'getItem',
    value: function getItem(rng) {

      if (rng.getRandomFloat() < this.prob) {
        return this.src.get();
      }

      if (this.defaultValue && this.defaultValue instanceof Source) {
        return this.defaultValue.get();
      }

      return this.defaultValue;
    }
  }]);

  return FlipSource;
}(Source);

var LiteralSource = function (_Source5) {
  _inherits(LiteralSource, _Source5);

  function LiteralSource(literal) {
    _classCallCheck(this, LiteralSource);

    var _this5 = _possibleConstructorReturn(this, (LiteralSource.__proto__ || Object.getPrototypeOf(LiteralSource)).call(this));

    _this5.literal = literal;
    return _this5;
  }

  _createClass(LiteralSource, [{
    key: 'getItem',
    value: function getItem() {
      return this.literal;
    }
  }]);

  return LiteralSource;
}(Source);

var TokenSource = function (_Source6) {
  _inherits(TokenSource, _Source6);

  function TokenSource(tokens) {
    _classCallCheck(this, TokenSource);

    var _this6 = _possibleConstructorReturn(this, (TokenSource.__proto__ || Object.getPrototypeOf(TokenSource)).call(this));

    _this6.tokens = tokens;
    return _this6;
  }

  _createClass(TokenSource, [{
    key: 'getItem',
    value: function getItem() {

      var ret = [];

      for (var i = 0; i < this.tokens.length; i++) {
        var token = this.tokens[i];

        if (token instanceof Source) {
          ret.push(token.get());
        } else {
          ret.push(token);
        }
      }

      return flatten(ret);
    }
  }]);

  return TokenSource;
}(Source);

var OneOfTokenSource = exports.OneOfTokenSource = function (_Source7) {
  _inherits(OneOfTokenSource, _Source7);

  function OneOfTokenSource(tokens) {
    _classCallCheck(this, OneOfTokenSource);

    var _this7 = _possibleConstructorReturn(this, (OneOfTokenSource.__proto__ || Object.getPrototypeOf(OneOfTokenSource)).call(this));

    _this7.tokens = tokens;
    return _this7;
  }

  _createClass(OneOfTokenSource, [{
    key: 'getItem',
    value: function getItem(rng) {
      var idx = rng.getRandomInt(0, this.tokens.length);

      var token = this.tokens[idx];

      if (token instanceof Source) {
        return token.get();
      } else {
        return token;
      }
    }
  }]);

  return OneOfTokenSource;
}(Source);

var ObjectTokenSource = exports.ObjectTokenSource = function (_Source8) {
  _inherits(ObjectTokenSource, _Source8);

  function ObjectTokenSource(obj) {
    _classCallCheck(this, ObjectTokenSource);

    var _this8 = _possibleConstructorReturn(this, (ObjectTokenSource.__proto__ || Object.getPrototypeOf(ObjectTokenSource)).call(this));

    _this8.obj = obj;
    return _this8;
  }

  _createClass(ObjectTokenSource, [{
    key: 'getItem',
    value: function getItem() {
      return this.resolveValue(this.obj);
    }
  }, {
    key: 'resolveValue',
    value: function resolveValue(token, parent) {

      if (token === null) return null;

      if (util.isUndefined(token)) return undefined;

      if (token instanceof Source) {
        return token.get();
      } else if (util.isArray(token)) {
        var ret = [];

        var _iteratorNormalCompletion = true;
        var _didIteratorError = false;
        var _iteratorError = undefined;

        try {
          for (var _iterator = token[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
            var o = _step.value;

            ret.push(this.resolveValue(o, parent || ret));
          }
        } catch (err) {
          _didIteratorError = true;
          _iteratorError = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion && _iterator.return) {
              _iterator.return();
            }
          } finally {
            if (_didIteratorError) {
              throw _iteratorError;
            }
          }
        }

        return ret;
      } else if (util.isFunction(token)) {
        return token(parent);
      } else if (util.isObject(token)) {
        var _ret = {};

        var _iteratorNormalCompletion2 = true;
        var _didIteratorError2 = false;
        var _iteratorError2 = undefined;

        try {
          for (var _iterator2 = Object.keys(token)[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
            var key = _step2.value;

            _ret[key] = this.resolveValue(token[key], parent || _ret);
          }
        } catch (err) {
          _didIteratorError2 = true;
          _iteratorError2 = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion2 && _iterator2.return) {
              _iterator2.return();
            }
          } finally {
            if (_didIteratorError2) {
              throw _iteratorError2;
            }
          }
        }

        return _ret;
      }

      return token;
    }
  }]);

  return ObjectTokenSource;
}(Source);

var MarkovChainSource = exports.MarkovChainSource = function (_Source9) {
  _inherits(MarkovChainSource, _Source9);

  function MarkovChainSource(obj) {
    _classCallCheck(this, MarkovChainSource);

    return _possibleConstructorReturn(this, (MarkovChainSource.__proto__ || Object.getPrototypeOf(MarkovChainSource)).call(this));
  }

  _createClass(MarkovChainSource, [{
    key: 'getItem',
    value: function getItem() {
      return this.resolveValue(this.obj);
    }
  }, {
    key: 'resolveValue',
    value: function resolveValue(token, parent) {

      if (token === null) return null;

      if (util.isUndefined(token)) return undefined;

      if (token instanceof Source) {
        return token.get();
      } else if (util.isArray(token)) {
        var ret = [];

        var _iteratorNormalCompletion3 = true;
        var _didIteratorError3 = false;
        var _iteratorError3 = undefined;

        try {
          for (var _iterator3 = token[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
            var o = _step3.value;

            ret.push(this.resolveValue(o, parent || ret));
          }
        } catch (err) {
          _didIteratorError3 = true;
          _iteratorError3 = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion3 && _iterator3.return) {
              _iterator3.return();
            }
          } finally {
            if (_didIteratorError3) {
              throw _iteratorError3;
            }
          }
        }

        return ret;
      } else if (util.isFunction(token)) {
        return token(parent);
      } else if (util.isObject(token)) {
        var _ret2 = {};

        var _iteratorNormalCompletion4 = true;
        var _didIteratorError4 = false;
        var _iteratorError4 = undefined;

        try {
          for (var _iterator4 = Object.keys(token)[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {
            var key = _step4.value;

            _ret2[key] = this.resolveValue(token[key], parent || _ret2);
          }
        } catch (err) {
          _didIteratorError4 = true;
          _iteratorError4 = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion4 && _iterator4.return) {
              _iterator4.return();
            }
          } finally {
            if (_didIteratorError4) {
              throw _iteratorError4;
            }
          }
        }

        return _ret2;
      }

      return token;
    }
  }]);

  return MarkovChainSource;
}(Source);

var Generator = function () {
  function Generator() {
    _classCallCheck(this, Generator);
  }

  _createClass(Generator, [{
    key: 'seedPrng',
    value: function seedPrng(seed) {
      defaults.defaultRng = new Prng(seedrandom(seed));
    }
  }, {
    key: 'literal',
    value: function literal(o) {
      return new LiteralSource(o);
    }
  }, {
    key: 'tokens',
    value: function tokens() {
      var arr = Array.prototype.slice.call(arguments, 0);
      return new TokenSource(flatten(arr));
    }
  }, {
    key: 'list',
    value: function list(arr) {
      return new ListSource(arr);
    }
  }, {
    key: 'oneOf',
    value: function oneOf() {
      var arr = Array.prototype.slice.call(arguments, 0);
      return new OneOfTokenSource(arr);
    }
  }, {
    key: 'map',
    value: function map(obj) {
      return new ObjectTokenSource(obj);
    }
  }]);

  return Generator;
}();

exports.ListSource = ListSource;
exports.TokenSource = TokenSource;
exports.LiteralSource = LiteralSource;
exports.RangeSource = RangeSource;
exports.RngOverrideSource = RngOverrideSource;
exports.AbstractSource = Source;
exports.Prng = Prng;
exports.Defaults = defaults;
exports.Generator = Generator;


},{"seedrandom":7,"util":13}],7:[function(require,module,exports){
// A library of seedable RNGs implemented in Javascript.
//
// Usage:
//
// var seedrandom = require('seedrandom');
// var random = seedrandom(1); // or any seed.
// var x = random();       // 0 <= x < 1.  Every bit is random.
// var x = random.quick(); // 0 <= x < 1.  32 bits of randomness.

// alea, a 53-bit multiply-with-carry generator by Johannes Baagøe.
// Period: ~2^116
// Reported to pass all BigCrush tests.
var alea = require('./lib/alea');

// xor128, a pure xor-shift generator by George Marsaglia.
// Period: 2^128-1.
// Reported to fail: MatrixRank and LinearComp.
var xor128 = require('./lib/xor128');

// xorwow, George Marsaglia's 160-bit xor-shift combined plus weyl.
// Period: 2^192-2^32
// Reported to fail: CollisionOver, SimpPoker, and LinearComp.
var xorwow = require('./lib/xorwow');

// xorshift7, by François Panneton and Pierre L'ecuyer, takes
// a different approach: it adds robustness by allowing more shifts
// than Marsaglia's original three.  It is a 7-shift generator
// with 256 bits, that passes BigCrush with no systmatic failures.
// Period 2^256-1.
// No systematic BigCrush failures reported.
var xorshift7 = require('./lib/xorshift7');

// xor4096, by Richard Brent, is a 4096-bit xor-shift with a
// very long period that also adds a Weyl generator. It also passes
// BigCrush with no systematic failures.  Its long period may
// be useful if you have many generators and need to avoid
// collisions.
// Period: 2^4128-2^32.
// No systematic BigCrush failures reported.
var xor4096 = require('./lib/xor4096');

// Tyche-i, by Samuel Neves and Filipe Araujo, is a bit-shifting random
// number generator derived from ChaCha, a modern stream cipher.
// https://eden.dei.uc.pt/~sneves/pubs/2011-snfa2.pdf
// Period: ~2^127
// No systematic BigCrush failures reported.
var tychei = require('./lib/tychei');

// The original ARC4-based prng included in this library.
// Period: ~2^1600
var sr = require('./seedrandom');

sr.alea = alea;
sr.xor128 = xor128;
sr.xorwow = xorwow;
sr.xorshift7 = xorshift7;
sr.xor4096 = xor4096;
sr.tychei = tychei;

module.exports = sr;

},{"./lib/alea":9,"./lib/tychei":9,"./lib/xor128":9,"./lib/xor4096":9,"./lib/xorshift7":9,"./lib/xorwow":9,"./seedrandom":8}],8:[function(require,module,exports){
/*
Copyright 2014 David Bau.

Permission is hereby granted, free of charge, to any person obtaining
a copy of this software and associated documentation files (the
"Software"), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

*/

(function (pool, math) {
//
// The following constants are related to IEEE 754 limits.
//
var global = this,
    width = 256,        // each RC4 output is 0 <= x < 256
    chunks = 6,         // at least six RC4 outputs for each double
    digits = 52,        // there are 52 significant digits in a double
    rngname = 'random', // rngname: name for Math.random and Math.seedrandom
    startdenom = math.pow(width, chunks),
    significance = math.pow(2, digits),
    overflow = significance * 2,
    mask = width - 1,
    nodecrypto;         // node.js crypto module, initialized at the bottom.

//
// seedrandom()
// This is the seedrandom function described above.
//
function seedrandom(seed, options, callback) {
  var key = [];
  options = (options == true) ? { entropy: true } : (options || {});

  // Flatten the seed string or build one from local entropy if needed.
  var shortseed = mixkey(flatten(
    options.entropy ? [seed, tostring(pool)] :
    (seed == null) ? autoseed() : seed, 3), key);

  // Use the seed to initialize an ARC4 generator.
  var arc4 = new ARC4(key);

  // This function returns a random double in [0, 1) that contains
  // randomness in every bit of the mantissa of the IEEE 754 value.
  var prng = function() {
    var n = arc4.g(chunks),             // Start with a numerator n < 2 ^ 48
        d = startdenom,                 //   and denominator d = 2 ^ 48.
        x = 0;                          //   and no 'extra last byte'.
    while (n < significance) {          // Fill up all significant digits by
      n = (n + x) * width;              //   shifting numerator and
      d *= width;                       //   denominator and generating a
      x = arc4.g(1);                    //   new least-significant-byte.
    }
    while (n >= overflow) {             // To avoid rounding up, before adding
      n /= 2;                           //   last byte, shift everything
      d /= 2;                           //   right using integer math until
      x >>>= 1;                         //   we have exactly the desired bits.
    }
    return (n + x) / d;                 // Form the number within [0, 1).
  };

  prng.int32 = function() { return arc4.g(4) | 0; }
  prng.quick = function() { return arc4.g(4) / 0x100000000; }
  prng.double = prng;

  // Mix the randomness into accumulated entropy.
  mixkey(tostring(arc4.S), pool);

  // Calling convention: what to return as a function of prng, seed, is_math.
  return (options.pass || callback ||
      function(prng, seed, is_math_call, state) {
        if (state) {
          // Load the arc4 state from the given state if it has an S array.
          if (state.S) { copy(state, arc4); }
          // Only provide the .state method if requested via options.state.
          prng.state = function() { return copy(arc4, {}); }
        }

        // If called as a method of Math (Math.seedrandom()), mutate
        // Math.random because that is how seedrandom.js has worked since v1.0.
        if (is_math_call) { math[rngname] = prng; return seed; }

        // Otherwise, it is a newer calling convention, so return the
        // prng directly.
        else return prng;
      })(
  prng,
  shortseed,
  'global' in options ? options.global : (this == math),
  options.state);
}
math['seed' + rngname] = seedrandom;

//
// ARC4
//
// An ARC4 implementation.  The constructor takes a key in the form of
// an array of at most (width) integers that should be 0 <= x < (width).
//
// The g(count) method returns a pseudorandom integer that concatenates
// the next (count) outputs from ARC4.  Its return value is a number x
// that is in the range 0 <= x < (width ^ count).
//
function ARC4(key) {
  var t, keylen = key.length,
      me = this, i = 0, j = me.i = me.j = 0, s = me.S = [];

  // The empty key [] is treated as [0].
  if (!keylen) { key = [keylen++]; }

  // Set up S using the standard key scheduling algorithm.
  while (i < width) {
    s[i] = i++;
  }
  for (i = 0; i < width; i++) {
    s[i] = s[j = mask & (j + key[i % keylen] + (t = s[i]))];
    s[j] = t;
  }

  // The "g" method returns the next (count) outputs as one number.
  (me.g = function(count) {
    // Using instance members instead of closure state nearly doubles speed.
    var t, r = 0,
        i = me.i, j = me.j, s = me.S;
    while (count--) {
      t = s[i = mask & (i + 1)];
      r = r * width + s[mask & ((s[i] = s[j = mask & (j + t)]) + (s[j] = t))];
    }
    me.i = i; me.j = j;
    return r;
    // For robust unpredictability, the function call below automatically
    // discards an initial batch of values.  This is called RC4-drop[256].
    // See http://google.com/search?q=rsa+fluhrer+response&btnI
  })(width);
}

//
// copy()
// Copies internal state of ARC4 to or from a plain object.
//
function copy(f, t) {
  t.i = f.i;
  t.j = f.j;
  t.S = f.S.slice();
  return t;
};

//
// flatten()
// Converts an object tree to nested arrays of strings.
//
function flatten(obj, depth) {
  var result = [], typ = (typeof obj), prop;
  if (depth && typ == 'object') {
    for (prop in obj) {
      try { result.push(flatten(obj[prop], depth - 1)); } catch (e) {}
    }
  }
  return (result.length ? result : typ == 'string' ? obj : obj + '\0');
}

//
// mixkey()
// Mixes a string seed into a key that is an array of integers, and
// returns a shortened string seed that is equivalent to the result key.
//
function mixkey(seed, key) {
  var stringseed = seed + '', smear, j = 0;
  while (j < stringseed.length) {
    key[mask & j] =
      mask & ((smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++));
  }
  return tostring(key);
}

//
// autoseed()
// Returns an object for autoseeding, using window.crypto and Node crypto
// module if available.
//
function autoseed() {
  try {
    if (nodecrypto) { return tostring(nodecrypto.randomBytes(width)); }
    var out = new Uint8Array(width);
    (global.crypto || global.msCrypto).getRandomValues(out);
    return tostring(out);
  } catch (e) {
    var browser = global.navigator,
        plugins = browser && browser.plugins;
    return [+new Date, global, plugins, global.screen, tostring(pool)];
  }
}

//
// tostring()
// Converts an array of charcodes to a string
//
function tostring(a) {
  return String.fromCharCode.apply(0, a);
}

//
// When seedrandom.js is loaded, we immediately mix a few bits
// from the built-in RNG into the entropy pool.  Because we do
// not want to interfere with deterministic PRNG state later,
// seedrandom will not call math.random on its own again after
// initialization.
//
mixkey(math.random(), pool);

//
// Nodejs and AMD support: export the implementation as a module using
// either convention.
//
if ((typeof module) == 'object' && module.exports) {
  module.exports = seedrandom;
  // When in node.js, try using crypto package for autoseeding.
  try {
    nodecrypto = require('crypto');
  } catch (ex) {}
} else if ((typeof define) == 'function' && define.amd) {
  define(function() { return seedrandom; });
}

// End anonymous scope, and pass initial values.
})(
  [],     // pool: entropy pool starts empty
  Math    // math: package containing random, pow, and seedrandom
);

},{"crypto":9}],9:[function(require,module,exports){

},{}],10:[function(require,module,exports){
if (typeof Object.create === 'function') {
  // implementation from standard node.js 'util' module
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    ctor.prototype = Object.create(superCtor.prototype, {
      constructor: {
        value: ctor,
        enumerable: false,
        writable: true,
        configurable: true
      }
    });
  };
} else {
  // old school shim for old browsers
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    var TempCtor = function () {}
    TempCtor.prototype = superCtor.prototype
    ctor.prototype = new TempCtor()
    ctor.prototype.constructor = ctor
  }
}

},{}],11:[function(require,module,exports){
// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };

},{}],12:[function(require,module,exports){
module.exports = function isBuffer(arg) {
  return arg && typeof arg === 'object'
    && typeof arg.copy === 'function'
    && typeof arg.fill === 'function'
    && typeof arg.readUInt8 === 'function';
}
},{}],13:[function(require,module,exports){
(function (process,global){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

var formatRegExp = /%[sdj%]/g;
exports.format = function(f) {
  if (!isString(f)) {
    var objects = [];
    for (var i = 0; i < arguments.length; i++) {
      objects.push(inspect(arguments[i]));
    }
    return objects.join(' ');
  }

  var i = 1;
  var args = arguments;
  var len = args.length;
  var str = String(f).replace(formatRegExp, function(x) {
    if (x === '%%') return '%';
    if (i >= len) return x;
    switch (x) {
      case '%s': return String(args[i++]);
      case '%d': return Number(args[i++]);
      case '%j':
        try {
          return JSON.stringify(args[i++]);
        } catch (_) {
          return '[Circular]';
        }
      default:
        return x;
    }
  });
  for (var x = args[i]; i < len; x = args[++i]) {
    if (isNull(x) || !isObject(x)) {
      str += ' ' + x;
    } else {
      str += ' ' + inspect(x);
    }
  }
  return str;
};


// Mark that a method should not be used.
// Returns a modified function which warns once by default.
// If --no-deprecation is set, then it is a no-op.
exports.deprecate = function(fn, msg) {
  // Allow for deprecating things in the process of starting up.
  if (isUndefined(global.process)) {
    return function() {
      return exports.deprecate(fn, msg).apply(this, arguments);
    };
  }

  if (process.noDeprecation === true) {
    return fn;
  }

  var warned = false;
  function deprecated() {
    if (!warned) {
      if (process.throwDeprecation) {
        throw new Error(msg);
      } else if (process.traceDeprecation) {
        console.trace(msg);
      } else {
        console.error(msg);
      }
      warned = true;
    }
    return fn.apply(this, arguments);
  }

  return deprecated;
};


var debugs = {};
var debugEnviron;
exports.debuglog = function(set) {
  if (isUndefined(debugEnviron))
    debugEnviron = process.env.NODE_DEBUG || '';
  set = set.toUpperCase();
  if (!debugs[set]) {
    if (new RegExp('\\b' + set + '\\b', 'i').test(debugEnviron)) {
      var pid = process.pid;
      debugs[set] = function() {
        var msg = exports.format.apply(exports, arguments);
        console.error('%s %d: %s', set, pid, msg);
      };
    } else {
      debugs[set] = function() {};
    }
  }
  return debugs[set];
};


/**
 * Echos the value of a value. Trys to print the value out
 * in the best way possible given the different types.
 *
 * @param {Object} obj The object to print out.
 * @param {Object} opts Optional options object that alters the output.
 */
/* legacy: obj, showHidden, depth, colors*/
function inspect(obj, opts) {
  // default options
  var ctx = {
    seen: [],
    stylize: stylizeNoColor
  };
  // legacy...
  if (arguments.length >= 3) ctx.depth = arguments[2];
  if (arguments.length >= 4) ctx.colors = arguments[3];
  if (isBoolean(opts)) {
    // legacy...
    ctx.showHidden = opts;
  } else if (opts) {
    // got an "options" object
    exports._extend(ctx, opts);
  }
  // set default options
  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;
  if (isUndefined(ctx.depth)) ctx.depth = 2;
  if (isUndefined(ctx.colors)) ctx.colors = false;
  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;
  if (ctx.colors) ctx.stylize = stylizeWithColor;
  return formatValue(ctx, obj, ctx.depth);
}
exports.inspect = inspect;


// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics
inspect.colors = {
  'bold' : [1, 22],
  'italic' : [3, 23],
  'underline' : [4, 24],
  'inverse' : [7, 27],
  'white' : [37, 39],
  'grey' : [90, 39],
  'black' : [30, 39],
  'blue' : [34, 39],
  'cyan' : [36, 39],
  'green' : [32, 39],
  'magenta' : [35, 39],
  'red' : [31, 39],
  'yellow' : [33, 39]
};

// Don't use 'blue' not visible on cmd.exe
inspect.styles = {
  'special': 'cyan',
  'number': 'yellow',
  'boolean': 'yellow',
  'undefined': 'grey',
  'null': 'bold',
  'string': 'green',
  'date': 'magenta',
  // "name": intentionally not styling
  'regexp': 'red'
};


function stylizeWithColor(str, styleType) {
  var style = inspect.styles[styleType];

  if (style) {
    return '\u001b[' + inspect.colors[style][0] + 'm' + str +
           '\u001b[' + inspect.colors[style][1] + 'm';
  } else {
    return str;
  }
}


function stylizeNoColor(str, styleType) {
  return str;
}


function arrayToHash(array) {
  var hash = {};

  array.forEach(function(val, idx) {
    hash[val] = true;
  });

  return hash;
}


function formatValue(ctx, value, recurseTimes) {
  // Provide a hook for user-specified inspect functions.
  // Check that value is an object with an inspect function on it
  if (ctx.customInspect &&
      value &&
      isFunction(value.inspect) &&
      // Filter out the util module, it's inspect function is special
      value.inspect !== exports.inspect &&
      // Also filter out any prototype objects using the circular check.
      !(value.constructor && value.constructor.prototype === value)) {
    var ret = value.inspect(recurseTimes, ctx);
    if (!isString(ret)) {
      ret = formatValue(ctx, ret, recurseTimes);
    }
    return ret;
  }

  // Primitive types cannot have properties
  var primitive = formatPrimitive(ctx, value);
  if (primitive) {
    return primitive;
  }

  // Look up the keys of the object.
  var keys = Object.keys(value);
  var visibleKeys = arrayToHash(keys);

  if (ctx.showHidden) {
    keys = Object.getOwnPropertyNames(value);
  }

  // IE doesn't make error fields non-enumerable
  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx
  if (isError(value)
      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {
    return formatError(value);
  }

  // Some type of object without properties can be shortcutted.
  if (keys.length === 0) {
    if (isFunction(value)) {
      var name = value.name ? ': ' + value.name : '';
      return ctx.stylize('[Function' + name + ']', 'special');
    }
    if (isRegExp(value)) {
      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');
    }
    if (isDate(value)) {
      return ctx.stylize(Date.prototype.toString.call(value), 'date');
    }
    if (isError(value)) {
      return formatError(value);
    }
  }

  var base = '', array = false, braces = ['{', '}'];

  // Make Array say that they are Array
  if (isArray(value)) {
    array = true;
    braces = ['[', ']'];
  }

  // Make functions say that they are functions
  if (isFunction(value)) {
    var n = value.name ? ': ' + value.name : '';
    base = ' [Function' + n + ']';
  }

  // Make RegExps say that they are RegExps
  if (isRegExp(value)) {
    base = ' ' + RegExp.prototype.toString.call(value);
  }

  // Make dates with properties first say the date
  if (isDate(value)) {
    base = ' ' + Date.prototype.toUTCString.call(value);
  }

  // Make error with message first say the error
  if (isError(value)) {
    base = ' ' + formatError(value);
  }

  if (keys.length === 0 && (!array || value.length == 0)) {
    return braces[0] + base + braces[1];
  }

  if (recurseTimes < 0) {
    if (isRegExp(value)) {
      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');
    } else {
      return ctx.stylize('[Object]', 'special');
    }
  }

  ctx.seen.push(value);

  var output;
  if (array) {
    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);
  } else {
    output = keys.map(function(key) {
      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);
    });
  }

  ctx.seen.pop();

  return reduceToSingleString(output, base, braces);
}


function formatPrimitive(ctx, value) {
  if (isUndefined(value))
    return ctx.stylize('undefined', 'undefined');
  if (isString(value)) {
    var simple = '\'' + JSON.stringify(value).replace(/^"|"$/g, '')
                                             .replace(/'/g, "\\'")
                                             .replace(/\\"/g, '"') + '\'';
    return ctx.stylize(simple, 'string');
  }
  if (isNumber(value))
    return ctx.stylize('' + value, 'number');
  if (isBoolean(value))
    return ctx.stylize('' + value, 'boolean');
  // For some reason typeof null is "object", so special case here.
  if (isNull(value))
    return ctx.stylize('null', 'null');
}


function formatError(value) {
  return '[' + Error.prototype.toString.call(value) + ']';
}


function formatArray(ctx, value, recurseTimes, visibleKeys, keys) {
  var output = [];
  for (var i = 0, l = value.length; i < l; ++i) {
    if (hasOwnProperty(value, String(i))) {
      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,
          String(i), true));
    } else {
      output.push('');
    }
  }
  keys.forEach(function(key) {
    if (!key.match(/^\d+$/)) {
      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,
          key, true));
    }
  });
  return output;
}


function formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {
  var name, str, desc;
  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };
  if (desc.get) {
    if (desc.set) {
      str = ctx.stylize('[Getter/Setter]', 'special');
    } else {
      str = ctx.stylize('[Getter]', 'special');
    }
  } else {
    if (desc.set) {
      str = ctx.stylize('[Setter]', 'special');
    }
  }
  if (!hasOwnProperty(visibleKeys, key)) {
    name = '[' + key + ']';
  }
  if (!str) {
    if (ctx.seen.indexOf(desc.value) < 0) {
      if (isNull(recurseTimes)) {
        str = formatValue(ctx, desc.value, null);
      } else {
        str = formatValue(ctx, desc.value, recurseTimes - 1);
      }
      if (str.indexOf('\n') > -1) {
        if (array) {
          str = str.split('\n').map(function(line) {
            return '  ' + line;
          }).join('\n').substr(2);
        } else {
          str = '\n' + str.split('\n').map(function(line) {
            return '   ' + line;
          }).join('\n');
        }
      }
    } else {
      str = ctx.stylize('[Circular]', 'special');
    }
  }
  if (isUndefined(name)) {
    if (array && key.match(/^\d+$/)) {
      return str;
    }
    name = JSON.stringify('' + key);
    if (name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)) {
      name = name.substr(1, name.length - 2);
      name = ctx.stylize(name, 'name');
    } else {
      name = name.replace(/'/g, "\\'")
                 .replace(/\\"/g, '"')
                 .replace(/(^"|"$)/g, "'");
      name = ctx.stylize(name, 'string');
    }
  }

  return name + ': ' + str;
}


function reduceToSingleString(output, base, braces) {
  var numLinesEst = 0;
  var length = output.reduce(function(prev, cur) {
    numLinesEst++;
    if (cur.indexOf('\n') >= 0) numLinesEst++;
    return prev + cur.replace(/\u001b\[\d\d?m/g, '').length + 1;
  }, 0);

  if (length > 60) {
    return braces[0] +
           (base === '' ? '' : base + '\n ') +
           ' ' +
           output.join(',\n  ') +
           ' ' +
           braces[1];
  }

  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];
}


// NOTE: These type checking functions intentionally don't use `instanceof`
// because it is fragile and can be easily faked with `Object.create()`.
function isArray(ar) {
  return Array.isArray(ar);
}
exports.isArray = isArray;

function isBoolean(arg) {
  return typeof arg === 'boolean';
}
exports.isBoolean = isBoolean;

function isNull(arg) {
  return arg === null;
}
exports.isNull = isNull;

function isNullOrUndefined(arg) {
  return arg == null;
}
exports.isNullOrUndefined = isNullOrUndefined;

function isNumber(arg) {
  return typeof arg === 'number';
}
exports.isNumber = isNumber;

function isString(arg) {
  return typeof arg === 'string';
}
exports.isString = isString;

function isSymbol(arg) {
  return typeof arg === 'symbol';
}
exports.isSymbol = isSymbol;

function isUndefined(arg) {
  return arg === void 0;
}
exports.isUndefined = isUndefined;

function isRegExp(re) {
  return isObject(re) && objectToString(re) === '[object RegExp]';
}
exports.isRegExp = isRegExp;

function isObject(arg) {
  return typeof arg === 'object' && arg !== null;
}
exports.isObject = isObject;

function isDate(d) {
  return isObject(d) && objectToString(d) === '[object Date]';
}
exports.isDate = isDate;

function isError(e) {
  return isObject(e) &&
      (objectToString(e) === '[object Error]' || e instanceof Error);
}
exports.isError = isError;

function isFunction(arg) {
  return typeof arg === 'function';
}
exports.isFunction = isFunction;

function isPrimitive(arg) {
  return arg === null ||
         typeof arg === 'boolean' ||
         typeof arg === 'number' ||
         typeof arg === 'string' ||
         typeof arg === 'symbol' ||  // ES6 symbol
         typeof arg === 'undefined';
}
exports.isPrimitive = isPrimitive;

exports.isBuffer = require('./support/isBuffer');

function objectToString(o) {
  return Object.prototype.toString.call(o);
}


function pad(n) {
  return n < 10 ? '0' + n.toString(10) : n.toString(10);
}


var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',
              'Oct', 'Nov', 'Dec'];

// 26 Feb 16:19:34
function timestamp() {
  var d = new Date();
  var time = [pad(d.getHours()),
              pad(d.getMinutes()),
              pad(d.getSeconds())].join(':');
  return [d.getDate(), months[d.getMonth()], time].join(' ');
}


// log is just a thin wrapper to console.log that prepends a timestamp
exports.log = function() {
  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));
};


/**
 * Inherit the prototype methods from one constructor into another.
 *
 * The Function.prototype.inherits from lang.js rewritten as a standalone
 * function (not on Function.prototype). NOTE: If this file is to be loaded
 * during bootstrapping this function needs to be rewritten using some native
 * functions as prototype setup using normal JavaScript does not work as
 * expected during bootstrapping (see mirror.js in r114903).
 *
 * @param {function} ctor Constructor function which needs to inherit the
 *     prototype.
 * @param {function} superCtor Constructor function to inherit prototype from.
 */
exports.inherits = require('inherits');

exports._extend = function(origin, add) {
  // Don't do anything if add isn't an object
  if (!add || !isObject(add)) return origin;

  var keys = Object.keys(add);
  var i = keys.length;
  while (i--) {
    origin[keys[i]] = add[keys[i]];
  }
  return origin;
};

function hasOwnProperty(obj, prop) {
  return Object.prototype.hasOwnProperty.call(obj, prop);
}

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./support/isBuffer":12,"_process":11,"inherits":10}],14:[function(require,module,exports){
const fabrico = require('fabrico');
const fantasy = require('fabrico/dist/fantasy.js');

exports.fabrico = fabrico;

exports.fantasy = fantasy;
exports.maps = {
    terrainMap: require('./maps/terrainmap.js'),
    city: require('./maps/city.js')
};

},{"./maps/city.js":16,"./maps/terrainmap.js":17,"fabrico":3,"fabrico/dist/fantasy.js":4}],15:[function(require,module,exports){
const binHeap = require('binheap');
const _ = require('../underscore.js')._;

function constructPath(cameFrom, current) {
    
    let p = [current];
    
    while(cameFrom[current.id]) {
        current = cameFrom[current.id];
        p.push(current);
    }
    
    return p;
}

class AStarFinder {
    
    constructor() {
    }
    
    diagonalHeuristic(start, end) {
        let D = 1;
        let D2 = Math.SQRT2;
        
        let dx = Math.abs(start.x - end.x);
        let dy = Math.abs(start.y - end.y);
        return D * (dx + dy) + (D2 - 2 * D) * Math.min(dx, dy)
    }
    
    find(map, start, end, heuristic) {
        
        heuristic = heuristic || this.diagonalHeuristic;
        
        let endFn = null;
        if(_.isFunction(end)) {
            endFn = end;
            end = null;
        }
        
        let data = {
            map: map,
            start: start,
            from: {},
            gscore: {},
            fscore: {},
            closedSet: {}
        };
        
        data.openSet = binHeap(function(node) { return data.fscore[node.id]; });
        
        data.gscore[start.id] = 0;
        data.fscore[start.id] = heuristic(start, end);
        data.openSet.push(start);
        
        while(data.openSet.size() > 0) {
            
            let current = data.openSet.pop();
            
            if(current === end || (endFn && endFn(current))) {
                return constructPath(data.from, current);
            }
            
            data.closedSet[current.id] = current;
            for(let n of map.neighbors(current)) {
                
                if(data.closedSet[n.id]) {
                    continue;
                }
                
                let isNew = false;
                let g = data.gscore[current.id] + heuristic(n, current);
                if(data.openSet.heap.indexOf(n) === -1) {
                    //new node
                    data.openSet.push(n);
                    isNew = true;
                } else if(g >= data.gscore[n.id]) {
                    //worse path
                    continue;
                }
                
                data.from[n.id] = current;
                data.gscore[n.id] = g;
                data.fscore[n.id] = g + heuristic(n, end);
                
                if(!isNew) {
                    data.openSet.rescoreElement(n);
                }
            }
        }
        
        return [];
    }
}

module.exports = new AStarFinder();

},{"../underscore.js":18,"binheap":1}],16:[function(require,module,exports){
const drd = require('fabrico/node_modules/definitely-random-data/dist/drd.js');
//                   definitely-random-data
const fabrico = require('fabrico');
const _ = require('../underscore.js')._;
const astar = require('./astar.js');

function defaultNodeProvider(x,y) {
    return {
        id: x + '_' + y,
        x: x,
        y: y,
        movable: true,
        height: 0,
        vegitation: 0,
        water: 0,
        population: 0
    };
}

class MapBuilder {
    
    constructor(x, y, nodeProvider) {
        
        this.nodeProvider = nodeProvider || defaultNodeProvider;
        this.width = x;
        this.height = y;
        this.graph = [];
        for(let yy = 0; yy < y; yy++) {
            
            let row = [];
            this.graph[yy] = row;
            for(let xx = 0; xx < x; xx++) {
                row[xx] = this.nodeProvider(xx, yy);
            }
        }
    }
    
    getNode(x, y) {
        
        if(y >= 0 && y < this.graph.length) {
            if(x >= 0 && x < this.graph[y].length) {
                return this.graph[y][x];
            }
        }
        
        return null;
    } 
    
    neighbors(node) {
        let ret = [];
        
        let n = this.getNode(node.x, node.y+1);
        if(n !== null) ret.push(n);
        
        n = this.getNode(node.x+1, node.y+1);
        if(n !== null) ret.push(n);
    
        n = this.getNode(node.x+1, node.y);
        if(n !== null) ret.push(n);
        
        n = this.getNode(node.x+1, node.y-1);
        if(n !== null) ret.push(n);
    
        n = this.getNode(node.x, node.y-1);
        if(n !== null) ret.push(n);
        
        n = this.getNode(node.x-1, node.y-1);
        if(n !== null) ret.push(n);
        
        n = this.getNode(node.x-1, node.y);
        if(n !== null) ret.push(n);
        
        n = this.getNode(node.x-1, node.y+1);
        if(n !== null) ret.push(n);
        
        return ret;
    }
    
    path(start, end, h) {
        return astar.find(this, start, end, h);
    }
    
    breadthFirstSearch(start, vist, diags) {
        
        let dist = {};
        let parents = {};
        
        let q = [];
        
        dist[start.id] = 0;
        q.push(start);
        let  distFn = astar.diagonalHeuristic;
        
        while(q.length > 0) {
            
            let cur = q.shift();
            for(let n of this.neighbors(cur)) {
                if(_.isUndefined(dist[n.id]) && vist(n, dist[cur.id], cur)) {
                    
                    dist[n.id] = distFn(start, n);
                    parents[n.id] = cur;
                    q.push(n);
                }
            }
        }
        
        return {
            distances: dist,
            parents: parents
        }
    }

}

let builder = exports.builder = function(terrainMap) {
    
    let b = new MapBuilder(terrainMap.width, terrainMap.height, function (x, y) {
        let node = defaultNodeProvider(x, y);
        let t = terrainMap.get(x, y);
        node.height = t.height;
        node.vegitation = t.vegitation;
        node.water = t.water;
        node.population = 0;
        
        return node;
    });
    
    return b;
}

let seedPopulation = exports.seedPopulation = function(b, density) {
    
    let rng = drd.Defaults.defaultRng;
    density = density || 6;
    let distFn = astar.diagonalHeuristic;
    
    let seeds = [];
    
    let maxx = null;
    let maxy = null;
    let minx = null;
    let miny = null;
    
    for(let i=0; i<density; i++) {
        
        let sx = rng.getRandomInt(0, b.width);
        let sy = rng.getRandomInt(0, b.height);
        
        let cur = b.getNode(sx, sy);
        if(cur.water === 255) {
            
            //find nearest non-water tile
            let found = false;
            b.breadthFirstSearch(cur, function(n) {
                
                if(found)
                    return false;
                
                if(n.water === 255)
                    return true;
                
                found = true;
                cur = n;
                return false;
            });
            
            if(cur.water === 255)
                continue; //With that much water it's hopeless
        }
        
        seeds.push(cur);
        
        if(maxx == null || maxx.x < cur.x)
            maxx = cur;
        if(maxy == null || maxy.y < cur.y)
            maxy = cur;
        if(minx == null || minx.x > cur.x)
            minx = cur;
        if(miny == null || miny.y > cur.y)
            miny = cur;
    }
    
    let furtherestPair = null;
    let furtherestDist = null;
    
    let dists = [maxx, maxy, minx, miny];
    
    for(let i=0; i<dists.length; i++) {
        let a = dists[i];
        for(let k=i+1; k<dists.length; k++) {
            let b = dists[k];
            let d = distFn(a, b);
            if(furtherestDist == null || d > furtherestDist) {
                furtherestPair = [a, b];
                furtherestDist = d;
            }
        }
    }
    
    let weightFn = function(a, b) {
        
        //every change of elevation of 17 costs 1 tile
        //every change of vegitation of 17 costs 1 tile
        //every water costs 8 tiles
        
        if(a == null || b == null)
            return 1;
        
        let dh = Math.abs(a.height - b.height) / 17;
        let dv = Math.abs(a.vegitation - b.vegitation) / 17;
        let dw = (a.water > 0 ? 8 : 0) + (b.water > 0 ? 8 : 0);
        
        return 1 + dh + dv + dw;
    };
    
    let mainRoad = [];
    let sideRoads = [];
    
    for(let o of b.path(furtherestPair[0], furtherestPair[1], weightFn)) {
        o.population = 255;
        mainRoad[o.id] = o;
    }
    
    for(let cur of seeds) {
        
        let cur = seeds.shift();
        if(cur === furtherestPair[0] || cur === furtherestPair[1]) {
            continue;
        }
        
        let p = astar.find(b, cur, function(end) { return end != null && mainRoad[end.id]; }, weightFn);
        
        for(let o of p) {
            o.population = 255;
        }
    }
    
    return b;
}


},{"../underscore.js":18,"./astar.js":15,"fabrico":3,"fabrico/node_modules/definitely-random-data/dist/drd.js":6}],17:[function(require,module,exports){
/*

TerrainMap -

    

*/

let terrainmap = module.exports = class TerrainMap {
    
    /*
     * RGBA format 1d array
     */
    constructor(data, width, height) {
        this.data = data;
        this.width = width;
        this.height = height;
    }
    
    /*
     Load image into heighmap. RGBA format 1d array
     
     Red = Elevation
     Green = Vegitation density 
            0 = rocky/barren
            255 = thick forest/jungle
     Blue = Water density 
            0 = ground
            1 - 127 = reserved ?
            128 = swamp
            255 = impassible without boat
     A = ??
     
     */
    get(x, y) {
        
        if(x < 0 ||    x >= this.width || y < 0 || y >= this.height) {
            return null;
        }
        
        let w = this.width;
        let h = this.height;
        
        let idx = y * w + x;
        idx *= 4;//there's 4 bytes
        
        let r = this.data[idx];
        let g = this.data[idx+1];
        let b = this.data[idx+2];
        let a = this.data[idx+3];
        
        return {
            
            height: r,
            vegitation: g,
            water: b
            
        };
    }
    
    /*
    /*
     * Create map from noise
     *
    static create(width, height, noiseFn) {
        
        
        
    }
    */
}

},{}],18:[function(require,module,exports){
//     Underscore.js 1.8.3
//     http://underscorejs.org
//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.
(function(){function n(n){function t(t,r,e,u,i,o){for(;i>=0&&o>i;i+=n){var a=u?u[i]:i;e=r(e,t[a],a,t)}return e}return function(r,e,u,i){e=b(e,i,4);var o=!k(r)&&m.keys(r),a=(o||r).length,c=n>0?0:a-1;return arguments.length<3&&(u=r[o?o[c]:c],c+=n),t(r,e,u,o,c,a)}}function t(n){return function(t,r,e){r=x(r,e);for(var u=O(t),i=n>0?0:u-1;i>=0&&u>i;i+=n)if(r(t[i],i,t))return i;return-1}}function r(n,t,r){return function(e,u,i){var o=0,a=O(e);if("number"==typeof i)n>0?o=i>=0?i:Math.max(i+a,o):a=i>=0?Math.min(i+1,a):i+a+1;else if(r&&i&&a)return i=r(e,u),e[i]===u?i:-1;if(u!==u)return i=t(l.call(e,o,a),m.isNaN),i>=0?i+o:-1;for(i=n>0?o:a-1;i>=0&&a>i;i+=n)if(e[i]===u)return i;return-1}}function e(n,t){var r=I.length,e=n.constructor,u=m.isFunction(e)&&e.prototype||a,i="constructor";for(m.has(n,i)&&!m.contains(t,i)&&t.push(i);r--;)i=I[r],i in n&&n[i]!==u[i]&&!m.contains(t,i)&&t.push(i)}var u=this,i=u._,o=Array.prototype,a=Object.prototype,c=Function.prototype,f=o.push,l=o.slice,s=a.toString,p=a.hasOwnProperty,h=Array.isArray,v=Object.keys,g=c.bind,y=Object.create,d=function(){},m=function(n){return n instanceof m?n:this instanceof m?void(this._wrapped=n):new m(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=m),exports._=m):u._=m,m.VERSION="1.8.3";var b=function(n,t,r){if(t===void 0)return n;switch(null==r?3:r){case 1:return function(r){return n.call(t,r)};case 2:return function(r,e){return n.call(t,r,e)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)}}return function(){return n.apply(t,arguments)}},x=function(n,t,r){return null==n?m.identity:m.isFunction(n)?b(n,t,r):m.isObject(n)?m.matcher(n):m.property(n)};m.iteratee=function(n,t){return x(n,t,1/0)};var _=function(n,t){return function(r){var e=arguments.length;if(2>e||null==r)return r;for(var u=1;e>u;u++)for(var i=arguments[u],o=n(i),a=o.length,c=0;a>c;c++){var f=o[c];t&&r[f]!==void 0||(r[f]=i[f])}return r}},j=function(n){if(!m.isObject(n))return{};if(y)return y(n);d.prototype=n;var t=new d;return d.prototype=null,t},w=function(n){return function(t){return null==t?void 0:t[n]}},A=Math.pow(2,53)-1,O=w("length"),k=function(n){var t=O(n);return"number"==typeof t&&t>=0&&A>=t};m.each=m.forEach=function(n,t,r){t=b(t,r);var e,u;if(k(n))for(e=0,u=n.length;u>e;e++)t(n[e],e,n);else{var i=m.keys(n);for(e=0,u=i.length;u>e;e++)t(n[i[e]],i[e],n)}return n},m.map=m.collect=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=Array(u),o=0;u>o;o++){var a=e?e[o]:o;i[o]=t(n[a],a,n)}return i},m.reduce=m.foldl=m.inject=n(1),m.reduceRight=m.foldr=n(-1),m.find=m.detect=function(n,t,r){var e;return e=k(n)?m.findIndex(n,t,r):m.findKey(n,t,r),e!==void 0&&e!==-1?n[e]:void 0},m.filter=m.select=function(n,t,r){var e=[];return t=x(t,r),m.each(n,function(n,r,u){t(n,r,u)&&e.push(n)}),e},m.reject=function(n,t,r){return m.filter(n,m.negate(x(t)),r)},m.every=m.all=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(!t(n[o],o,n))return!1}return!0},m.some=m.any=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(t(n[o],o,n))return!0}return!1},m.contains=m.includes=m.include=function(n,t,r,e){return k(n)||(n=m.values(n)),("number"!=typeof r||e)&&(r=0),m.indexOf(n,t,r)>=0},m.invoke=function(n,t){var r=l.call(arguments,2),e=m.isFunction(t);return m.map(n,function(n){var u=e?t:n[t];return null==u?u:u.apply(n,r)})},m.pluck=function(n,t){return m.map(n,m.property(t))},m.where=function(n,t){return m.filter(n,m.matcher(t))},m.findWhere=function(n,t){return m.find(n,m.matcher(t))},m.max=function(n,t,r){var e,u,i=-1/0,o=-1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],e>i&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(u>o||u===-1/0&&i===-1/0)&&(i=n,o=u)});return i},m.min=function(n,t,r){var e,u,i=1/0,o=1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],i>e&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(o>u||1/0===u&&1/0===i)&&(i=n,o=u)});return i},m.shuffle=function(n){for(var t,r=k(n)?n:m.values(n),e=r.length,u=Array(e),i=0;e>i;i++)t=m.random(0,i),t!==i&&(u[i]=u[t]),u[t]=r[i];return u},m.sample=function(n,t,r){return null==t||r?(k(n)||(n=m.values(n)),n[m.random(n.length-1)]):m.shuffle(n).slice(0,Math.max(0,t))},m.sortBy=function(n,t,r){return t=x(t,r),m.pluck(m.map(n,function(n,r,e){return{value:n,index:r,criteria:t(n,r,e)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||r===void 0)return 1;if(e>r||e===void 0)return-1}return n.index-t.index}),"value")};var F=function(n){return function(t,r,e){var u={};return r=x(r,e),m.each(t,function(e,i){var o=r(e,i,t);n(u,e,o)}),u}};m.groupBy=F(function(n,t,r){m.has(n,r)?n[r].push(t):n[r]=[t]}),m.indexBy=F(function(n,t,r){n[r]=t}),m.countBy=F(function(n,t,r){m.has(n,r)?n[r]++:n[r]=1}),m.toArray=function(n){return n?m.isArray(n)?l.call(n):k(n)?m.map(n,m.identity):m.values(n):[]},m.size=function(n){return null==n?0:k(n)?n.length:m.keys(n).length},m.partition=function(n,t,r){t=x(t,r);var e=[],u=[];return m.each(n,function(n,r,i){(t(n,r,i)?e:u).push(n)}),[e,u]},m.first=m.head=m.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:m.initial(n,n.length-t)},m.initial=function(n,t,r){return l.call(n,0,Math.max(0,n.length-(null==t||r?1:t)))},m.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:m.rest(n,Math.max(0,n.length-t))},m.rest=m.tail=m.drop=function(n,t,r){return l.call(n,null==t||r?1:t)},m.compact=function(n){return m.filter(n,m.identity)};var S=function(n,t,r,e){for(var u=[],i=0,o=e||0,a=O(n);a>o;o++){var c=n[o];if(k(c)&&(m.isArray(c)||m.isArguments(c))){t||(c=S(c,t,r));var f=0,l=c.length;for(u.length+=l;l>f;)u[i++]=c[f++]}else r||(u[i++]=c)}return u};m.flatten=function(n,t){return S(n,t,!1)},m.without=function(n){return m.difference(n,l.call(arguments,1))},m.uniq=m.unique=function(n,t,r,e){m.isBoolean(t)||(e=r,r=t,t=!1),null!=r&&(r=x(r,e));for(var u=[],i=[],o=0,a=O(n);a>o;o++){var c=n[o],f=r?r(c,o,n):c;t?(o&&i===f||u.push(c),i=f):r?m.contains(i,f)||(i.push(f),u.push(c)):m.contains(u,c)||u.push(c)}return u},m.union=function(){return m.uniq(S(arguments,!0,!0))},m.intersection=function(n){for(var t=[],r=arguments.length,e=0,u=O(n);u>e;e++){var i=n[e];if(!m.contains(t,i)){for(var o=1;r>o&&m.contains(arguments[o],i);o++);o===r&&t.push(i)}}return t},m.difference=function(n){var t=S(arguments,!0,!0,1);return m.filter(n,function(n){return!m.contains(t,n)})},m.zip=function(){return m.unzip(arguments)},m.unzip=function(n){for(var t=n&&m.max(n,O).length||0,r=Array(t),e=0;t>e;e++)r[e]=m.pluck(n,e);return r},m.object=function(n,t){for(var r={},e=0,u=O(n);u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},m.findIndex=t(1),m.findLastIndex=t(-1),m.sortedIndex=function(n,t,r,e){r=x(r,e,1);for(var u=r(t),i=0,o=O(n);o>i;){var a=Math.floor((i+o)/2);r(n[a])<u?i=a+1:o=a}return i},m.indexOf=r(1,m.findIndex,m.sortedIndex),m.lastIndexOf=r(-1,m.findLastIndex),m.range=function(n,t,r){null==t&&(t=n||0,n=0),r=r||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=Array(e),i=0;e>i;i++,n+=r)u[i]=n;return u};var E=function(n,t,r,e,u){if(!(e instanceof t))return n.apply(r,u);var i=j(n.prototype),o=n.apply(i,u);return m.isObject(o)?o:i};m.bind=function(n,t){if(g&&n.bind===g)return g.apply(n,l.call(arguments,1));if(!m.isFunction(n))throw new TypeError("Bind must be called on a function");var r=l.call(arguments,2),e=function(){return E(n,e,t,this,r.concat(l.call(arguments)))};return e},m.partial=function(n){var t=l.call(arguments,1),r=function(){for(var e=0,u=t.length,i=Array(u),o=0;u>o;o++)i[o]=t[o]===m?arguments[e++]:t[o];for(;e<arguments.length;)i.push(arguments[e++]);return E(n,r,this,this,i)};return r},m.bindAll=function(n){var t,r,e=arguments.length;if(1>=e)throw new Error("bindAll must be passed function names");for(t=1;e>t;t++)r=arguments[t],n[r]=m.bind(n[r],n);return n},m.memoize=function(n,t){var r=function(e){var u=r.cache,i=""+(t?t.apply(this,arguments):e);return m.has(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return r.cache={},r},m.delay=function(n,t){var r=l.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},m.defer=m.partial(m.delay,m,1),m.throttle=function(n,t,r){var e,u,i,o=null,a=0;r||(r={});var c=function(){a=r.leading===!1?0:m.now(),o=null,i=n.apply(e,u),o||(e=u=null)};return function(){var f=m.now();a||r.leading!==!1||(a=f);var l=t-(f-a);return e=this,u=arguments,0>=l||l>t?(o&&(clearTimeout(o),o=null),a=f,i=n.apply(e,u),o||(e=u=null)):o||r.trailing===!1||(o=setTimeout(c,l)),i}},m.debounce=function(n,t,r){var e,u,i,o,a,c=function(){var f=m.now()-o;t>f&&f>=0?e=setTimeout(c,t-f):(e=null,r||(a=n.apply(i,u),e||(i=u=null)))};return function(){i=this,u=arguments,o=m.now();var f=r&&!e;return e||(e=setTimeout(c,t)),f&&(a=n.apply(i,u),i=u=null),a}},m.wrap=function(n,t){return m.partial(t,n)},m.negate=function(n){return function(){return!n.apply(this,arguments)}},m.compose=function(){var n=arguments,t=n.length-1;return function(){for(var r=t,e=n[t].apply(this,arguments);r--;)e=n[r].call(this,e);return e}},m.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},m.before=function(n,t){var r;return function(){return--n>0&&(r=t.apply(this,arguments)),1>=n&&(t=null),r}},m.once=m.partial(m.before,2);var M=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];m.keys=function(n){if(!m.isObject(n))return[];if(v)return v(n);var t=[];for(var r in n)m.has(n,r)&&t.push(r);return M&&e(n,t),t},m.allKeys=function(n){if(!m.isObject(n))return[];var t=[];for(var r in n)t.push(r);return M&&e(n,t),t},m.values=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},m.mapObject=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=u.length,o={},a=0;i>a;a++)e=u[a],o[e]=t(n[e],e,n);return o},m.pairs=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},m.invert=function(n){for(var t={},r=m.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},m.functions=m.methods=function(n){var t=[];for(var r in n)m.isFunction(n[r])&&t.push(r);return t.sort()},m.extend=_(m.allKeys),m.extendOwn=m.assign=_(m.keys),m.findKey=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=0,o=u.length;o>i;i++)if(e=u[i],t(n[e],e,n))return e},m.pick=function(n,t,r){var e,u,i={},o=n;if(null==o)return i;m.isFunction(t)?(u=m.allKeys(o),e=b(t,r)):(u=S(arguments,!1,!1,1),e=function(n,t,r){return t in r},o=Object(o));for(var a=0,c=u.length;c>a;a++){var f=u[a],l=o[f];e(l,f,o)&&(i[f]=l)}return i},m.omit=function(n,t,r){if(m.isFunction(t))t=m.negate(t);else{var e=m.map(S(arguments,!1,!1,1),String);t=function(n,t){return!m.contains(e,t)}}return m.pick(n,t,r)},m.defaults=_(m.allKeys,!0),m.create=function(n,t){var r=j(n);return t&&m.extendOwn(r,t),r},m.clone=function(n){return m.isObject(n)?m.isArray(n)?n.slice():m.extend({},n):n},m.tap=function(n,t){return t(n),n},m.isMatch=function(n,t){var r=m.keys(t),e=r.length;if(null==n)return!e;for(var u=Object(n),i=0;e>i;i++){var o=r[i];if(t[o]!==u[o]||!(o in u))return!1}return!0};var N=function(n,t,r,e){if(n===t)return 0!==n||1/n===1/t;if(null==n||null==t)return n===t;n instanceof m&&(n=n._wrapped),t instanceof m&&(t=t._wrapped);var u=s.call(n);if(u!==s.call(t))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":return+n!==+n?+t!==+t:0===+n?1/+n===1/t:+n===+t;case"[object Date]":case"[object Boolean]":return+n===+t}var i="[object Array]"===u;if(!i){if("object"!=typeof n||"object"!=typeof t)return!1;var o=n.constructor,a=t.constructor;if(o!==a&&!(m.isFunction(o)&&o instanceof o&&m.isFunction(a)&&a instanceof a)&&"constructor"in n&&"constructor"in t)return!1}r=r||[],e=e||[];for(var c=r.length;c--;)if(r[c]===n)return e[c]===t;if(r.push(n),e.push(t),i){if(c=n.length,c!==t.length)return!1;for(;c--;)if(!N(n[c],t[c],r,e))return!1}else{var f,l=m.keys(n);if(c=l.length,m.keys(t).length!==c)return!1;for(;c--;)if(f=l[c],!m.has(t,f)||!N(n[f],t[f],r,e))return!1}return r.pop(),e.pop(),!0};m.isEqual=function(n,t){return N(n,t)},m.isEmpty=function(n){return null==n?!0:k(n)&&(m.isArray(n)||m.isString(n)||m.isArguments(n))?0===n.length:0===m.keys(n).length},m.isElement=function(n){return!(!n||1!==n.nodeType)},m.isArray=h||function(n){return"[object Array]"===s.call(n)},m.isObject=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},m.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(n){m["is"+n]=function(t){return s.call(t)==="[object "+n+"]"}}),m.isArguments(arguments)||(m.isArguments=function(n){return m.has(n,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(m.isFunction=function(n){return"function"==typeof n||!1}),m.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},m.isNaN=function(n){return m.isNumber(n)&&n!==+n},m.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"===s.call(n)},m.isNull=function(n){return null===n},m.isUndefined=function(n){return n===void 0},m.has=function(n,t){return null!=n&&p.call(n,t)},m.noConflict=function(){return u._=i,this},m.identity=function(n){return n},m.constant=function(n){return function(){return n}},m.noop=function(){},m.property=w,m.propertyOf=function(n){return null==n?function(){}:function(t){return n[t]}},m.matcher=m.matches=function(n){return n=m.extendOwn({},n),function(t){return m.isMatch(t,n)}},m.times=function(n,t,r){var e=Array(Math.max(0,n));t=b(t,r,1);for(var u=0;n>u;u++)e[u]=t(u);return e},m.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},m.now=Date.now||function(){return(new Date).getTime()};var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},T=m.invert(B),R=function(n){var t=function(t){return n[t]},r="(?:"+m.keys(n).join("|")+")",e=RegExp(r),u=RegExp(r,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,t):n}};m.escape=R(B),m.unescape=R(T),m.result=function(n,t,r){var e=null==n?void 0:n[t];return e===void 0&&(e=r),m.isFunction(e)?e.call(n):e};var q=0;m.uniqueId=function(n){var t=++q+"";return n?n+t:t},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var K=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\u2028|\u2029/g,L=function(n){return"\\"+z[n]};m.template=function(n,t,r){!t&&r&&(t=r),t=m.defaults({},t,m.templateSettings);var e=RegExp([(t.escape||K).source,(t.interpolate||K).source,(t.evaluate||K).source].join("|")+"|$","g"),u=0,i="__p+='";n.replace(e,function(t,r,e,o,a){return i+=n.slice(u,a).replace(D,L),u=a+t.length,r?i+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":e?i+="'+\n((__t=("+e+"))==null?'':__t)+\n'":o&&(i+="';\n"+o+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var o=new Function(t.variable||"obj","_",i)}catch(a){throw a.source=i,a}var c=function(n){return o.call(this,n,m)},f=t.variable||"obj";return c.source="function("+f+"){\n"+i+"}",c},m.chain=function(n){var t=m(n);return t._chain=!0,t};var P=function(n,t){return n._chain?m(t).chain():t};m.mixin=function(n){m.each(m.functions(n),function(t){var r=m[t]=n[t];m.prototype[t]=function(){var n=[this._wrapped];return f.apply(n,arguments),P(this,r.apply(m,n))}})},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=o[n];m.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==n&&"splice"!==n||0!==r.length||delete r[0],P(this,r)}}),m.each(["concat","join","slice"],function(n){var t=o[n];m.prototype[n]=function(){return P(this,t.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return m})}).call(this);

},{}]},{},[14])(14)
});
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9ncnVudC1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvYmluaGVhcC9iaW5oZWFwLmpzIiwibm9kZV9tb2R1bGVzL2ZhYnJpY28vZGlzdC9kYXRhL25hbWVzL3JvbWFuLW5hbWUuanMiLCJub2RlX21vZHVsZXMvZmFicmljby9kaXN0L2ZhYnJpY28uanMiLCJub2RlX21vZHVsZXMvZmFicmljby9kaXN0L2ZhbnRhc3kuanMiLCJub2RlX21vZHVsZXMvZmFicmljby9kaXN0L21hcmtvdi1jaGFpbi1zb3VyY2UuanMiLCJub2RlX21vZHVsZXMvZmFicmljby9ub2RlX21vZHVsZXMvZGVmaW5pdGVseS1yYW5kb20tZGF0YS9kaXN0L2RyZC5qcyIsIm5vZGVfbW9kdWxlcy9mYWJyaWNvL25vZGVfbW9kdWxlcy9kZWZpbml0ZWx5LXJhbmRvbS1kYXRhL25vZGVfbW9kdWxlcy9zZWVkcmFuZG9tL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2ZhYnJpY28vbm9kZV9tb2R1bGVzL2RlZmluaXRlbHktcmFuZG9tLWRhdGEvbm9kZV9tb2R1bGVzL3NlZWRyYW5kb20vc2VlZHJhbmRvbS5qcyIsIm5vZGVfbW9kdWxlcy9ncnVudC1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L2xpYi9fZW1wdHkuanMiLCJub2RlX21vZHVsZXMvZ3J1bnQtYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvaW5oZXJpdHMvaW5oZXJpdHNfYnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy9ncnVudC1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvZ3J1bnQtYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvdXRpbC9zdXBwb3J0L2lzQnVmZmVyQnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy9ncnVudC1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy91dGlsL3V0aWwuanMiLCJzcmMvYXBwLmpzIiwic3JjL21hcHMvYXN0YXIuanMiLCJzcmMvbWFwcy9jaXR5LmpzIiwic3JjL21hcHMvdGVycmFpbm1hcC5qcyIsInNyYy91bmRlcnNjb3JlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0TEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDemhCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xQQTs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUMxa0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9GQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEwLjBcblxuLypcblxuICBUeWxlciBBbmRlcnNvbiAyMDExLTIwMTVcbiAqL1xuXG4oZnVuY3Rpb24oKSB7XG4gIHZhciBCaW5hcnlIZWFwO1xuXG4gIEJpbmFyeUhlYXAgPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gQmluYXJ5SGVhcChzY29yZV9mdW5jKSB7XG4gICAgICB0aGlzLmhlYXAgPSBbXTtcbiAgICAgIHRoaXMuc2NvcmVGdW5jdGlvbiA9IHNjb3JlX2Z1bmM7XG4gICAgfVxuXG4gICAgQmluYXJ5SGVhcC5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgIHRoaXMuaGVhcC5wdXNoKGVsZW1lbnQpO1xuICAgICAgdGhpcy5zaW5rRG93bih0aGlzLmhlYXAubGVuZ3RoIC0gMSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgQmluYXJ5SGVhcC5wcm90b3R5cGUucG9wID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgZW5kLCByZXN1bHQ7XG4gICAgICByZXN1bHQgPSB0aGlzLmhlYXBbMF07XG4gICAgICBlbmQgPSB0aGlzLmhlYXAucG9wKCk7XG4gICAgICBpZiAodGhpcy5oZWFwLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdGhpcy5oZWFwWzBdID0gZW5kO1xuICAgICAgICB0aGlzLmJ1YmJsZVVwKDApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuXG4gICAgQmluYXJ5SGVhcC5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24obm9kZSkge1xuICAgICAgdmFyIGVuZCwgaTtcbiAgICAgIGkgPSB0aGlzLmhlYXAuaW5kZXhPZihub2RlKTtcbiAgICAgIGVuZCA9IHRoaXMuaGVhcC5wb3AoKTtcbiAgICAgIGlmIChpICE9PSB0aGlzLmhlYXAubGVuZ3RoIC0gMSkge1xuICAgICAgICB0aGlzLmhlYXBbaV0gPSBlbmQ7XG4gICAgICAgIGlmICh0aGlzLnNjb3JlRnVuY3Rpb24oZW5kKSA8IHRoaXMuc2NvcmVGdW5jdGlvbihub2RlKSkge1xuICAgICAgICAgIHRoaXMuc2lua0Rvd24oaSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5idWJibGVVcChpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIEJpbmFyeUhlYXAucHJvdG90eXBlLnNpemUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmhlYXAubGVuZ3RoO1xuICAgIH07XG5cbiAgICBCaW5hcnlIZWFwLnByb3RvdHlwZS5yZXNjb3JlRWxlbWVudCA9IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIHJldHVybiB0aGlzLnNpbmtEb3duKHRoaXMuaGVhcC5pbmRleE9mKG5vZGUpKTtcbiAgICB9O1xuXG4gICAgQmluYXJ5SGVhcC5wcm90b3R5cGUuc2lua0Rvd24gPSBmdW5jdGlvbihuKSB7XG4gICAgICB2YXIgZWxlbWVudCwgcGFyZW50LCBwYXJlbnROO1xuICAgICAgZWxlbWVudCA9IHRoaXMuaGVhcFtuXTtcbiAgICAgIHdoaWxlIChuID4gMCkge1xuICAgICAgICBwYXJlbnROID0gKChuICsgMSkgPj4gMSkgLSAxO1xuICAgICAgICBwYXJlbnQgPSB0aGlzLmhlYXBbcGFyZW50Tl07XG4gICAgICAgIGlmICh0aGlzLnNjb3JlRnVuY3Rpb24oZWxlbWVudCkgPCB0aGlzLnNjb3JlRnVuY3Rpb24ocGFyZW50KSkge1xuICAgICAgICAgIHRoaXMuaGVhcFtwYXJlbnROXSA9IGVsZW1lbnQ7XG4gICAgICAgICAgdGhpcy5oZWFwW25dID0gcGFyZW50O1xuICAgICAgICAgIG4gPSBwYXJlbnROO1xuICAgICAgICAgIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG5cbiAgICBCaW5hcnlIZWFwLnByb3RvdHlwZS5idWJibGVVcCA9IGZ1bmN0aW9uKG4pIHtcbiAgICAgIHZhciBjaGlsZDEsIGNoaWxkMU4sIGNoaWxkMVNjb3JlLCBjaGlsZDIsIGNoaWxkMk4sIGNoaWxkMlNjb3JlLCBlbGVtU2NvcmUsIGVsZW1lbnQsIGxlbmd0aCwgc3dhcDtcbiAgICAgIGxlbmd0aCA9IHRoaXMuaGVhcC5sZW5ndGg7XG4gICAgICBlbGVtZW50ID0gdGhpcy5oZWFwW25dO1xuICAgICAgZWxlbVNjb3JlID0gdGhpcy5zY29yZUZ1bmN0aW9uKGVsZW1lbnQpO1xuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgY2hpbGQyTiA9IChuICsgMSkgPDwgMTtcbiAgICAgICAgY2hpbGQxTiA9IGNoaWxkMk4gLSAxO1xuICAgICAgICBzd2FwID0gbnVsbDtcbiAgICAgICAgaWYgKGNoaWxkMU4gPCBsZW5ndGgpIHtcbiAgICAgICAgICBjaGlsZDEgPSB0aGlzLmhlYXBbY2hpbGQxTl07XG4gICAgICAgICAgY2hpbGQxU2NvcmUgPSB0aGlzLnNjb3JlRnVuY3Rpb24oY2hpbGQxKTtcbiAgICAgICAgICBpZiAoY2hpbGQxU2NvcmUgPCBlbGVtU2NvcmUpIHtcbiAgICAgICAgICAgIHN3YXAgPSBjaGlsZDFOO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hpbGQyTiA8IGxlbmd0aCkge1xuICAgICAgICAgIGNoaWxkMiA9IHRoaXMuaGVhcFtjaGlsZDJOXTtcbiAgICAgICAgICBjaGlsZDJTY29yZSA9IHRoaXMuc2NvcmVGdW5jdGlvbihjaGlsZDIpO1xuICAgICAgICAgIGlmIChjaGlsZDJTY29yZSA8IChzd2FwID09PSBudWxsID8gZWxlbVNjb3JlIDogY2hpbGQxU2NvcmUpKSB7XG4gICAgICAgICAgICBzd2FwID0gY2hpbGQyTjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN3YXAgIT09IG51bGwpIHtcbiAgICAgICAgICB0aGlzLmhlYXBbbl0gPSB0aGlzLmhlYXBbc3dhcF07XG4gICAgICAgICAgdGhpcy5oZWFwW3N3YXBdID0gZWxlbWVudDtcbiAgICAgICAgICBuID0gc3dhcDtcbiAgICAgICAgICB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEJpbmFyeUhlYXA7XG5cbiAgfSkoKTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHNjb3JlX2Z1bmN0aW9uKSB7XG4gICAgcmV0dXJuIG5ldyBCaW5hcnlIZWFwKHNjb3JlX2Z1bmN0aW9uKTtcbiAgfTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuLy9Gcm9tIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xpc3Rfb2ZfYW5jaWVudF9Sb21hbnNcblxudmFyIG5hbWVzID0gWydUaXR1cyBBY2NpdScsICdHYWl1cyBBY2lsaXUnLCAnQ2xhdWRpYSBBY3QnLCAnQ2xhdWRpdXMgQWVsaWFudScsICdTZXh0dXMgQWVsaXUnLCAnUGFldHVzIENhdHUnLCAnTHVjaXVzIEFlbGl1JywgJ0FlbWlsaWEgU2NhdXInLCAnTWFyY3VzIEFlbWlsaXUnLCAnRmxhdml1cyBBZXRpdScsICdHbmFldXMgRG9taXRpdScsICdMdWNpdXMgQWZyYW5pdScsICdKdWxpdXMgQWZyaWNhbnUnLCAnU2V4dHVzIENhZWNpbGl1JywgJ0NsYXVkaXVzIEFnYXRoaW51JywgJ0duYWV1cyBKdWxpdScsICdTZXh0dXMgQ2FscHVybml1JywgJ01hcmN1cyBKdWxpdScsICdNYXJjdXMgQWdyaXBwJywgJ01hcmN1cyBQb3N0dW11JywgJ1ZpcHNhbmlhIEFncmlwcGluJywgJ0FncmlwcGluYSBNYWpvJywgJ0FncmlwcGluYSBNaW5vJywgJ0dhaXVzIFNlcnZpbGl1JywgJ0FoZW5vYmFyYnVzJywgJ0FpdXMgTG9jdXRpdScsICdBbGJpbm92YW51cyBQZWQnLCAnVGl0dXMgQWxidWNpdScsICdHYWl1cyBTaWx1JywgJ0FsZmVudXMgVmFydScsICdBbGZpdXMgQXZpdHUnLCAnQWxsZWN0dXMnLCAnR2FpdXMgQW1hZmluaXUnLCAnTHVjaXVzIEFtYml2aXUnLCAnQW1lbGl1cyBHZW50aWxpYW51JywgJ0FtbWlhbnVzIE1hcmNlbGxpbnUnLCAnTHVjaXVzIEFtcGVsaXUnLCAnR2FpdXMgQW50aXN0aXUnLCAnTHVjaXVzIEFudGlzdGl1JywgJ0FudG9uaWEnLCAnQW50b25pbnVzIFBpdScsICdBcnJpdXMgQW50b25pbnUnLCAnQW50b25pbnVzIExpYmVyYWxpJywgJ0dhaXVzIEFudG9uaXUnLCAnSXVsbHVzIEFudG9uaXUnLCAnTHVjaXVzIEFudG9uaXUnLCAnTWFyY3VzIEFudG9uaXUnLCAnTWFyY3VzIE9yYXRvJywgJ01hcmN1cyBDcmV0aWN1JywgJ01hcmsgQW50b24nLCAnTWFyY3VzIEFudHlsbHUnLCAnQW50b25pdXMgQ2FzdG8nLCAnQW50b25pdXMgTXVzJywgJ0FudG9uaXVzIERpb2dlbmUnLCAnTWFyY3VzIEFwZScsICdBZWxpdXMgRmVzdHUnLCAnQXBpY2l1cycsICdMdWNpdXMgQXByb25pdScsICdQb250aXVzIEFxdWlsJywgJ1JvbWFudXMgQXF1aWwnLCAnTWFuaXVzIEFxdWlsbGl1JywgJ0dhaXVzIEdhbGx1JywgJ0ZsYXZpdXMgQXJjYWRpdScsICdBdWx1cyBBcmNoaWEnLCAnQXJlbGxpdXMgRnVzY3UnLCAnQXJyaWEgTWFqbycsICdBcnJpYSBNaW5vJywgJ0ZsYXZpdXMgQXJyaWFudScsICdMdWNpdXMgQXJydW50aXUnLCAnTHVjaXVzIEFycnVudGl1cycsICdBcnJ1bnRpdXMgQ2Vsc3UnLCAnTHVjaXVzIEFydG9yaXUnLCAnUXVpbnR1cyBKdW5pdScsICdBcnVzaWFudXMgTWVzc2l1JywgJ1F1aW50dXMgQXNjb25pdScsICdTZW1wcm9uaXVzIEFzZWxsaScsICdBZW1pbGl1cyBBc3BlJywgJ05vbml1cyBBc3ByZW5hJywgJ0x1Y2l1cyBQaGlsb2xvZ3UnLCAnQXRpYScsICdBdWx1cyBBdGlsaXUnLCAnQXVsdXMgQXRpbGl1JywgJ01hcmN1cyBBdGlsaXUnLCAnQXRpbGl1cyBGb3J0dW5hdGlhbnUnLCAnVGl0dXMgUXVpbmN0aXUnLCAnUHVibGl1cyBBY2lsaXUnLCAnQ2FlY2lsaWEgQXR0aWMnLCAnVGl0dXMgUG9tcG9uaXUnLCAnSnVsaXVzIEF0dGljdScsICdBdWZpZGl1cyBCYXNzdScsICdHbmFldXMgQXVmaWRpdScsICdTZW50aXVzIEF1Z3VyaW51JywgJ0F1Z3VzdHVzJywgJ0F1cmVsaWEnLCAnTHVjaXVzIERvbWl0aXUnLCAnTWFyY3VzIEF1cmVsaXUnLCAnTWFyY3VzIEFudG9uaW51JywgJ1NleHR1cyBWaWN0bycsICdBdXJlb2x1cycsICdEZWNpbXVzIE1hZ251JywgJ1B1YmxpdXMgUGFldHUnLCAnVGl0dXMgQXZpZGl1JywgJ0dhaXVzIEF2aWRpdScsICdHYWl1cyBDYXNzaXUnLCAnQXZpZW51cycsICdHbmFldXMgQmFlYml1JywgJ01hcmN1cyBCYWViaXUnLCAnUXVpbnR1cyBCYWViaXVzJywgJ1RpYmVyaXVzIENsYXVkaXVzJywgJ0RlY2l1cyBDYWVsaXVzJywgJ01hcmN1cyBBdGl1cycsICdUaXR1cyBBbXBpdXMnLCAnTHVjaXVzIENvcm5lbGl1cycsICdCYWxidXMnLCAnQmFsaXN0YScsICdRdWludHVzIE1hcmNpdXMnLCAnUXVpbnR1cyBDYWVjaWxpdXMnLCAnQ2Flc2l1cyBCYXNzdScsICdTYWxlaXVzIEJhc3N1JywgJ0Jhdml1cycsICdCZWxpc2FyaXVzJywgJ0x1Y2l1cyBDYWxwdXJuaXVzJywgJ01hcmN1cyBGdXJpdXMnLCAnTWFyY3VzIENhbHB1cm5pdXMnLCAnUXVpbnR1cyBKdW5pdXMnLCAnR2FpdXMgQmxvc3NpdScsICdBbmljaXVzIE1hbmxpdXMnLCAnVmV0dGl1cyBCb2xhbnUnLCAnQm9uaWZhY2l1cycsICdCb25vc3VzJywgJ1RpYmVyaXVzIENsYXVkaXVzJywgJ0JydXR0aWRpdXMgTmlnZScsICdMdWNpdXMgSnVuaXVzJywgJ0RlY2ltdXMgSnVuaXVzJywgJ0RlY2ltdXMgSnVuaXVzJywgJ0x1Y2l1cyBKdW5pdXMnLCAnQnJ1dHVzJywgJ1NleHR1cyBBZnJhbml1cycsICdDYWVjaWxpdXMgb2YnLCAnR2FpdXMgQ2FlY2lsaXVzJywgJ0NhZWNpbHVzIFN0YXRpdScsICdRdWludHVzIENhZWNpbGl1cycsICdMdWNpdXMgQ2FlY2lsaXVzJywgJ0F1bHVzIENhZWNpbicsICdBdWx1cyBDYWVjaW5hJywgJ0F1bHVzIENhZWNpbmEnLCAnTWFyY3VzIENhZWxpdXMnLCAnUXVpbnR1cyBTZXJ2aWxpdXMnLCAnRmFubml1cyBDYWVwaScsICdHYWl1cyBKdWxpdXMnLCAnR2FpdXMgSnVsaXVzJywgJ0x1Y2l1cyBKdWxpdXMnLCAnU2V4dHVzIEp1bGl1cycsICdHYWl1cyBDYWVzYScsICdMdWNpdXMgQ2Flc2EnLCAnTWFyY3VzIENhbGlkaXUnLCAnR2FpdXMgSnVsaXVzJywgJ0NhbHB1cm5pYScsICdUaXR1cyBDYWxwdXJuaXVzJywgJ0NhbHB1cm5pdXMgRmxhY2N1JywgJ0dhaXVzIFNleHRpdXMnLCAnR25hZXVzIERvbWl0aXVzJywgJ0duYWV1cyBEb21pdGl1cycsICdHYWl1cyBDYWx2aXNpdXMnLCAnR2FpdXMgTGljaW5pdXMnLCAnTWFyY3VzIEZ1cml1cycsICdMdWNpdXMgRnVyaXVzJywgJ1B1YmxpdXMgQ2FuaWRpdXMnLCAnR2FpdXMgQ2FuaW5pdXMnLCAnQ2FuaW5pdXMgUnVmdScsICdDYW5pdXMgUnVmdScsICdHYWl1cyBDYW51bGVpdScsICdGbGF2aXVzIENhcGUnLCAnR2FpdXMgQXRlaXVzJywgJ01hcmN1cyBBdXJlbGl1cycsICdHYWl1cyBQYXBpcml1cycsICdHbmFldXMgUGFwaXJpdXMnLCAnR2FpdXMgUGFwaXJpdXMnLCAnTWFyY3VzIEF1cmVsaXVzJywgJ0dhaXVzIENhcnJpbnUnLCAnTWFyY3VzIEF1cmVsaXVzJywgJ1NwdXJpdXMgQ2FydmlsaXVzJywgJ1NwdXJpdXMgQ2FydmlsaXVzJywgJ1NlcnZpbGl1cyBDYXNjJywgJ0Nhc3Npb2RvcnVzJywgJ1NwdXJpdXMgQ2Fzc2l1cycsICdMdWNpdXMgQ2Fzc2l1cycsICdMdWNpdXMgQ2Fzc2l1cycsICdRdWludHVzIENhc3NpdXMnLCAnR2FpdXMgQ2Fzc2l1cycsICdMdWNpdXMgQ2Fzc2l1cycsICdDYXNzaXVzIFBhcm1lbnNpJywgJ0Nhc3NpdXMgU2V2ZXJ1JywgJ0Nhc3NpdXMgQ2hhZXJlJywgJ0x1Y2l1cyBTZXJnaXVzJywgJ1RpdHVzIENhdGl1JywgJ0NhdG8nLCAnR2FpdXMgUG9yY2l1cycsICdMdWNpdXMgUG9yY2l1cycsICdDYXR1bGx1cycsICdHYWl1cyBMdXRhdGl1cycsICdRdWludHVzIEx1dGF0aXVzJywgJ0NlbHN1cyBBbGJpbm92YW51JywgJ0F1bHVzIENvcm5lbGl1cycsICdQdWJsaXVzIEp1dmVudGl1cycsICdDZW5zb3JpbnVzJywgJ1F1aW50dXMgUGV0ZWxsaXVzJywgJ0dhaXVzIENlc3RpdXMnLCAnR2FpdXMgQ2VzdGl1cycsICdMdWNpdXMgQ2VzdGl1cycsICdQdWJsaXVzIENvcm5lbGl1cycsICdGbGF2aXVzIFNvc2lwYXRlcicsICdMdWNpdXMgQ29ybmVsaXVzJywgJ01hcmN1cyBUdWxsaXVzJywgJ1F1aW50dXMgVHVsbGl1cycsICdMdWNpdXMgRmFiaXVzJywgJ0x1Y2l1cyBRdWluY3RpdXMnLCAnTHVjaXVzIENpbmNpdXMnLCAnTHVjaXVzIENvcm5lbGl1cycsICdHYWl1cyBIZWx2aXVzJywgJ0duYWV1cyBDb3JuZWxpdXMnLCAnR2FpdXMgSnVsaXVzJywgJ0dhaXVzIEp1bGl1cycsICdKdWxpdXMgQ2xhc3NpY3UnLCAnQ2xhdWRpdXMgQ2xhdWRpYW51JywgJ0NsYXVkaXVzJywgJ0NsYXVkaWEgUHJvY3VsJywgJ0NsYXVkaXVzIElJJywgJ0FwcGl1cyBDbGF1ZGl1JywgJ0FwcGl1cyBDbGF1ZGl1cycsICdBcHBpdXMgQ2xhdWRpdXMnLCAnUHVibGl1cyBDbGF1ZGl1cycsICdRdWludHVzIENsYXVkaXUnLCAnR2FpdXMgQ2xhdWRpdXMnLCAnQXBwaXVzIENsYXVkaXVzJywgJ01hcmN1cyBDbGF1ZGl1cycsICdRdWludHVzIENsYXVkaXVzJywgJ1RpYmVyaXVzIENsYXVkaXUnLCAnQ2xhdWRpdXMgRXRydXNjdScsICdUaWJlcml1cyBDbGF1ZGl1cycsICdDbGF1ZGl1cyBNYW1lcnRpbnUnLCAnVGl0dXMgRmxhdml1cycsICdDbG9kaWEnLCAnQ2xvZGl1cyBBZXNvcHUnLCAnUHVibGl1cyBDbG9kaXVzJywgJ0x1Y2l1cyBDbG9kaXVzJywgJ1B1YmxpdXMgQ2xvZGl1cycsICdEZWNpbXVzIENsb2RpdXMnLCAnQ2xvZWxpYScsICdBdWx1cyBDbHVlbnRpdXMnLCAnTHVjaXVzIENvZWxpdXMnLCAnR2FpdXMgQ29lbGl1cycsICdMdWNpdXMgSnVuaXVzJywgJ0NvbWluaWFudXMnLCAnQ29tbW9kaWFudXMnLCAnTHVjaXVzIEFlbGl1cycsICdDb25zdGFucycsICdGbGF2aXVzIFZhbGVyaXVzJywgJ0NvbnN0YW50aW5lIEknLCAnRmxhdml1cyBDbGF1ZGl1cycsICdGbGF2aXVzIFZhbGVyaXVzJywgJ0NvbnN0YW50aXVzIEknLCAnQ29uc3RhbnRpdXMgSUknLCAnR25hZXVzIE1hcmNpdXMnLCAnQ29ybmVsaWEgQWZyaWNhbicsICdDb3JuZWxpYScsICdDb3JuZWxpYSBNZXRlbGwnLCAnR2FpdXMgQ29ybmVsaXUnLCAnQ29ybmVsaXVzIFNldmVydScsICdMdWNpdXMgQ29ybmlmaWNpdScsICdRdWludHVzIENvcm5pZmljaXUnLCAnTHVjaXVzIEFubmFldXMnLCAnR2FpdXMgSnVsaXVzJywgJ0dhaXVzIENvcnVuY2FuaXUnLCAnTHVjaXVzIENvcnVuY2FuaXUnLCAnVGliZXJpdXMgQ29ydW5jYW5pdScsICdUaXR1cyBTdGF0aWxpdXMnLCAnUXVpbnR1cyBDb25jb25pdScsICdBdWx1cyBDb3JuZWxpdXMnLCAnR2FpdXMgQXVyZWxpdXMnLCAnTHVjaXVzIEF1cmVsaXVzJywgJ01hcmN1cyBBdXJlbGl1cycsICdNYXJjdXMgSnVsaXVzJywgJ0dhaXVzIENhbHB1cm5pdXMnLCAnUHVibGl1cyBMaWNpbml1cycsICdMdWNpdXMgTGljaW5pdXMnLCAnTWFyY3VzIExpY2luaXVzJywgJ1B1YmxpdXMgTGljaW5pdXMnLCAnQXVsdXMgQ3JlbXV0aXVzJywgJ1F1aW50dXMgVGVyZW50aXVzJywgJ0N1cmlhdGl1cyBNYXRlcm51JywgJ01hcmN1cyBDdXJ0aXUnLCAnQ3VydGl1cyBNb250YW51JywgJ1RoYXNjaXVzIENhZWNpbGl1cycsICdEYW1vcGhpbHVzJywgJ0x1Y2l1cyBEZWNpZGl1cycsICdHYWl1cyBNZXNzaXVzJywgJ1B1YmxpdXMgRGVjaXVzJywgJ1B1YmxpdXMgRGVjaXVzJywgJ1F1aW50dXMgRGVsbGl1JywgJ1NlbXByb25pdXMgRGVuc3UnLCAnTHVjaXVzIFNpY2NpdXMnLCAnTWFuaXVzIEN1cml1cycsICdQdWJsaXVzIEhlcmVubml1cycsICdMdWNpdXMgUG9sbGVudGl1cycsICdUaXR1cyBEaWRpdScsICdNYXJjdXMgRGlkaXVzJywgJ0RpbyBDYXNzaXUnLCAnR2FpdXMgQXVyZWxpdXMnLCAnRGlvc2NvcmlkZXMgUGVkYW5pdScsICdHbmFldXMgQ29ybmVsaXVzJywgJ1B1YmxpdXMgQ29ybmVsaXVzJywgJ1RpdHVzIEZsYXZpdXMnLCAnRmxhdmlhIERvbWl0aWxsJywgJ0duYWV1cyBEb21pdGl1cycsICdMdWNpdXMgRG9taXRpdXMnLCAnRG9taXRpdXMgTWFyc3UnLCAnQWVsaXVzIERvbmF0dScsICdUaWJlcml1cyBDbGF1ZGl1cycsICdEb3JvdGhldXMnLCAnQmxvc3NpdXMgQWVtaWxpdXMnLCAnSnVsaWEgRHJ1c2lsbCcsICdKdWxpdXMgQ2Flc2FyJywgJ05lcm8gQ2xhdWRpdXMnLCAnTWFyY3VzIExpdml1cycsICdNYXJjdXMgTGl2aXVzJywgJ0dhaXVzIER1aWxpdScsICdNYXJjdXMgRWduYXRpdXMnLCAnRWxhZ2FiYWx1cycsICdTZXh0aWxpdXMgRW4nLCAnU2V2ZXJ1cyBTYW5jdHVzJywgJ1F1aW50dXMgRW5uaXUnLCAnTWFnbnVzIEZlbGl4JywgJ1RpdHVzIENsb2RpdXMnLCAnRXJvdGlhbicsICdTZXh0dXMgRXJ1Y2l1cycsICdGbGF2aXVzIEV1Z2VuaXUnLCAnRXVtZW5pdXMnLCAnRXVzZWJpdXMgb2YnLCAnRXV0cm9waXVzJywgJ0l1bGl1cyBFeHN1cGVyYW50aXUnLCAnRmFiaWFudXMgUGFwaXJpdScsICdNYXJjdXMgRmFiaXVzJywgJ1F1aW50dXMgRmFiaXVzJywgJ01hcmN1cyBGYWJpdXMnLCAnTHVjaXVzIEZhYml1cycsICdQYXVsbHVzIEZhYml1cycsICdRdWludHVzIEZhYml1cycsICdRdWludHVzIEZhYml1cycsICdRdWludHVzIEZhYml1cycsICdRdWludHVzIEZhYml1cycsICdRdWludHVzIEZhYml1cycsICdGYWJpdXMgUnVzdGljdScsICdHYWl1cyBGYWJyaWNpdXMnLCAnTWFyY3VzIEZhZGl1cycsICdHYWl1cyBGYW5uaXUnLCAnQW5uaWEgR2FsZXJpYScsICdNYXJjdXMgQ2V0aXVzJywgJ0V1bG9naXVzIEZhdm9uaXUnLCAnTWFyY3VzIEZhdm9uaXUnLCAnRmF2b3JpbnVzJywgJ01hcmN1cyBBbnRvbml1cycsICdGZW5lc3RlbGxhJywgJ1BvcmNpdXMgRmVzdHUnLCAnUnVmaXVzIEZlc3R1JywgJ1NleHR1cyBQb21wZWl1cycsICdHYWl1cyBGbGF2aXVzJywgJ0p1bGl1cyBGaXJtaWN1cycsICdBdWx1cyBBdmlsaXVzJywgJ1F1aW50dXMgRnVsdml1cycsICdMdWNpdXMgVmFsZXJpdXMnLCAnTWFyY3VzIEZ1bHZpdXMnLCAnVmVycml1cyBGbGFjY3UnLCAnTHVjaXVzIFF1aW5jdGl1cycsICdUaXR1cyBRdWluY3RpdXMnLCAnR2FpdXMgRmxhbWluaXUnLCAnR25hZXVzIEZsYXZpdScsICdGbGF2aXVzIEZlbGknLCAnVGl0dXMgRmxhdml1cycsICdNYXJjdXMgQW5uaXVzJywgJ0Zsb3J1cycsICdNYXJjdXMgRm9udGVpdScsICdTZXh0dXMgSnVsaXVzJywgJ01hcmN1cyBDb3JuZWxpdXMnLCAnUXVpbnR1cyBGdWZpdXMnLCAnRmFiaXVzIFBsYW5jaWFkZXMnLCAnRnVsdmlhJywgJ0dhaXVzIEZ1bmRhbml1JywgJ01pbmljaXVzIEZ1bmRhbnUnLCAnQXVsdXMgRnVyaXVzJywgJ0x1Y2l1cyBGdXJpdXMnLCAnQ29ybmVsaXVzIEZ1c2N1JywgJ0F1bHVzIEdhYmluaXUnLCAnR2FpdXMgSnVsaXVzJywgJ0dhaXVzJywgJ0dhaXVzIFN1bHBpY2l1cycsICdTZXJ2aXVzIFN1bHBpY2l1cycsICdQdWJsaXVzIFN1bHBpY2l1cycsICdHYWl1cyBHYWxlcml1cycsICdHYWxlcml1cyBUcmFjaGFsdScsICdQdWJsaXVzIExpY2luaXVzJywgJ0x1Y2l1cyBJdW5pdXMnLCAnQWVsaXVzIEdhbGx1JywgJ0FwcGl1cyBBbm5pdXMnLCAnR2FpdXMgQXNpbml1cycsICdHYWl1cyBDb3JuZWxpdXMnLCAnQXVsdXMgRGlkaXVzJywgJ0dhaXVzIEx1Y3JldGl1cycsICdHYWl1cyBTdWxwaWNpdXMnLCAnR2FsbHVzIENhZXNhJywgJ1F1aW50dXMgR2FyZ2lsaXVzJywgJ0dhdml1cyBCYXNzdScsICdHYXZpdXMgU2lsJywgJ0F1bHVzIEdlbGxpdScsICdHbmFldXMgR2VsbGl1JywgJ0x1Y2l1cyBHZWxsaXVzJywgJ0dlbWludXMnLCAnTHVjaXVzIEdlbnVjaXUnLCAnR2VybWFuaWN1cycsICdHZXNzaXVzIEZsb3J1JywgJ0hvc2lkaXVzIEdldCcsICdHbmFldXMgSG9zaWRpdXMnLCAnUHVibGl1cyBTZXB0aW1pdXMnLCAnTWFuaXVzIEFjaWxpdXMnLCAnR2FpdXMgU2VydmlsaXVzJywgJ0dsaXRpdXMgQXRpbGl1cycsICdNYXJjdXMgQW50b25pdXMnLCAnTWFyY3VzIEFudG9uaXVzJywgJ0dhaXVzIFNlbXByb25pdXMnLCAnVGliZXJpdXMgU2VtcHJvbml1cycsICdKdWxpdXMgR3JhZWNpbnUnLCAnR3Jhbml1cyBMaWNpbmlhbnUnLCAnRmxhdml1cyBHcmF0aWEnLCAnR3JhdHRpdXMnLCAnR3JpbGxpdXMnLCAnUHVibGl1cyBBZWxpdXMnLCAnUXVpbnR1cyBIYXRlcml1JywgJ0hlbHZpZGl1cyBQcmlzY3UnLCAnSGVyZW5uaXVzIEV0cnVzY3UnLCAnSGVyZW5uaXVzIE1vZGVzdGludScsICdIZXJlbm5pdXMgU2VuZWNpJywgJ0hlcm9kZXMgQXR0aWN1JywgJ0F1bHVzIEhpcnRpdScsICdIb25vcml1cycsICdIb3JhdGl1cyBDb2NsZScsICdRdWludHVzIEhvcmF0aXVzJywgJ1F1aW50dXMgSG9ydGVuc2l1JywgJ0hvc3RpbGlhbicsICdIb3N0aXVzJywgJ0h5Z2ludXMnLCAnR2FpdXMgSnVsaXVzJywgJ0x1Y2l1cyBJY2lsaXUnLCAnSXJlbmFldXMnLCAnSXNpZG9ydXMgSGlzcGFsZW5zaScsICdJc2lnb251cycsICdKYW51YXJpdXMgTmVwb3RpYW51JywgJ0phdm9sZW51cyBQcmlzY3UnLCAnSm9yZGFuZXMnLCAnRmxhdml1cyBKb3ZpYScsICdKdWJhJywgJ0p1Z3VydGhhJywgJ0p1bGlhJywgJ0p1bGlhJywgJ0p1bGlhZSBDYWVzYXJlJywgJ0p1bGlhIEZsYXZpJywgJ1ZpcHNhbmlhIEp1bGknLCAnSnVsaWEgQW50b25pJywgJ0p1bGlhIHRoZScsICdKdWxpYSBEb21uJywgJ0p1bGlhIE1hZXMnLCAnSnVsaWEgU29hZW1pYXMnLCAnSnVsaWEgQXZpdGEnLCAnRmxhdml1cyBDbGF1ZGl1cycsICdKdWxpYW51cyBTYWx2aXUnLCAnR2FpdXMgSnVsaXVzJywgJ0p1bGl1cyBDYWVzYScsICdMdWNpdXMgSnVsaXVzJywgJ0p1bGl1cyBDYW51JywgJ0p1bGl1cyBDZXJlYWxpJywgJ1NleHR1cyBKdWxpdXMnLCAnSnVsaXVzIE1vZGVzdHUnLCAnSnVsaXVzIFJvbWFudScsICdKdWxpdXMgVGlyJywgJ0p1bGl1cyBWYWxlcml1cycsICdHYWl1cyBKdWxpdXMnLCAnSnVuaXVzIENvbmd1JywgJ01hcmN1cyBKdW5pdXMnLCAnSnVuaXVzIE90aCcsICdKdXN0aW4gTWFydHknLCAnSnVzdGluaWFuIEknLCAnTWFyY3VzIEp1c3RpbmlhbnVzJywgJ0RlY2ltdXMgSXVuaXVzJywgJ0dhaXVzIFZldHRpdXMnLCAnTWFyY3VzIEp1dmVudGl1cycsICdBdHRpdXMgTGFiZScsICdDb3JuZWxpdXMgQW50aXN0aXVzJywgJ01hcmN1cyBBbnRpc3RpdXMnLCAnUXVpbnR1cyBMYWJpZW51JywgJ1RpdHVzIExhYmllbnUnLCAnTGFjdGFudGl1cycsICdMdWNpdXMgRnVyaXUnLCAnR2FpdXMgTGFlbGl1JywgJ0dhaXVzIExhZWxpdXMnLCAnTGFlbGl1cyBBcmNoZWxhdScsICdNYXJjdXMgVmFsZXJpdXMnLCAnTGFldml1cycsICdHYWl1cyBPY3Rhdml1cycsICdMYXJjaXVzIExpY2ludScsICdMYXRpbnVzJywgJ01hcmN1cyBUdWxsaXVzJywgJ1BvbXBlaXVzIExlbmFldScsICdHbmFldXMgQ29ybmVsaXVzJywgJ0x1Y2l1cyBDb3JuZWxpdXMnLCAnTHVjaXVzIENvcm5lbGl1cycsICdHbmFldXMgQ29ybmVsaXVzJywgJ0duYWV1cyBDb3JuZWxpdXMnLCAnUHVibGl1cyBDb3JuZWxpdXMnLCAnUHVibGl1cyBDb3JuZWxpdXMnLCAnTWFuaXVzIEFlbWlsaXVzJywgJ01hcmN1cyBBZW1pbGl1cycsICdMaWJhbml1cycsICdMaWNlbnRpdXMnLCAnVmFsZXJpdXMgTGljaW5pYW51cycsICdMaWNpbml1cyBJbWJyZScsICdRdWludHVzIExpZ2FyaXUnLCAnTGl2aWEgRHJ1c2lsbCcsICdMaXZpbGxhJywgJ0x1Y2l1cyBMaXZpdXMnLCAnVGl0dXMgTGl2aXUnLCAnTG9sbGlhIFBhdWxpbicsICdNYXJjdXMgTG9sbGl1JywgJ0xvbGxpdXMgQmFzc3UnLCAnTWFyY3VzIExvbGxpdXMnLCAnUXVpbnR1cyBMb2xsaXVzJywgJ01hcmN1cyBBbm5hZXVzJywgJ0x1Y2l1cyBMdWNjZWl1JywgJ0dhaXVzIEx1Y2lsaXUnLCAnR2FpdXMgTHVjaWxpdXMnLCAnTHVjaWxsYScsICdMdWNyZXRpYScsICdMdWNyZXRpdXMnLCAnU3B1cml1cyBMdWNyZXRpdXMnLCAnTHVjaXVzIExpY2luaXVzJywgJ01hcmN1cyBUZXJlbnRpdXMnLCAnTHVzY2l1cyBMYW51dmludScsICdNYXJjdXMgTHVyaXUnLCAnUXVpbnR1cyBMdXNpdXMnLCAnTHlnZGFtdXMnLCAnR2FpdXMgTGljaW5pdXMnLCAnR2FpdXMgTGljaW5pdXMnLCAnQWVtaWxpdXMgTWFjZScsICdUaXR1cyBGdWx2aXVzJywgJ01hcmN1cyBPcGVsbGl1cycsICdRdWludHVzIE5hZXZpdXMnLCAnTWFjcm9iaXVzIEFtYnJvc2l1cycsICdHYWl1cyBNYWVjZW5hJywgJ0x1Y2l1cyBWb2x1c2l1cycsICdTcHVyaXVzIE1hZWxpdScsICdHYWl1cyBNYWVuaXUnLCAnTWFldml1cycsICdGbGF2aXVzIE1hZ251cycsICdNYWdudXMgTWF4aW11JywgJ0p1bGl1cyBNYWpvcmlhJywgJ01hbGxpdXMgVGhlb2RvcnUnLCAnT2N0YXZpdXMgTWFtaWxpdXMnLCAnTHVjaXVzIE1hbWlsaXUnLCAnR2FpdXMgTWFtaWxpdXMnLCAnTWFtdXJyYScsICdHYWl1cyBIb3N0aWxpdXMnLCAnR2FpdXMgTWFuaWxpdScsICdNYW5pdXMgTWFuaWxpdScsICdNYXJjdXMgTWFuaWxpdScsICdNYXJjdXMgTWFubGl1JywgJ0dhaXVzIENsYXVkaXVzJywgJ0dhaXVzIENsYXVkaXVzJywgJ01hcmN1cyBDbGF1ZGl1cycsICdNYXJjdXMgUG9tcG9uaXVzJywgJ1VscGl1cyBNYXJjZWxsdScsICdNYXJjaWEnLCAnVWxwaWEgTWFyY2lhbicsICdBZWxpdXMgTWFyY2lhbnUnLCAnTWFyY2l1cycsICdBbmN1cyBNYXJjaXUnLCAnR2FpdXMgTWFyY2l1cycsICdNYXJjdXMgQWVtaWxpdXMnLCAnR2FpdXMgTWFyaXUnLCAnTWFyY3VzIE1hcml1cycsICdTZXh0dXMgTWFyaXUnLCAnTWFyaXVzIFByaXNjdScsICdNYXJpdXMgTWF4aW11JywgJ01hcmN1cyBWYWxlcml1cycsICdNYXJ1bGx1cycsICdTYWxvbmluYSBNYXRpZGknLCAnR2FpdXMgTWF0aXUnLCAnR25hZXVzIE1hdGl1JywgJ01hdm9ydGl1cycsICdNYXJjdXMgQXVyZWxpdXMnLCAnTWFyY3VzIEF1cmVsaXVzJywgJ0dhaXVzIEp1bGl1cycsICdHYWl1cyBHYWxlcml1cycsICdTZXh0dXMgUXVpbmN0aWxpdXMnLCAnUG9tcG9uaXVzIE1lbCcsICdMdWNpdXMgQW5uYWV1cycsICdBZWxpdXMgTWVsaXNzdScsICdHYWl1cyBNZWxpc3N1JywgJ0dhaXVzIE1lbW1pdScsICdBZ3JpcHBhIE1lbmVuaXVzJywgJ0ZsYXZpdXMgTWVyb2JhdWRlJywgJ0x1Y2l1cyBDb3JuZWxpdXMnLCAnTWFuaXVzIFZhbGVyaXVzJywgJ01hcmN1cyBWYWxlcml1cycsICdNYXJjdXMgVmFsZXJpdXMnLCAnTWFyY3VzIFZhbGVyaXVzJywgJ1ZpcHN0YW51cyBNZXNzYWwnLCAnU3RhdGlsaWEgTWVzc2FsaW4nLCAnVmFsZXJpYSBNZXNzYWxpbicsICdDYWVjaWxpYSBNZXRlbGxhJywgJ0NhZWNpbGlhIE1ldGVsbCcsICdMdWNpdXMgQ2FlY2lsaXVzJywgJ1F1aW50dXMgQ2FlY2lsaXVzJywgJ1F1aW50dXMgQ2FlY2lsaXVzJywgJ1F1aW50dXMgQ2FlY2lsaXVzJywgJ1F1aW50dXMgQ2FlY2lsaXVzJywgJ1F1aW50dXMgQ2FlY2lsaXVzJywgJ1F1aW50dXMgQ2FlY2lsaXVzJywgJ1F1aW50dXMgQ2FlY2lsaXVzJywgJ1F1aW50dXMgQ2FlY2lsaXVzJywgJ01ldHRpdXMgUG9tcHVzaWFudScsICdUaXR1cyBBbm5pdXMnLCAnTHVjaXVzIE1pbnVjaXVzJywgJ01hcmN1cyBNaW51Y2l1cycsICdNYXJjdXMgTWludWNpdXMnLCAnR2FpdXMgTWludWNpdXMnLCAnTXVjaWEgVGVydGknLCAnR2FpdXMgTGljaW5pdXMnLCAnTHVjaXVzIE11bW1pdXMnLCAnTHVjaXVzIFN0YWl1cycsICdMdWNpdXMgTGljaW5pdXMnLCAnTXVzYWV1cyBHcmFtbWF0aWN1JywgJ0dhaXVzIE11c29uaXVzJywgJ05hcnNlcyBHZW5lcmEnLCAnR25hZXVzIE5hZXZpdScsICdSdXRpbGl1cyBDbGF1ZGl1cycsICdOYXJjaXNzdXMnLCAnTWFyY3VzIEF1cmVsaXVzJywgJ0Nvcm5lbGl1cyBOZXBvJywgJ0x1Y2l1cyBOZXJhdGl1cycsICdOZXJvIENsYXVkaXVzJywgJ0dhaXVzIENsYXVkaXVzJywgJ1RpYmVyaXVzIENsYXVkaXVzJywgJ05lcm8gSnVsaXVzJywgJ0x1Y2l1cyBDb2NjZWl1cycsICdNYXJjdXMgQ29jY2VpdXMnLCAnQXR0dXMgTmF2aXUnLCAnTHVjaXVzIFNlcHRpbWl1cycsICdWaXJpdXMgTmljb21hY2h1cycsICdQdWJsaXVzIE5pZ2lkaXVzJywgJ05pbm5pdXMgQ3Jhc3N1JywgJ01hcmN1cyBGdWx2aXVzJywgJ05vbml1cyBNYXJjZWxsdScsICdHYWl1cyBOb3JiYW51JywgJ0F1bHVzIExhcHBpdXMnLCAnUXVpbnR1cyBOb3ZpdScsICdOdW1hIFBvbXBpbGl1JywgJ01hcmN1cyBBdXJlbGl1cycsICdHYWl1cyBOeW1waGlkaXVzJywgJ0l1bGl1cyBPYnNlcXVlbicsICdPY3RhdmlhJywgJ0NsYXVkaWEgT2N0YXZpJywgJ0dhaXVzIE9jdGF2aXUnLCAnR25hZXVzIE9jdGF2aXUnLCAnTWFyY3VzIE9jdGF2aXUnLCAnU2VwdGltaXVzIE9kZW5hdGh1JywgJ1F1aW50dXMgTHVjcmV0aXVzJywgJ1F1aW50dXMgT2d1bG5pdXMnLCAnT2x5bXBpb2RvcnVzIG9mJywgJ09seW1waW9kb3J1cyB0aGUnLCAnQXVyZWxpdXMgT3BpbGl1JywgJ0x1Y2l1cyBPcGltaXUnLCAnR2FpdXMgT3BwaXUnLCAnUHVibGlsaXVzIE9wdGF0aWFudXMnLCAnTHVjaXVzIE9yYmlsaXVzJywgJ1BhdWx1cyBPcm9zaXUnLCAnUHVibGl1cyBPc3Rvcml1cycsICdUaXR1cyBPdGFjaWxpdXMnLCAnTWFyY3VzIFNhbHZpdXMnLCAnUHVibGl1cyBPdmlkaXVzJywgJ092aW5pdXMnLCAnTWFyY3VzIFBhY3V2aXUnLCAnTHVjaXVzIENhZXNlbm5pdXMnLCAnUXVpbnR1cyBSZW1taXVzJywgJ1BhbGZ1cml1cyBTdXInLCAnUnV0aWxpdXMgVGF1cnVzJywgJ0F1bHVzIENvcm5lbGl1cycsICdHYWl1cyBWaWJpdXMnLCAnQWVtaWxpdXMgUGFwaW5pYW51JywgJ1BhcGlyaWFudXMnLCAnTHVjaXVzIFBhcGlyaXVzJywgJ0dhaXVzIFBhcGl1cycsICdQYXNzaWVudXMnLCAnQWVtaWxpdXMgTGVwaWR1cycsICdMdWNpdXMgQWVtaWxpdXMnLCAnTHVjaXVzIEFlbWlsaXVzJywgJ0p1bGl1cyBQYXVsdScsICdQYXVsdXMgQWxleGFuZHJpbnUnLCAnUXVpbnR1cyBQZWRpdScsICdTZXh0dXMgUGVkaXUnLCAnTWFyY3VzIFBlcnBlcm4nLCAnTWFyY3VzIFBlcnBlcm5hJywgJ0F1bHVzIFBlcnNpdXMnLCAnUHVibGl1cyBIZWx2ZXRpdXMnLCAnR2FpdXMgUGVzY2Vubml1cycsICdRdWludHVzIFBldGlsbGl1JywgJ01hcmN1cyBQZXRyZWl1JywgJ1BldHJvbml1cycsICdQdWJsaXVzIFBldHJvbml1JywgJ1BldHJvbml1cyBBcmJpdGUnLCAnUHVibGl1cyBQZXRyb25pdXMnLCAnSnVsaXVzIFZlcnVzJywgJ0x1Y2l1cyBNYXJjaXVzJywgJ1F1aW50dXMgTWFyY2l1cycsICdDYWxwdXJuaXVzIFBpcycsICdHYWl1cyBDYWxwdXJuaXVzJywgJ0duYWV1cyBDYWxwdXJuaXVzJywgJ0x1Y2l1cyBDYWxwdXJuaXVzJywgJ0x1Y2l1cyBDYWxwdXJuaXVzJywgJ0x1Y2l1cyBDYWxwdXJuaXVzJywgJ0x1Y2l1cyBDYWxwdXJuaXVzJywgJ01hcmN1cyBQdXBpdXMnLCAnR2FsbGEgUGxhY2lkaScsICdQbGFjaWR1cycsICdMYWN0YW50aXVzIFBsYWNpZHUnLCAnTXVuYXRpYSBQbGFuY2luJywgJ0duYWV1cyBQbGFuY2l1JywgJ0x1Y2l1cyBNdW5hdGl1cycsICdUaXR1cyBNdW5hdGl1cycsICdQb21wZWl1cyBQbGFudCcsICdBdWx1cyBQbGF0b3JpdXMnLCAnUGxhdXRpYSBVcmd1bGFuaWxsJywgJ0dhaXVzIEZ1bHZpdXMnLCAnUGxhdXRpdXMnLCAnQXVsdXMgUGxhdXRpdScsICdQdWJsaXVzIFBsYXV0aXVzJywgJ1BsYXV0aXVzIExhdGVyYW51JywgJ01hcmN1cyBQbGF1dGl1cycsICdUaWJlcml1cyBQbGF1dGl1cycsICdUaXR1cyBNYWNjaXVzJywgJ1F1aW50dXMgUGxlbWluaXUnLCAnR2FpdXMgUGxpbml1cycsICdHYWl1cyBQbGluaXVzJywgJ1BvbXBlaWEgUGxvdGluJywgJ1Bsb3RpbnVzJywgJ1Bsb3RpdXMgVHVjYycsICdNZXN0cml1cyBQbHV0YXJjaHUnLCAnR2FpdXMgUG9ldGVsaXVzJywgJ0dhaXVzIEFzaW5pdXMnLCAnSnVsaXVzIFBvbGx1JywgJ1BvbHliaXVzJywgJ1BvbXBlaXVzJywgJ0duYWV1cyBQb21wZWl1JywgJ1F1aW50dXMgUG9tcGVpdScsICdHbmFldXMgUG9tcGVpdXMnLCAnU2V4dHVzIFBvbXBlaXVzJywgJ1F1aW50dXMgUG9tcGVpdXMnLCAnUG9tcGVpdXMgU2F0dXJuaW51JywgJ1BvbXBlaXVzIFNpbCcsICdQb21wZWl1cyBTdHJhYicsICdQb21waWxpdXMnLCAnTHVjaXVzIFBvbXBvbml1JywgJ1NleHR1cyBQb21wb25pdScsICdNYXJjdXMgUG9tcG9uaXVzJywgJ1RpdHVzIFBvbXBvbml1cycsICdQb21wb25pdXMgUnVmdScsICdQb21wb25pdXMgU2VjdW5kdScsICdHYXZpdXMgUG9udGl1JywgJ1BvbnRpdXMgVGVsZXNpbnUnLCAnUG9udGl1cyBQaWxhdHUnLCAnR2FpdXMgUG9waWxsaXVzJywgJ1B1YmxpdXMgUG9waWxsaXVzJywgJ1BvcHBhZWEgU2FiaW4nLCAnUXVpbnR1cyBQb3BwYWVkaXVzJywgJ1BvcmNpYScsICdQb3JjaXVzIExpY2ludScsICdNYXJjdXMgUG9yY2l1cycsICdQb21wb25pdXMgUG9ycGh5cmlvJywgJ1BvcnNlbm5hJywgJ0F1bHVzIFBvc3R1bWl1cycsICdTcHVyaXVzIFBvc3R1bWl1cycsICdMdWNpdXMgUG9zdHVtaXVzJywgJ0F1bHVzIFBvc3R1bWl1cycsICdNYXJjdXMgQ2Fzc2lhbnVzJywgJ1BvdGlsbGl1cyBDZXJlYWxpJywgJ01hcmN1cyBBbnRvbml1cycsICdQcmlzY2lhbnVzJywgJ1ByaXNjdXMnLCAnTWFyY3VzIEF1cmVsaXVzJywgJ1ZhbGVyaXVzIFByb2J1JywgJ1NhaW50IFByb2N1bCcsICdQcm9jdWx1cycsICdQcm9jdWx1cycsICdTZXh0dXMgUHJvcGVydGl1JywgJ0F1cmVsaXVzIENsZW1lbnMnLCAnUXVpbnR1cyBQdWJsaWxpdXMnLCAnUHVibGlsaXVzIFN5cnUnLCAnVm9sZXJvIFB1YmxpbGl1JywgJ1B1YmxpdXMgUHVwaXUnLCAnR2FpdXMgSXVsaXVzJywgJ0FzaW5pdXMgUXVhZHJhdHUnLCAnVGl0dXMgUXVpbmN0aXVzJywgJ01hcmN1cyBGYWJpdXMnLCAnUXVpbnR1cycsICdRdWludHVzIFNteXJuYWV1JywgJ1B1YmxpdXMgU3VscGljaXVzJywgJ1F1aW50dXMgTWFyY2l1cycsICdHYWl1cyBSYWJpcml1JywgJ0dhaXVzIFJhYmlyaXVzJywgJ0x1Y2l1cyBBZW1pbGl1cycsICdNYXJjdXMgQXFpbGl1cycsICdNYXJjdXMgQXRpbGl1cycsICdQdWJsaXVzIE1lbW1pdXMnLCAnUmVtdXMnLCAnUmVwb3NpYW51cycsICdRdWludHVzIE1hcmNpdXMnLCAnRmxhdml1cyBSaWNpbWUnLCAnUm9tdWx1cycsICdSb211bHVzIEF1Z3VzdHVsdScsICdTZXh0dXMgUm9zY2l1JywgJ0x1Y2l1cyBSb3NjaXVzJywgJ1F1aW50dXMgUm9zY2l1cycsICdSdWJlbGxpdXMgQmxhbmR1JywgJ0dhaXVzIFJ1YmVsbGl1cycsICdHYWl1cyBSdWJlbGxpdXMnLCAnUnViZWxsaWEgQnVzcycsICdSdWZpbnVzJywgJ0ZsYXZpdXMgUnVmaW51JywgJ0N1cnRpdXMgUnVmdScsICdRdWludHVzIEN1cnRpdXMnLCAnQ2x1dml1cyBSdWZ1JywgJ1B1YmxpdXMgU2VydmlsaXVzJywgJ1B1YmxpdXMgUnVwaWxpdScsICdHYWl1cyBSdXRpbGl1cycsICdQdWJsaXVzIFJ1dGlsaXVzJywgJ1B1YmxpdXMgUnV0aWxpdXMnLCAnVmliaWEgU2FiaW4nLCAnU2FiaW51cycsICdUaXR1cyBGbGF2aXVzJywgJ1RpdHVzIEZsYXZpdXMnLCAnTWFzdXJpdXMgU2FiaW51JywgJ01hcml1cyBQbG90aXVzJywgJ0p1bGl1cyBTYWNyb3ZpJywgJ1NhZXZpdXMgTmljYW5vJywgJ01hcmN1cyBMaXZpdXMnLCAnU2FsbHVzdGl1cycsICdHYWl1cyBTYWxsdXN0aXVzJywgJ0dhaXVzIFNhbGx1c3RpdXMnLCAnU2FsdmlhbnVzJywgJ1NhbHZpZGllbnVzIFJ1ZnUnLCAnTHVjaXVzIEFudG9uaXVzJywgJ0x1Y2l1cyBBcHB1bGVpdXMnLCAnR2FpdXMgU2VudGl1cycsICdHYWl1cyBNdWNpdXMnLCAnUHVibGl1cyBNdWNpdXMnLCAnUXVpbnR1cyBNdWNpdXMnLCAnQ2Fzc2l1cyBTY2FldnUnLCAnTHVjaXVzIENvcm5lbGl1cycsICdQdWJsaXVzIENvcm5lbGl1cycsICdTY2lwaW8gQWZyaWNhbnUnLCAnUHVibGl1cyBDb3JuZWxpdXMnLCAnTHVjaXVzIENvcm5lbGl1cycsICdMdWNpdXMgQ29ybmVsaXVzJywgJ0duYWV1cyBDb3JuZWxpdXMnLCAnUHVibGl1cyBDb3JuZWxpdXMnLCAnUHVibGl1cyBDb3JuZWxpdXMnLCAnUHVibGl1cyBDb3JuZWxpdXMnLCAnUHVibGl1cyBDb3JuZWxpdXMnLCAnU2NyaWJvbmlhJywgJ0x1Y2l1cyBBcnJ1bnRpdXMnLCAnTHVjaXVzIFNjcmlib25pdXMnLCAnTWFyY3VzIFNjcmlib25pdXMnLCAnU2NyaWJvbml1cyBMYXJndScsICdHbmFldXMgVHJlbWVsbGl1cycsICdKdWxpdXMgU2VjdW5kdScsICdTZWR1bGl1cycsICdTZWphbnVzJywgJ0x1Y2l1cyBTZWl1cycsICdMdWNpdXMgQW5uYWV1cycsICdQdWJsaXVzIFNlcHRpbWl1JywgJ1NlcHRpbWl1cyBTZXJlbnUnLCAnU2VyZW51cyBTYW1tb25pY3UnLCAnUXVpbnR1cyBTZXJlbnUnLCAnU2VyZ2l1cycsICdNYXJjdXMgU2VyZ2l1JywgJ1NlcnJhbnVzJywgJ1F1aW50dXMgU2VydG9yaXUnLCAnU3VscGljaXVzIEx1cGVyY3VzJywgJ0x1Y2l1cyBKdWxpdXMnLCAnU2VydmlsaWEnLCAnUHVibGl1cyBTZXJ2aWxpdXMnLCAnUHVibGl1cyBTZXJ2aWxpdXMnLCAnTWFyY3VzIFNlcnZpbGl1cycsICdTZXJ2aXVzJywgJ1NlcnZpdXMgVHVsbGl1JywgJ1B1YmxpdXMgU2VzdGl1JywgJ0x1Y2l1cyBTZXB0aW1pdXMnLCAnTWFyY3VzIEF1cmVsaXVzJywgJ1NleHR1cyBKdWxpdXMnLCAnRmxhdml1cyBWYWxlcml1cycsICdTdWxwaWNpdXMgU2V2ZXJ1JywgJ1F1aW50dXMgU2V4dGl1JywgJ1RpdHVzIFNleHRpdScsICdTZXh0dXMnLCAnU2V4dHVzIEVtcGlyaWN1JywgJ0duYWV1cyBTaWNpbml1JywgJ1NpY3VsdXMgRmxhY2N1JywgJ0dhaXVzIFNvbGxpdXMnLCAnRGVjaW11cyBKdW5pdXMnLCAnR2FpdXMgSnVuaXVzJywgJ0dhaXVzIEFwcGl1cycsICdNYXJjdXMgSnVuaXVzJywgJ0RlY2ltdXMgSnVuaXVzJywgJ0x1Y2l1cyBKdW5pdXMnLCAnTWFyY3VzIEp1bml1cycsICdHYWl1cyBTaWxpdScsICdQdWJsaXVzIFNpbGl1cycsICdTaWxpdXMgSXRhbGljdScsICdMdWNpdXMgQ29ybmVsaXVzJywgJ1B1YmxpdXMgU2l0dGl1JywgJ0dhaXVzIEl1bGl1cycsICdHYWl1cyBTb3NpdScsICdRdWludHVzIFNvc2l1cycsICdUaXR1cyBWZXN0cmljaXVzJywgJ1N0YWJlcml1cyBFcm8nLCAnVGl0dXMgU3RhdGlsaXVzJywgJ1B1YmxpdXMgUGFwaW5pdXMnLCAnU3RlcnRpbml1cycsICdGbGF2aXVzIFN0aWxpY2gnLCAnTHVjaXVzIEFlbGl1cycsICdHYWl1cyBMaWNpbml1cycsICdTdWVpcycsICdHYWl1cyBTdWV0b25pdXMnLCAnR2FpdXMgU3VldG9uaXVzJywgJ1B1YmxpdXMgU3VpbGxpdXMnLCAnTHVjaXVzIENvcm5lbGl1cycsICdQdWJsaXVzIENvcm5lbGl1cycsICdGYXVzdHVzIENvcm5lbGl1cycsICdTdWxwaWNpYScsICdTZXJ2aXVzIFN1bHBpY2l1JywgJ1N1bHBpY2l1cyBBcG9sbGluYXJpJywgJ1N1bHBpY2l1cyBCbGl0aCcsICdRdWludHVzIFN1bHBpY2l1cycsICdQdWJsaXVzIFN1bHBpY2l1cycsICdTZXJ2aXVzIFN1bHBpY2l1cycsICdMdWNpdXMgTGljaW5pdXMnLCAnUXVpbnR1cyBBdXJlbGl1cycsICdDb3JuZWxpdXMgVGFjaXR1JywgJ01hcmN1cyBDbGF1ZGl1cycsICdUYW5hcXVpbCcsICdUYW51c2l1cyBHZW1pbnUnLCAnTHVjaXVzIFRhcml1cycsICdUYXJwZWlhJywgJ0x1Y2l1cyBUYXJxdWluaXVzJywgJ1RhcnF1aW5pdXMgUHJpc2N1JywgJ1RhcnF1aW5pdXMgU3VwZXJidScsICdUYXJxdWl0aXVzIFByaXNjdScsICdUaXR1cyBUYXRpdScsICdQdWJsaXVzIFRlcmVudGl1cycsICdUZXJlbnRpYScsICdUZXJlbnRpYW51cyBNYXVydScsICdRdWludHVzIFRlcmVudGl1cycsICdRdWludHVzIFNlcHRpbWl1cycsICdHYWl1cyBQaXVzJywgJ1RoZW9kb3NpdXMgSScsICdUaGVvZG9zaXVzIEknLCAnUHVibGl1cyBDbG9kaXVzJywgJ1RpYmVyaXVzIEp1bGl1cycsICdUaWJlcml1cyBKdWxpdXMnLCAnVGliZXJpdXMgSnVsaXVzJywgJ0FsYml1cyBUaWJ1bGx1JywgJ0dhaXVzIE9wb25pdXMnLCAnR2FpdXMgRnVyaXVzJywgJ01hcmN1cyBUdWxsaXVzJywgJ0p1bGl1cyBUaXRpYW51JywgJ1RpdGluaXVzJywgJ0duYWV1cyBPY3Rhdml1cycsICdHYWl1cyBUaXRpdScsICdNYXJjdXMgVGl0aXUnLCAnVGl0aXVzIEFyaXN0JywgJ1RpdHVzIEZsYXZpdXMnLCAnVGl0dXMgTGFyY2l1JywgJ1RpdHVzIE1hbmxpdXMnLCAnUXVpbnR1cyBUcmFiZScsICdNYXJjdXMgVWxwaXVzJywgJ0dhaXVzIFRyZWJhdGl1cycsICdUcmViaXVzIE5pZ2UnLCAnR2FpdXMgVmliaXVzJywgJ0dhaXVzIFRyZWJvbml1JywgJ0dhaXVzIFZhbGVyaXVzJywgJ1RyaWJvbmlhbnVzJywgJ1BvbXBlaXVzIFRyb2d1JywgJ0x1Y2l1cyBBZWxpdXMnLCAnUXVpbnR1cyBBZWxpdXMnLCAnR2FpdXMgU2VtcHJvbml1cycsICdQdWJsaXVzIFNlbXByb25pdXMnLCAnVHVsbGlhIENpY2Vyb25pJywgJ1R1bGx1cyBIb3N0aWxpdScsICdRdWludHVzIE1hcmNpdXMnLCAnVHVyaWEnLCAnVHVybnVzJywgJ1NleHR1cyBUdXJwaWxpdScsICdUdXJyaWFudXMgR3JhY2lsaScsICdDbG9kaXVzIFR1cnJpbnUnLCAnVHV0aWNhbnVzJywgJ1VscGlhbnVzIG9mJywgJ0RvbWl0aXVzIFVscGlhbnUnLCAnTWFyY3VzIFVscGl1cycsICdVcmJhbnVzJywgJ1NlcHRpbWl1cyBWYWJhbGxhdGh1JywgJ1ZhZ2VsbGl1cycsICdWYWxlbnMnLCAnRmFiaXVzIFZhbGVuJywgJ1ZldHRpdXMgVmFsZW4nLCAnVmFsZW50aW5pYW4gSScsICdWYWxlbnRpbmlhbiBJJywgJ1ZhbGVudGluaWFuIElJJywgJ1B1YmxpdXMgTGljaW5pdXMnLCAnVmFsZXJpdXMgQWVkaXR1dScsICdWYWxlcml1cyBBbnRpYScsICdEZWNpbXVzIFZhbGVyaXVzJywgJ1B1YmxpdXMgVmFsZXJpdXMnLCAnTWFyY3VzIFZhbGVyaXVzJywgJ0dhaXVzIENhbHBldGFudXMnLCAnR2FpdXMgVmFsZXJpdXMnLCAnTHVjaXVzIFZhbGVyaXVzJywgJ1ZhbGVyaXVzIE1heGltdScsICdQdWJsaXVzIFZhbGVyaXVzJywgJ0x1Y2l1cyBWYWxlcml1cycsICdRdWludHVzIFZhbGVyaXVzJywgJ1F1aW50dXMgVmFsZXJpdXMnLCAnVmFsZ2l1cyBSdWZ1JywgJ1ZhbGxpdXMgU3lyaWFjdScsICdWYXJlbnVzIFJ1ZnUnLCAnUXVpbnR1cyBWYXJndW50ZWl1JywgJ1F1aW50dXMgVmFyaXUnLCAnVmFyaXVzIFJ1ZnUnLCAnR2FpdXMgVGVyZW50aXVzJywgJ01hcmN1cyBUZXJlbnRpdXMnLCAnUHVibGl1cyBUZXJlbnRpdXMnLCAnQXVsdXMgVGVyZW50aXVzJywgJ1B1YmxpdXMgQXR0aXVzJywgJ1B1YmxpdXMgUXVpbmN0aWxpdXMnLCAnUXVpbmN0aWxpdXMgVmFydScsICdBcnJpdXMgVmFydScsICdQdWJsaXVzIFZhdGluaXUnLCAnUHVibGl1cyBWZWRpdXMnLCAnRmxhdml1cyBWZWdldGl1cycsICdBdWx1cyBEaWRpdXMnLCAnVmVsaXVzIExvbmd1JywgJ1ZlbGxlaXVzIFBhdGVyY3VsdScsICdWZW5hbnRpdXMgSG9ub3JpdXMnLCAnVmVubm9uaXVzJywgJ1B1YmxpdXMgVmVudGlkaXUnLCAnVmVudGlkaXVzIEN1bWFudScsICdWZXJnaW5pYScsICdWZXJnaW5pdXMgRmxhdnUnLCAnTHVjaXVzIFZlcmdpbml1cycsICdHYWl1cyBWZXJyZScsICdMdWNpdXMgVmVydScsICdMdWNpdXMgVmV0dGl1JywgJ1ZldHRpdXMgUGhpbG9jb211JywgJ0x1Y2l1cyBWZXR0aXVzJywgJ0NhZWxpdXMgVmliZW5uJywgJ1F1aW50dXMgVmliaXVzJywgJ0dhaXVzIFZpYml1cycsICdHYWl1cyBWaWJpdXMnLCAnR2FpdXMgVmliaXVzJywgJ0dhaXVzIE1hcml1cycsICdNYXhpbXVzIFZpY3RvcmludScsICdMdWNpdXMgVmlsbGl1cycsICdHYWl1cyBKdWxpdXMnLCAnQW5uaXVzIFZpbmljaWFudScsICdMdWNpdXMgVmluaWNpdScsICdNYXJjdXMgVmluaWNpdScsICdQdWJsaXVzIFZpbmljaXUnLCAnVGl0dXMgVmluaXUnLCAnUHVibGl1cyBWZXJnaWxpdXMnLCAnVmlyaWF0aHVzJywgJ0F1bHVzIFZpdGVsbGl1JywgJ0x1Y2l1cyBWaXRlbGxpdScsICdWaXRydXZpdXMnLCAnR2FpdXMgRGlsbGl1cycsICdWb2xjYXRpdXMgU2VkaWdpdHUnLCAnVm9sY2FjaXVzIE1vc2NodScsICdMdWNpdXMgVm9sdGFjaWxpdXMnLCAnUHVibGl1cyBWb2x1bW5pdScsICdHbmFldXMgTWFubGl1cycsICdMdWNpdXMgTWFubGl1cyddO1xuXG5tb2R1bGUuZXhwb3J0cyA9IG5hbWVzO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cm9tYW4tbmFtZS5qcy5tYXBcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGRyZCA9IHJlcXVpcmUoJ2RlZmluaXRlbHktcmFuZG9tLWRhdGEnKTtcbnJlcXVpcmUoJy4vbWFya292LWNoYWluLXNvdXJjZScpO1xubW9kdWxlLmV4cG9ydHMgPSBuZXcgZHJkLkdlbmVyYXRvcigpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmFicmljby5qcy5tYXBcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGZhYnJpY28gPSByZXF1aXJlKCcuL2ZhYnJpY28nKTtcbnZhciBuYW1lID0gZXhwb3J0cy5uYW1lID0gZmFicmljby5tYXJrb3YocmVxdWlyZSgnLi9kYXRhL25hbWVzL3JvbWFuLW5hbWUnKSk7XG52YXIgZ2VuZGVyID0gZXhwb3J0cy5nZW5kZXIgPSBmYWJyaWNvLmxpc3QoWydtYWxlJywgJ2ZlbWFsZSddKTtcblxudmFyIGh1bWFuRXllcyA9IGZhYnJpY28ubGlzdChbJ2Jyb3duJywgJ2JsdWUnLCAnZ3JlZW4nLCAnaGF6ZWwnXSk7XG52YXIgZWxmRXllcyA9IGZhYnJpY28ubGlzdChbJ2Jyb3duJywgJ2JsdWUnLCAnZ3JlZW4nLCAnd2hpdGUnLCAnc2lsdmVyJywgJ2JsYWNrJ10pO1xudmFyIGhhbGZFbGZFeWVzID0gZmFicmljby5vbmVPZihodW1hbkV5ZXMsIGVsZkV5ZXMpO1xudmFyIGR3YXJmRXllcyA9IGZhYnJpY28ubGlzdChbJ2Jyb3duJywgJ2RhcmsgYnJvd24nLCAnYmxhY2snXSk7XG52YXIgZ25vbWVFeWVzID0gZmFicmljby5saXN0KFsnYmx1ZScsICdncmVlbicsICdyZWQnLCAnb3JhbmdlJ10pO1xuXG4vL0knbSBsYXp5XG52YXIgaGFpciA9IGZhYnJpY28ubGlzdChbJ2Jyb3duJywgJ2Jsb25kZScsICdyZWQnLCAnZ3JheScsICd3aGl0ZScsICdzaWx2ZXInXSk7XG5cbnZhciBhZHZlbnR1cmVyID0gZmFicmljby5saXN0KCd3aXphcmQnLCAnZmlnaHRlcicsICdyb2d1ZScpO1xudmFyIHByb2Zlc3Npb24gPSBmYWJyaWNvLm9uZU9mKCdiYWtlcicsICdzbWl0aCcsICdjYXJwZW50ZXInLCAnZWxkZXInLCAnY291bmNpbG1hbicsICdwZWFzYW50JywgJ2RydW5rYXJkJywgJ2NvbW1vbmVyJywgJ25vYmxlJywgYWR2ZW50dXJlcik7XG5cbnZhciBjb21tb25JbnZlbnRvcnkgPSBmYWJyaWNvLmxpc3QoWydkYWdnZXInLCAnbmVja2xhY2UnLCAncmluZyddKS5yZXBlYXQoMCwgMyk7XG52YXIgcHJvZmVzc2lvbkludmVudG9yeSA9IHtcbiAgICBkcnVua2FyZDogZmFicmljby5saXN0KFsnYmVlcicsICdhbGUnLCAnd2hpc2tleSddKSxcbiAgICB3aXphcmQ6IGZhYnJpY28udG9rZW5zKCdzcGVsbGJvb2snLCBmYWJyaWNvLmxpdGVyYWwoJ3Njcm9sbGNhc2UnKS5mbGlwKCksIGZhYnJpY28ubGlzdChbJ3F1YXJ0ZXJzdGFmZicsICd3YW5kJywgJ2Nyb3NzYm93J10pKSxcbiAgICBmaWdodGVyOiBmYWJyaWNvLnRva2VucygnYXJtb3InLCBmYWJyaWNvLmxpdGVyYWwoJ3NoaWVsZCcpLnJlcGVhdCgwLCAxKSwgZmFicmljby5saXN0KFsnc3dvcmQnLCAnZGFnZ2VyJywgJ2Nyb3NzYm93JywgJ2JvdycsICdheGUnXSkpLFxuICAgIHJvZ3VlOiBmYWJyaWNvLnRva2VucygnbG9jayBwaWNrcycsIGZhYnJpY28ubGl0ZXJhbCgnY29udHJhYmFuZCcpLnJlcGVhdCgwLCAxKSwgZmFicmljby5saXN0KFsnZGlzZ3Vpc2Uga2l0JywgJ2RhZ2dlcicsICdib3cnXSkpXG59O1xuXG52YXIgaW52ZW50b3J5ID0gZnVuY3Rpb24gaW52ZW50b3J5KGNoYXIpIHtcblxuICAgIHZhciByZXQgPSBjb21tb25JbnZlbnRvcnkuZ2V0KCk7XG4gICAgdmFyIHByb2YgPSBjaGFyLnByb2Zlc3Npb247XG4gICAgaWYgKCFwcm9mKSByZXR1cm4gcmV0O1xuXG4gICAgdmFyIG90aGVyID0gcHJvZmVzc2lvbkludmVudG9yeVtwcm9mXTtcbiAgICBpZiAoIW90aGVyKSByZXR1cm4gcmV0O1xuXG4gICAgcmV0dXJuIHJldC5jb25jYXQob3RoZXIuZ2V0KCkpO1xufTtcblxudmFyIGh1bWFuID0gZXhwb3J0cy5odW1hbiA9IGZhYnJpY28ubWFwKHsgbmFtZTogbmFtZSwgcmFjZTogJ2h1bWFuJywgZ2VuZGVyOiBnZW5kZXIsIGV5ZXM6IGh1bWFuRXllcywgaGFpcjogaGFpciwgcHJvZmVzc2lvbjogcHJvZmVzc2lvbiwgaW52ZW50b3J5OiBpbnZlbnRvcnkgfSk7XG52YXIgZWxmID0gZXhwb3J0cy5lbGYgPSBmYWJyaWNvLm1hcCh7IG5hbWU6IG5hbWUsIHJhY2U6ICdlbGYnLCBnZW5kZXI6IGdlbmRlciwgZXllczogZWxmRXllcywgaGFpcjogaGFpciwgcHJvZmVzc2lvbjogcHJvZmVzc2lvbiwgaW52ZW50b3J5OiBpbnZlbnRvcnkgfSk7XG52YXIgaGFsZkVsZiA9IGV4cG9ydHMuaGVsZkVsZiA9IGZhYnJpY28ubWFwKHsgbmFtZTogbmFtZSwgcmFjZTogJ2hhbGYtZWxmJywgZ2VuZGVyOiBnZW5kZXIsIGV5ZXM6IGhhbGZFbGZFeWVzLCBoYWlyOiBoYWlyLCBwcm9mZXNzaW9uOiBwcm9mZXNzaW9uLCBpbnZlbnRvcnk6IGludmVudG9yeSB9KTtcbnZhciBkd2FyZiA9IGV4cG9ydHMuZHdhcmYgPSBmYWJyaWNvLm1hcCh7IG5hbWU6IG5hbWUsIHJhY2U6ICdkd2FyZicsIGdlbmRlcjogZ2VuZGVyLCBleWVzOiBkd2FyZkV5ZXMsIGhhaXI6IGhhaXIsIHByb2Zlc3Npb246IHByb2Zlc3Npb24sIGludmVudG9yeTogaW52ZW50b3J5IH0pO1xudmFyIGdub21lID0gZXhwb3J0cy5nbm9tZSA9IGZhYnJpY28ubWFwKHsgbmFtZTogbmFtZSwgcmFjZTogJ2dub21lJywgZ2VuZGVyOiBnZW5kZXIsIGV5ZXM6IGdub21lRXllcywgaGFpcjogaGFpciwgcHJvZmVzc2lvbjogcHJvZmVzc2lvbiwgaW52ZW50b3J5OiBpbnZlbnRvcnkgfSk7XG5cbnZhciBjaGFyYWN0ZXIgPSBleHBvcnRzLmNoYXJhY3RlciA9IGZhYnJpY28ub25lT2YoaHVtYW4sIGVsZiwgZHdhcmYsIGdub21lLCBoYWxmRWxmKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZhbnRhc3kuanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIGRyZCA9IHJlcXVpcmUoJ2RlZmluaXRlbHktcmFuZG9tLWRhdGEnKTtcblxudmFyIE1hcmtvdkNoYWluU291cmNlID0gZnVuY3Rpb24gKF9kcmQkQWJzdHJhY3RTb3VyY2UpIHtcbiAgX2luaGVyaXRzKE1hcmtvdkNoYWluU291cmNlLCBfZHJkJEFic3RyYWN0U291cmNlKTtcblxuICBmdW5jdGlvbiBNYXJrb3ZDaGFpblNvdXJjZShsaXN0KSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1hcmtvdkNoYWluU291cmNlKTtcblxuICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChNYXJrb3ZDaGFpblNvdXJjZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE1hcmtvdkNoYWluU291cmNlKSkuY2FsbCh0aGlzKSk7XG5cbiAgICBfdGhpcy5saXN0ID0gbGlzdDtcbiAgICBfdGhpcy5jaGFpbiA9IG51bGw7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKE1hcmtvdkNoYWluU291cmNlLCBbe1xuICAgIGtleTogJ2dldEl0ZW0nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJdGVtKHJuZykge1xuXG4gICAgICBpZiAodGhpcy5jaGFpbiA9PT0gbnVsbCkge1xuICAgICAgICB0aGlzLmNoYWluID0gY29uc3RydWN0X2NoYWluKHRoaXMubGlzdCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBtYXJrb3ZfbmFtZSh0aGlzLmNoYWluLCBybmcgfHwgZHJkLkRlZmF1bHRzLmRlZmF1bHRSbmcpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBNYXJrb3ZDaGFpblNvdXJjZTtcbn0oZHJkLkFic3RyYWN0U291cmNlKTtcblxuZXhwb3J0cy5NYXJrb3ZDaGFpblNvdXJjZSA9IE1hcmtvdkNoYWluU291cmNlO1xuXG4vKlxuRXh0ZW5kIERSRCB0byBoYXZlIGEgbWFya292IHNvdXJjZVxuKi9cbmRyZC5HZW5lcmF0b3IucHJvdG90eXBlLm1hcmtvdiA9IGZ1bmN0aW9uIChsaXN0KSB7XG4gIHJldHVybiBuZXcgTWFya292Q2hhaW5Tb3VyY2UobGlzdCk7XG59O1xuXG4vLyAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC1cbi8vIG5hbWVfZ2VuZXJhdG9yLmpzXG4vLyB3cml0dGVuIGFuZCByZWxlYXNlZCB0byB0aGUgcHVibGljIGRvbWFpbiBieSBkcm93IDxkcm93QGJpbi5zaD5cbi8vIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL3B1YmxpY2RvbWFpbi96ZXJvLzEuMC9cbi8vIGh0dHBzOi8vZG9uam9uLmJpbi5zaC9jb2RlL25hbWUvbmFtZV9nZW5lcmF0b3IuanNcblxudmFyIG5hbWVfc2V0ID0ge307XG52YXIgY2hhaW5fY2FjaGUgPSB7fTtcblxuLy8gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtXG4vLyBnZW5lcmF0b3IgZnVuY3Rpb25cblxuZnVuY3Rpb24gZ2VuZXJhdGVfbmFtZSh0eXBlKSB7XG4gIHZhciBjaGFpbjtpZiAoY2hhaW4gPSBtYXJrb3ZfY2hhaW4odHlwZSkpIHtcbiAgICByZXR1cm4gbWFya292X25hbWUoY2hhaW4pO1xuICB9XG4gIHJldHVybiAnJztcbn1cblxuLy8gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtXG4vLyBnZXQgbWFya292IGNoYWluIGJ5IHR5cGVcblxuZnVuY3Rpb24gbWFya292X2NoYWluKHR5cGUpIHtcbiAgdmFyIGNoYWluO2lmIChjaGFpbiA9IGNoYWluX2NhY2hlW3R5cGVdKSB7XG4gICAgcmV0dXJuIGNoYWluO1xuICB9IGVsc2Uge1xuICAgIHZhciBsaXN0O2lmIChsaXN0ID0gbmFtZV9zZXRbdHlwZV0pIHtcbiAgICAgIHZhciBjaGFpbjtpZiAoY2hhaW4gPSBjb25zdHJ1Y3RfY2hhaW4obGlzdCkpIHtcbiAgICAgICAgY2hhaW5fY2FjaGVbdHlwZV0gPSBjaGFpbjtcbiAgICAgICAgcmV0dXJuIGNoYWluO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8vIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLVxuLy8gY29uc3RydWN0IG1hcmtvdiBjaGFpbiBmcm9tIGxpc3Qgb2YgbmFtZXNcblxuZnVuY3Rpb24gY29uc3RydWN0X2NoYWluKGxpc3QpIHtcbiAgdmFyIGNoYWluID0ge307XG5cbiAgdmFyIGk7Zm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgbmFtZXMgPSBsaXN0W2ldLnNwbGl0KC9cXHMrLyk7XG4gICAgY2hhaW4gPSBpbmNyX2NoYWluKGNoYWluLCAncGFydHMnLCBuYW1lcy5sZW5ndGgpO1xuXG4gICAgdmFyIGo7Zm9yIChqID0gMDsgaiA8IG5hbWVzLmxlbmd0aDsgaisrKSB7XG4gICAgICB2YXIgbmFtZSA9IG5hbWVzW2pdO1xuICAgICAgY2hhaW4gPSBpbmNyX2NoYWluKGNoYWluLCAnbmFtZV9sZW4nLCBuYW1lLmxlbmd0aCk7XG5cbiAgICAgIHZhciBjID0gbmFtZS5zdWJzdHIoMCwgMSk7XG4gICAgICBjaGFpbiA9IGluY3JfY2hhaW4oY2hhaW4sICdpbml0aWFsJywgYyk7XG5cbiAgICAgIHZhciBzdHJpbmcgPSBuYW1lLnN1YnN0cigxKTtcbiAgICAgIHZhciBsYXN0X2MgPSBjO1xuXG4gICAgICB3aGlsZSAoc3RyaW5nLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdmFyIGMgPSBzdHJpbmcuc3Vic3RyKDAsIDEpO1xuICAgICAgICBjaGFpbiA9IGluY3JfY2hhaW4oY2hhaW4sIGxhc3RfYywgYyk7XG5cbiAgICAgICAgc3RyaW5nID0gc3RyaW5nLnN1YnN0cigxKTtcbiAgICAgICAgbGFzdF9jID0gYztcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHNjYWxlX2NoYWluKGNoYWluKTtcbn1cbmZ1bmN0aW9uIGluY3JfY2hhaW4oY2hhaW4sIGtleSwgdG9rZW4pIHtcbiAgaWYgKGNoYWluW2tleV0pIHtcbiAgICBpZiAoY2hhaW5ba2V5XVt0b2tlbl0pIHtcbiAgICAgIGNoYWluW2tleV1bdG9rZW5dKys7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNoYWluW2tleV1bdG9rZW5dID0gMTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgY2hhaW5ba2V5XSA9IHt9O1xuICAgIGNoYWluW2tleV1bdG9rZW5dID0gMTtcbiAgfVxuICByZXR1cm4gY2hhaW47XG59XG5mdW5jdGlvbiBzY2FsZV9jaGFpbihjaGFpbikge1xuICB2YXIgdGFibGVfbGVuID0ge307XG5cbiAgdmFyIGtleTtmb3IgKGtleSBpbiBjaGFpbikge1xuICAgIHRhYmxlX2xlbltrZXldID0gMDtcblxuICAgIHZhciB0b2tlbjtmb3IgKHRva2VuIGluIGNoYWluW2tleV0pIHtcbiAgICAgIHZhciBjb3VudCA9IGNoYWluW2tleV1bdG9rZW5dO1xuICAgICAgdmFyIHdlaWdodGVkID0gTWF0aC5mbG9vcihNYXRoLnBvdyhjb3VudCwgMS4zKSk7XG5cbiAgICAgIGNoYWluW2tleV1bdG9rZW5dID0gd2VpZ2h0ZWQ7XG4gICAgICB0YWJsZV9sZW5ba2V5XSArPSB3ZWlnaHRlZDtcbiAgICB9XG4gIH1cbiAgY2hhaW5bJ3RhYmxlX2xlbiddID0gdGFibGVfbGVuO1xuICByZXR1cm4gY2hhaW47XG59XG5cbi8vIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLVxuLy8gY29uc3RydWN0IG5hbWUgZnJvbSBtYXJrb3YgY2hhaW5cblxuZnVuY3Rpb24gbWFya292X25hbWUoY2hhaW4sIHJuZykge1xuICB2YXIgcGFydHMgPSBzZWxlY3RfbGluayhjaGFpbiwgJ3BhcnRzJywgcm5nKTtcbiAgdmFyIG5hbWVzID0gW107XG5cbiAgdmFyIGk7Zm9yIChpID0gMDsgaSA8IHBhcnRzOyBpKyspIHtcbiAgICB2YXIgbmFtZV9sZW4gPSBzZWxlY3RfbGluayhjaGFpbiwgJ25hbWVfbGVuJywgcm5nKTtcbiAgICB2YXIgYyA9IHNlbGVjdF9saW5rKGNoYWluLCAnaW5pdGlhbCcsIHJuZyk7XG4gICAgdmFyIG5hbWUgPSBjO1xuICAgIHZhciBsYXN0X2MgPSBjO1xuXG4gICAgd2hpbGUgKG5hbWUubGVuZ3RoIDwgbmFtZV9sZW4pIHtcbiAgICAgIGMgPSBzZWxlY3RfbGluayhjaGFpbiwgbGFzdF9jLCBybmcpO1xuICAgICAgbmFtZSArPSBjO1xuICAgICAgbGFzdF9jID0gYztcbiAgICB9XG4gICAgbmFtZXMucHVzaChuYW1lKTtcbiAgfVxuICByZXR1cm4gbmFtZXMuam9pbignICcpO1xufVxuZnVuY3Rpb24gc2VsZWN0X2xpbmsoY2hhaW4sIGtleSwgcm5nKSB7XG4gIHZhciBsZW4gPSBjaGFpblsndGFibGVfbGVuJ11ba2V5XTtcbiAgdmFyIGlkeCA9IHJuZyA/IHJuZy5nZXRSYW5kb21JbnQoMCwgbGVuKSA6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGxlbik7XG5cbiAgdmFyIHQgPSAwO2ZvciAodmFyIHRva2VuIGluIGNoYWluW2tleV0pIHtcbiAgICB0ICs9IGNoYWluW2tleV1bdG9rZW5dO1xuICAgIGlmIChpZHggPCB0KSB7XG4gICAgICByZXR1cm4gdG9rZW47XG4gICAgfVxuICB9XG4gIHJldHVybiAnLSc7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYXJrb3YtY2hhaW4tc291cmNlLmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBzZWVkcmFuZG9tID0gcmVxdWlyZSgnc2VlZHJhbmRvbScpO1xudmFyIHV0aWwgPSByZXF1aXJlKCd1dGlsJyk7XG5cbnZhciBQcm5nID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBQcm5nKGZuKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFBybmcpO1xuXG4gICAgdGhpcy5mbiA9IGZuIHx8IE1hdGgucmFuZG9tO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFBybmcsIFt7XG4gICAga2V5OiAnZ2V0UmFuZG9tSW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UmFuZG9tSW50KG1pbiwgbWF4KSB7XG4gICAgICBtaW4gPSBNYXRoLmNlaWwobWluKTtcbiAgICAgIG1heCA9IE1hdGguZmxvb3IobWF4KTtcbiAgICAgIHJldHVybiBNYXRoLmZsb29yKHRoaXMuZm4oKSAqIChtYXggLSBtaW4pKSArIG1pbjtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdnZXRSYW5kb21GbG9hdCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFJhbmRvbUZsb2F0KG1pbiwgbWF4KSB7XG4gICAgICBpZiAodXRpbC5pc1VuZGVmaW5lZChtaW4pKSBtaW4gPSAwO1xuICAgICAgaWYgKHV0aWwuaXNVbmRlZmluZWQobWF4KSkgbWF4ID0gMTtcblxuICAgICAgcmV0dXJuIHRoaXMuZm4oKSAqIChtYXggLSBtaW4pICsgbWluO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBQcm5nO1xufSgpO1xuXG52YXIgZGVmYXVsdHMgPSB7XG4gIGRlZmF1bHRSbmc6IG5ldyBQcm5nKHNlZWRyYW5kb20oKSlcbn07XG5cbnZhciBTb3VyY2UgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFNvdXJjZSgpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU291cmNlKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhTb3VyY2UsIFt7XG4gICAga2V5OiAnZ2V0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0KHJuZykge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0SXRlbShybmcgfHwgZGVmYXVsdHMuZGVmYXVsdFJuZyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnZ2V0SXRlbScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldEl0ZW0ocm5nKSB7XG4gICAgICB0aHJvdyAnZ2V0SXRlbSgpIGlzIG5vdCBpbXBsZW1lbnRlZCBvbiAnICsgdGhpcy5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3JlcGVhdCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlcGVhdChtaW4sIG1heCkge1xuICAgICAgcmV0dXJuIG5ldyBSYW5nZVNvdXJjZSh0aGlzLCBtaW4sIG1heCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnd2l0aFJuZycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHdpdGhSbmcocm5nKSB7XG4gICAgICByZXR1cm4gbmV3IFJuZ092ZXJyaWRlU291cmNlKHRoaXMsIHJuZyk7XG4gICAgfVxuXG4gICAgLypcbiAgICBXcmFwcyBhIHNvdXJjZSBzdWNoIHRoYXQgaXQgd2lsbCBleGVjdXRlIG9ubHkgaWYgYSBjZXJ0YWluIHByb2JhYmlsaXR5IGlzIG1ldC5cbiAgICBJdCdzIGJhc2ljYWxseSBhIHNwZWNpYWwgY2FzZSBvZiByZXBlYXQoMCwgMSkuIFxuICAgIFxuICAgIHJlcGVhdCgwLDEpIGlzIGFuIHVuaWZvcm0gZGlzdHJpYnV0aW9uIG9mIDAgb3IgMSBhbmQgd291bGQgYmUgdGhlIHNhbWUgYXMgZmxpcCgpIG9yIGZsaXAoMC41KS4gIEhvd2V2ZXIgdGhlIFxuICAgIHJlc3VsdCBvZiBhIGZsaXAgaXNuJ3QgbmVjZXNzYXJpbHkgYW4gYXJyYXkgKHdoZXJlYXMgcmVwZWF0KDAsMSkgaXMpLCBhbmQgdGhlIHByb2JhYmlsaXR5IGlzIGNvbnRyb2xsZWRcbiAgICBcbiAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdmbGlwJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZmxpcChzdWNjZXNzUHJvYmFiaWxpdHksIGRlZmF1bHRWYWx1ZSkge1xuICAgICAgcmV0dXJuIG5ldyBGbGlwU291cmNlKHRoaXMsIHN1Y2Nlc3NQcm9iYWJpbGl0eSwgZGVmYXVsdFZhbHVlKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gU291cmNlO1xufSgpO1xuXG52YXIgTGlzdFNvdXJjZSA9IGZ1bmN0aW9uIChfU291cmNlKSB7XG4gIF9pbmhlcml0cyhMaXN0U291cmNlLCBfU291cmNlKTtcblxuICBmdW5jdGlvbiBMaXN0U291cmNlKG9iaiwgY3R4KSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIExpc3RTb3VyY2UpO1xuXG4gICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKExpc3RTb3VyY2UuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihMaXN0U291cmNlKSkuY2FsbCh0aGlzLCBjdHgpKTtcblxuICAgIF90aGlzLmxpc3QgPSBvYmo7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKExpc3RTb3VyY2UsIFt7XG4gICAga2V5OiAnZ2V0SXRlbScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldEl0ZW0ocm5nKSB7XG4gICAgICB2YXIgaWR4ID0gcm5nLmdldFJhbmRvbUludCgwLCB0aGlzLmxpc3QubGVuZ3RoKTtcbiAgICAgIHJldHVybiB0aGlzLmxpc3RbaWR4XTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gTGlzdFNvdXJjZTtcbn0oU291cmNlKTtcblxuZnVuY3Rpb24gZmxhdHRlbihhcnIpIHtcbiAgcmV0dXJuIGFyci5yZWR1Y2UoZnVuY3Rpb24gKGYsIGEpIHtcbiAgICByZXR1cm4gZi5jb25jYXQoQXJyYXkuaXNBcnJheShhKSA/IGZsYXR0ZW4oYSkgOiBhKTtcbiAgfSwgW10pO1xufVxuXG52YXIgUm5nT3ZlcnJpZGVTb3VyY2UgPSBmdW5jdGlvbiAoX1NvdXJjZTIpIHtcbiAgX2luaGVyaXRzKFJuZ092ZXJyaWRlU291cmNlLCBfU291cmNlMik7XG5cbiAgZnVuY3Rpb24gUm5nT3ZlcnJpZGVTb3VyY2Uoc3JjLCBybmcpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUm5nT3ZlcnJpZGVTb3VyY2UpO1xuXG4gICAgdmFyIF90aGlzMiA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChSbmdPdmVycmlkZVNvdXJjZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFJuZ092ZXJyaWRlU291cmNlKSkuY2FsbCh0aGlzKSk7XG5cbiAgICBfdGhpczIuc3JjID0gc3JjO1xuICAgIF90aGlzMi5ybmcgPSBybmc7XG4gICAgcmV0dXJuIF90aGlzMjtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhSbmdPdmVycmlkZVNvdXJjZSwgW3tcbiAgICBrZXk6ICdnZXRJdGVtJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SXRlbSgpIHtcbiAgICAgIHJldHVybiB0aGlzLnNyYy5nZXQodGhpcy5ybmcpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBSbmdPdmVycmlkZVNvdXJjZTtcbn0oU291cmNlKTtcblxudmFyIFJhbmdlU291cmNlID0gZnVuY3Rpb24gKF9Tb3VyY2UzKSB7XG4gIF9pbmhlcml0cyhSYW5nZVNvdXJjZSwgX1NvdXJjZTMpO1xuXG4gIGZ1bmN0aW9uIFJhbmdlU291cmNlKHNyYywgbWluLCBtYXgpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmFuZ2VTb3VyY2UpO1xuXG4gICAgdmFyIF90aGlzMyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChSYW5nZVNvdXJjZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFJhbmdlU291cmNlKSkuY2FsbCh0aGlzKSk7XG5cbiAgICBfdGhpczMuc3JjID0gc3JjO1xuICAgIF90aGlzMy5taW4gPSBtaW47XG4gICAgX3RoaXMzLm1heCA9IE1hdGgubWF4KG1heCB8fCAxLCBtaW4pO1xuICAgIHJldHVybiBfdGhpczM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUmFuZ2VTb3VyY2UsIFt7XG4gICAga2V5OiAnZ2V0SXRlbScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldEl0ZW0ocm5nKSB7XG5cbiAgICAgIHZhciByZXQgPSBbXTtcblxuICAgICAgdmFyIG4gPSAxO1xuICAgICAgaWYgKHRoaXMubWluICE9PSAxIHx8IHRoaXMubWF4ICE9PSAxKSBuID0gcm5nLmdldFJhbmRvbUludCh0aGlzLm1pbiwgdGhpcy5tYXggKyAxKTtcblxuICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgbjsgaWR4KyspIHtcbiAgICAgICAgLy9kb24ndCBwYXNzIHRoZSBwb3NzaWJseSBvdmVycmlkZW4gcm5nIGRvd24gdG8gdGhlIG5leHQgbGV2ZWwgKHByZXZlbnRzIGluZmluaXRlIG92ZXJyaWRlcylcbiAgICAgICAgcmV0LnB1c2godGhpcy5zcmMuZ2V0KCkpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmxhdHRlbihyZXQpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBSYW5nZVNvdXJjZTtcbn0oU291cmNlKTtcblxudmFyIEZsaXBTb3VyY2UgPSBleHBvcnRzLkZsaXBTb3VyY2UgPSBmdW5jdGlvbiAoX1NvdXJjZTQpIHtcbiAgX2luaGVyaXRzKEZsaXBTb3VyY2UsIF9Tb3VyY2U0KTtcblxuICBmdW5jdGlvbiBGbGlwU291cmNlKHNyYywgcHJvYiwgZGVmYXVsdFZhbHVlKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZsaXBTb3VyY2UpO1xuXG4gICAgdmFyIF90aGlzNCA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChGbGlwU291cmNlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRmxpcFNvdXJjZSkpLmNhbGwodGhpcykpO1xuXG4gICAgX3RoaXM0LnNyYyA9IHNyYztcbiAgICBfdGhpczQucHJvYiA9IHByb2IgfHwgMC41O1xuICAgIF90aGlzNC5kZWZhdWx0VmFsdWUgPSBkZWZhdWx0VmFsdWU7XG4gICAgcmV0dXJuIF90aGlzNDtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhGbGlwU291cmNlLCBbe1xuICAgIGtleTogJ2dldEl0ZW0nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJdGVtKHJuZykge1xuXG4gICAgICBpZiAocm5nLmdldFJhbmRvbUZsb2F0KCkgPCB0aGlzLnByb2IpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3JjLmdldCgpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5kZWZhdWx0VmFsdWUgJiYgdGhpcy5kZWZhdWx0VmFsdWUgaW5zdGFuY2VvZiBTb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdFZhbHVlLmdldCgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5kZWZhdWx0VmFsdWU7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIEZsaXBTb3VyY2U7XG59KFNvdXJjZSk7XG5cbnZhciBMaXRlcmFsU291cmNlID0gZnVuY3Rpb24gKF9Tb3VyY2U1KSB7XG4gIF9pbmhlcml0cyhMaXRlcmFsU291cmNlLCBfU291cmNlNSk7XG5cbiAgZnVuY3Rpb24gTGl0ZXJhbFNvdXJjZShsaXRlcmFsKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIExpdGVyYWxTb3VyY2UpO1xuXG4gICAgdmFyIF90aGlzNSA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChMaXRlcmFsU291cmNlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTGl0ZXJhbFNvdXJjZSkpLmNhbGwodGhpcykpO1xuXG4gICAgX3RoaXM1LmxpdGVyYWwgPSBsaXRlcmFsO1xuICAgIHJldHVybiBfdGhpczU7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoTGl0ZXJhbFNvdXJjZSwgW3tcbiAgICBrZXk6ICdnZXRJdGVtJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SXRlbSgpIHtcbiAgICAgIHJldHVybiB0aGlzLmxpdGVyYWw7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIExpdGVyYWxTb3VyY2U7XG59KFNvdXJjZSk7XG5cbnZhciBUb2tlblNvdXJjZSA9IGZ1bmN0aW9uIChfU291cmNlNikge1xuICBfaW5oZXJpdHMoVG9rZW5Tb3VyY2UsIF9Tb3VyY2U2KTtcblxuICBmdW5jdGlvbiBUb2tlblNvdXJjZSh0b2tlbnMpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVG9rZW5Tb3VyY2UpO1xuXG4gICAgdmFyIF90aGlzNiA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChUb2tlblNvdXJjZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFRva2VuU291cmNlKSkuY2FsbCh0aGlzKSk7XG5cbiAgICBfdGhpczYudG9rZW5zID0gdG9rZW5zO1xuICAgIHJldHVybiBfdGhpczY7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoVG9rZW5Tb3VyY2UsIFt7XG4gICAga2V5OiAnZ2V0SXRlbScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldEl0ZW0oKSB7XG5cbiAgICAgIHZhciByZXQgPSBbXTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnRva2Vucy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgdG9rZW4gPSB0aGlzLnRva2Vuc1tpXTtcblxuICAgICAgICBpZiAodG9rZW4gaW5zdGFuY2VvZiBTb3VyY2UpIHtcbiAgICAgICAgICByZXQucHVzaCh0b2tlbi5nZXQoKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0LnB1c2godG9rZW4pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmbGF0dGVuKHJldCk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFRva2VuU291cmNlO1xufShTb3VyY2UpO1xuXG52YXIgT25lT2ZUb2tlblNvdXJjZSA9IGV4cG9ydHMuT25lT2ZUb2tlblNvdXJjZSA9IGZ1bmN0aW9uIChfU291cmNlNykge1xuICBfaW5oZXJpdHMoT25lT2ZUb2tlblNvdXJjZSwgX1NvdXJjZTcpO1xuXG4gIGZ1bmN0aW9uIE9uZU9mVG9rZW5Tb3VyY2UodG9rZW5zKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE9uZU9mVG9rZW5Tb3VyY2UpO1xuXG4gICAgdmFyIF90aGlzNyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChPbmVPZlRva2VuU291cmNlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoT25lT2ZUb2tlblNvdXJjZSkpLmNhbGwodGhpcykpO1xuXG4gICAgX3RoaXM3LnRva2VucyA9IHRva2VucztcbiAgICByZXR1cm4gX3RoaXM3O1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKE9uZU9mVG9rZW5Tb3VyY2UsIFt7XG4gICAga2V5OiAnZ2V0SXRlbScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldEl0ZW0ocm5nKSB7XG4gICAgICB2YXIgaWR4ID0gcm5nLmdldFJhbmRvbUludCgwLCB0aGlzLnRva2Vucy5sZW5ndGgpO1xuXG4gICAgICB2YXIgdG9rZW4gPSB0aGlzLnRva2Vuc1tpZHhdO1xuXG4gICAgICBpZiAodG9rZW4gaW5zdGFuY2VvZiBTb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHRva2VuLmdldCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRva2VuO1xuICAgICAgfVxuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBPbmVPZlRva2VuU291cmNlO1xufShTb3VyY2UpO1xuXG52YXIgT2JqZWN0VG9rZW5Tb3VyY2UgPSBleHBvcnRzLk9iamVjdFRva2VuU291cmNlID0gZnVuY3Rpb24gKF9Tb3VyY2U4KSB7XG4gIF9pbmhlcml0cyhPYmplY3RUb2tlblNvdXJjZSwgX1NvdXJjZTgpO1xuXG4gIGZ1bmN0aW9uIE9iamVjdFRva2VuU291cmNlKG9iaikge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBPYmplY3RUb2tlblNvdXJjZSk7XG5cbiAgICB2YXIgX3RoaXM4ID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKE9iamVjdFRva2VuU291cmNlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoT2JqZWN0VG9rZW5Tb3VyY2UpKS5jYWxsKHRoaXMpKTtcblxuICAgIF90aGlzOC5vYmogPSBvYmo7XG4gICAgcmV0dXJuIF90aGlzODtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhPYmplY3RUb2tlblNvdXJjZSwgW3tcbiAgICBrZXk6ICdnZXRJdGVtJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SXRlbSgpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlc29sdmVWYWx1ZSh0aGlzLm9iaik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncmVzb2x2ZVZhbHVlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzb2x2ZVZhbHVlKHRva2VuLCBwYXJlbnQpIHtcblxuICAgICAgaWYgKHRva2VuID09PSBudWxsKSByZXR1cm4gbnVsbDtcblxuICAgICAgaWYgKHV0aWwuaXNVbmRlZmluZWQodG9rZW4pKSByZXR1cm4gdW5kZWZpbmVkO1xuXG4gICAgICBpZiAodG9rZW4gaW5zdGFuY2VvZiBTb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHRva2VuLmdldCgpO1xuICAgICAgfSBlbHNlIGlmICh1dGlsLmlzQXJyYXkodG9rZW4pKSB7XG4gICAgICAgIHZhciByZXQgPSBbXTtcblxuICAgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7XG4gICAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvciA9IGZhbHNlO1xuICAgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSB0b2tlbltTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHtcbiAgICAgICAgICAgIHZhciBvID0gX3N0ZXAudmFsdWU7XG5cbiAgICAgICAgICAgIHJldC5wdXNoKHRoaXMucmVzb2x2ZVZhbHVlKG8sIHBhcmVudCB8fCByZXQpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTtcbiAgICAgICAgICBfaXRlcmF0b3JFcnJvciA9IGVycjtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uICYmIF9pdGVyYXRvci5yZXR1cm4pIHtcbiAgICAgICAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHtcbiAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgIH0gZWxzZSBpZiAodXRpbC5pc0Z1bmN0aW9uKHRva2VuKSkge1xuICAgICAgICByZXR1cm4gdG9rZW4ocGFyZW50KTtcbiAgICAgIH0gZWxzZSBpZiAodXRpbC5pc09iamVjdCh0b2tlbikpIHtcbiAgICAgICAgdmFyIF9yZXQgPSB7fTtcblxuICAgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlO1xuICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IyID0gZmFsc2U7XG4gICAgICAgIHZhciBfaXRlcmF0b3JFcnJvcjIgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IyID0gT2JqZWN0LmtleXModG9rZW4pW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXAyOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gKF9zdGVwMiA9IF9pdGVyYXRvcjIubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlKSB7XG4gICAgICAgICAgICB2YXIga2V5ID0gX3N0ZXAyLnZhbHVlO1xuXG4gICAgICAgICAgICBfcmV0W2tleV0gPSB0aGlzLnJlc29sdmVWYWx1ZSh0b2tlbltrZXldLCBwYXJlbnQgfHwgX3JldCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjIgPSB0cnVlO1xuICAgICAgICAgIF9pdGVyYXRvckVycm9yMiA9IGVycjtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiAmJiBfaXRlcmF0b3IyLnJldHVybikge1xuICAgICAgICAgICAgICBfaXRlcmF0b3IyLnJldHVybigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IyKSB7XG4gICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gX3JldDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRva2VuO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBPYmplY3RUb2tlblNvdXJjZTtcbn0oU291cmNlKTtcblxudmFyIE1hcmtvdkNoYWluU291cmNlID0gZXhwb3J0cy5NYXJrb3ZDaGFpblNvdXJjZSA9IGZ1bmN0aW9uIChfU291cmNlOSkge1xuICBfaW5oZXJpdHMoTWFya292Q2hhaW5Tb3VyY2UsIF9Tb3VyY2U5KTtcblxuICBmdW5jdGlvbiBNYXJrb3ZDaGFpblNvdXJjZShvYmopIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTWFya292Q2hhaW5Tb3VyY2UpO1xuXG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChNYXJrb3ZDaGFpblNvdXJjZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE1hcmtvdkNoYWluU291cmNlKSkuY2FsbCh0aGlzKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoTWFya292Q2hhaW5Tb3VyY2UsIFt7XG4gICAga2V5OiAnZ2V0SXRlbScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldEl0ZW0oKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZXNvbHZlVmFsdWUodGhpcy5vYmopO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3Jlc29sdmVWYWx1ZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlc29sdmVWYWx1ZSh0b2tlbiwgcGFyZW50KSB7XG5cbiAgICAgIGlmICh0b2tlbiA9PT0gbnVsbCkgcmV0dXJuIG51bGw7XG5cbiAgICAgIGlmICh1dGlsLmlzVW5kZWZpbmVkKHRva2VuKSkgcmV0dXJuIHVuZGVmaW5lZDtcblxuICAgICAgaWYgKHRva2VuIGluc3RhbmNlb2YgU291cmNlKSB7XG4gICAgICAgIHJldHVybiB0b2tlbi5nZXQoKTtcbiAgICAgIH0gZWxzZSBpZiAodXRpbC5pc0FycmF5KHRva2VuKSkge1xuICAgICAgICB2YXIgcmV0ID0gW107XG5cbiAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zID0gdHJ1ZTtcbiAgICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yMyA9IGZhbHNlO1xuICAgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IzID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMyA9IHRva2VuW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXAzOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zID0gKF9zdGVwMyA9IF9pdGVyYXRvcjMubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgPSB0cnVlKSB7XG4gICAgICAgICAgICB2YXIgbyA9IF9zdGVwMy52YWx1ZTtcblxuICAgICAgICAgICAgcmV0LnB1c2godGhpcy5yZXNvbHZlVmFsdWUobywgcGFyZW50IHx8IHJldCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IzID0gdHJ1ZTtcbiAgICAgICAgICBfaXRlcmF0b3JFcnJvcjMgPSBlcnI7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgJiYgX2l0ZXJhdG9yMy5yZXR1cm4pIHtcbiAgICAgICAgICAgICAgX2l0ZXJhdG9yMy5yZXR1cm4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yMykge1xuICAgICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgIH0gZWxzZSBpZiAodXRpbC5pc0Z1bmN0aW9uKHRva2VuKSkge1xuICAgICAgICByZXR1cm4gdG9rZW4ocGFyZW50KTtcbiAgICAgIH0gZWxzZSBpZiAodXRpbC5pc09iamVjdCh0b2tlbikpIHtcbiAgICAgICAgdmFyIF9yZXQyID0ge307XG5cbiAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb240ID0gdHJ1ZTtcbiAgICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yNCA9IGZhbHNlO1xuICAgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3I0ID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yNCA9IE9iamVjdC5rZXlzKHRva2VuKVtTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwNDsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNCA9IChfc3RlcDQgPSBfaXRlcmF0b3I0Lm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb240ID0gdHJ1ZSkge1xuICAgICAgICAgICAgdmFyIGtleSA9IF9zdGVwNC52YWx1ZTtcblxuICAgICAgICAgICAgX3JldDJba2V5XSA9IHRoaXMucmVzb2x2ZVZhbHVlKHRva2VuW2tleV0sIHBhcmVudCB8fCBfcmV0Mik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjQgPSB0cnVlO1xuICAgICAgICAgIF9pdGVyYXRvckVycm9yNCA9IGVycjtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNCAmJiBfaXRlcmF0b3I0LnJldHVybikge1xuICAgICAgICAgICAgICBfaXRlcmF0b3I0LnJldHVybigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3I0KSB7XG4gICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yNDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gX3JldDI7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0b2tlbjtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gTWFya292Q2hhaW5Tb3VyY2U7XG59KFNvdXJjZSk7XG5cbnZhciBHZW5lcmF0b3IgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEdlbmVyYXRvcigpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgR2VuZXJhdG9yKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhHZW5lcmF0b3IsIFt7XG4gICAga2V5OiAnc2VlZFBybmcnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZWVkUHJuZyhzZWVkKSB7XG4gICAgICBkZWZhdWx0cy5kZWZhdWx0Um5nID0gbmV3IFBybmcoc2VlZHJhbmRvbShzZWVkKSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnbGl0ZXJhbCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGxpdGVyYWwobykge1xuICAgICAgcmV0dXJuIG5ldyBMaXRlcmFsU291cmNlKG8pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3Rva2VucycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHRva2VucygpIHtcbiAgICAgIHZhciBhcnIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xuICAgICAgcmV0dXJuIG5ldyBUb2tlblNvdXJjZShmbGF0dGVuKGFycikpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2xpc3QnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBsaXN0KGFycikge1xuICAgICAgcmV0dXJuIG5ldyBMaXN0U291cmNlKGFycik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb25lT2YnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbmVPZigpIHtcbiAgICAgIHZhciBhcnIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xuICAgICAgcmV0dXJuIG5ldyBPbmVPZlRva2VuU291cmNlKGFycik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnbWFwJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gbWFwKG9iaikge1xuICAgICAgcmV0dXJuIG5ldyBPYmplY3RUb2tlblNvdXJjZShvYmopO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBHZW5lcmF0b3I7XG59KCk7XG5cbmV4cG9ydHMuTGlzdFNvdXJjZSA9IExpc3RTb3VyY2U7XG5leHBvcnRzLlRva2VuU291cmNlID0gVG9rZW5Tb3VyY2U7XG5leHBvcnRzLkxpdGVyYWxTb3VyY2UgPSBMaXRlcmFsU291cmNlO1xuZXhwb3J0cy5SYW5nZVNvdXJjZSA9IFJhbmdlU291cmNlO1xuZXhwb3J0cy5SbmdPdmVycmlkZVNvdXJjZSA9IFJuZ092ZXJyaWRlU291cmNlO1xuZXhwb3J0cy5BYnN0cmFjdFNvdXJjZSA9IFNvdXJjZTtcbmV4cG9ydHMuUHJuZyA9IFBybmc7XG5leHBvcnRzLkRlZmF1bHRzID0gZGVmYXVsdHM7XG5leHBvcnRzLkdlbmVyYXRvciA9IEdlbmVyYXRvcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRyZC5qcy5tYXBcbiIsIi8vIEEgbGlicmFyeSBvZiBzZWVkYWJsZSBSTkdzIGltcGxlbWVudGVkIGluIEphdmFzY3JpcHQuXG4vL1xuLy8gVXNhZ2U6XG4vL1xuLy8gdmFyIHNlZWRyYW5kb20gPSByZXF1aXJlKCdzZWVkcmFuZG9tJyk7XG4vLyB2YXIgcmFuZG9tID0gc2VlZHJhbmRvbSgxKTsgLy8gb3IgYW55IHNlZWQuXG4vLyB2YXIgeCA9IHJhbmRvbSgpOyAgICAgICAvLyAwIDw9IHggPCAxLiAgRXZlcnkgYml0IGlzIHJhbmRvbS5cbi8vIHZhciB4ID0gcmFuZG9tLnF1aWNrKCk7IC8vIDAgPD0geCA8IDEuICAzMiBiaXRzIG9mIHJhbmRvbW5lc3MuXG5cbi8vIGFsZWEsIGEgNTMtYml0IG11bHRpcGx5LXdpdGgtY2FycnkgZ2VuZXJhdG9yIGJ5IEpvaGFubmVzIEJhYWfDuGUuXG4vLyBQZXJpb2Q6IH4yXjExNlxuLy8gUmVwb3J0ZWQgdG8gcGFzcyBhbGwgQmlnQ3J1c2ggdGVzdHMuXG52YXIgYWxlYSA9IHJlcXVpcmUoJy4vbGliL2FsZWEnKTtcblxuLy8geG9yMTI4LCBhIHB1cmUgeG9yLXNoaWZ0IGdlbmVyYXRvciBieSBHZW9yZ2UgTWFyc2FnbGlhLlxuLy8gUGVyaW9kOiAyXjEyOC0xLlxuLy8gUmVwb3J0ZWQgdG8gZmFpbDogTWF0cml4UmFuayBhbmQgTGluZWFyQ29tcC5cbnZhciB4b3IxMjggPSByZXF1aXJlKCcuL2xpYi94b3IxMjgnKTtcblxuLy8geG9yd293LCBHZW9yZ2UgTWFyc2FnbGlhJ3MgMTYwLWJpdCB4b3Itc2hpZnQgY29tYmluZWQgcGx1cyB3ZXlsLlxuLy8gUGVyaW9kOiAyXjE5Mi0yXjMyXG4vLyBSZXBvcnRlZCB0byBmYWlsOiBDb2xsaXNpb25PdmVyLCBTaW1wUG9rZXIsIGFuZCBMaW5lYXJDb21wLlxudmFyIHhvcndvdyA9IHJlcXVpcmUoJy4vbGliL3hvcndvdycpO1xuXG4vLyB4b3JzaGlmdDcsIGJ5IEZyYW7Dp29pcyBQYW5uZXRvbiBhbmQgUGllcnJlIEwnZWN1eWVyLCB0YWtlc1xuLy8gYSBkaWZmZXJlbnQgYXBwcm9hY2g6IGl0IGFkZHMgcm9idXN0bmVzcyBieSBhbGxvd2luZyBtb3JlIHNoaWZ0c1xuLy8gdGhhbiBNYXJzYWdsaWEncyBvcmlnaW5hbCB0aHJlZS4gIEl0IGlzIGEgNy1zaGlmdCBnZW5lcmF0b3Jcbi8vIHdpdGggMjU2IGJpdHMsIHRoYXQgcGFzc2VzIEJpZ0NydXNoIHdpdGggbm8gc3lzdG1hdGljIGZhaWx1cmVzLlxuLy8gUGVyaW9kIDJeMjU2LTEuXG4vLyBObyBzeXN0ZW1hdGljIEJpZ0NydXNoIGZhaWx1cmVzIHJlcG9ydGVkLlxudmFyIHhvcnNoaWZ0NyA9IHJlcXVpcmUoJy4vbGliL3hvcnNoaWZ0NycpO1xuXG4vLyB4b3I0MDk2LCBieSBSaWNoYXJkIEJyZW50LCBpcyBhIDQwOTYtYml0IHhvci1zaGlmdCB3aXRoIGFcbi8vIHZlcnkgbG9uZyBwZXJpb2QgdGhhdCBhbHNvIGFkZHMgYSBXZXlsIGdlbmVyYXRvci4gSXQgYWxzbyBwYXNzZXNcbi8vIEJpZ0NydXNoIHdpdGggbm8gc3lzdGVtYXRpYyBmYWlsdXJlcy4gIEl0cyBsb25nIHBlcmlvZCBtYXlcbi8vIGJlIHVzZWZ1bCBpZiB5b3UgaGF2ZSBtYW55IGdlbmVyYXRvcnMgYW5kIG5lZWQgdG8gYXZvaWRcbi8vIGNvbGxpc2lvbnMuXG4vLyBQZXJpb2Q6IDJeNDEyOC0yXjMyLlxuLy8gTm8gc3lzdGVtYXRpYyBCaWdDcnVzaCBmYWlsdXJlcyByZXBvcnRlZC5cbnZhciB4b3I0MDk2ID0gcmVxdWlyZSgnLi9saWIveG9yNDA5NicpO1xuXG4vLyBUeWNoZS1pLCBieSBTYW11ZWwgTmV2ZXMgYW5kIEZpbGlwZSBBcmF1am8sIGlzIGEgYml0LXNoaWZ0aW5nIHJhbmRvbVxuLy8gbnVtYmVyIGdlbmVyYXRvciBkZXJpdmVkIGZyb20gQ2hhQ2hhLCBhIG1vZGVybiBzdHJlYW0gY2lwaGVyLlxuLy8gaHR0cHM6Ly9lZGVuLmRlaS51Yy5wdC9+c25ldmVzL3B1YnMvMjAxMS1zbmZhMi5wZGZcbi8vIFBlcmlvZDogfjJeMTI3XG4vLyBObyBzeXN0ZW1hdGljIEJpZ0NydXNoIGZhaWx1cmVzIHJlcG9ydGVkLlxudmFyIHR5Y2hlaSA9IHJlcXVpcmUoJy4vbGliL3R5Y2hlaScpO1xuXG4vLyBUaGUgb3JpZ2luYWwgQVJDNC1iYXNlZCBwcm5nIGluY2x1ZGVkIGluIHRoaXMgbGlicmFyeS5cbi8vIFBlcmlvZDogfjJeMTYwMFxudmFyIHNyID0gcmVxdWlyZSgnLi9zZWVkcmFuZG9tJyk7XG5cbnNyLmFsZWEgPSBhbGVhO1xuc3IueG9yMTI4ID0geG9yMTI4O1xuc3IueG9yd293ID0geG9yd293O1xuc3IueG9yc2hpZnQ3ID0geG9yc2hpZnQ3O1xuc3IueG9yNDA5NiA9IHhvcjQwOTY7XG5zci50eWNoZWkgPSB0eWNoZWk7XG5cbm1vZHVsZS5leHBvcnRzID0gc3I7XG4iLCIvKlxuQ29weXJpZ2h0IDIwMTQgRGF2aWQgQmF1LlxuXG5QZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmdcbmEgY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG53aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG5kaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG9cbnBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0b1xudGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXG5UaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZVxuaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXG5FWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbk1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC5cbklOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZXG5DTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULFxuVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEVcblNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG4qL1xuXG4oZnVuY3Rpb24gKHBvb2wsIG1hdGgpIHtcbi8vXG4vLyBUaGUgZm9sbG93aW5nIGNvbnN0YW50cyBhcmUgcmVsYXRlZCB0byBJRUVFIDc1NCBsaW1pdHMuXG4vL1xudmFyIGdsb2JhbCA9IHRoaXMsXG4gICAgd2lkdGggPSAyNTYsICAgICAgICAvLyBlYWNoIFJDNCBvdXRwdXQgaXMgMCA8PSB4IDwgMjU2XG4gICAgY2h1bmtzID0gNiwgICAgICAgICAvLyBhdCBsZWFzdCBzaXggUkM0IG91dHB1dHMgZm9yIGVhY2ggZG91YmxlXG4gICAgZGlnaXRzID0gNTIsICAgICAgICAvLyB0aGVyZSBhcmUgNTIgc2lnbmlmaWNhbnQgZGlnaXRzIGluIGEgZG91YmxlXG4gICAgcm5nbmFtZSA9ICdyYW5kb20nLCAvLyBybmduYW1lOiBuYW1lIGZvciBNYXRoLnJhbmRvbSBhbmQgTWF0aC5zZWVkcmFuZG9tXG4gICAgc3RhcnRkZW5vbSA9IG1hdGgucG93KHdpZHRoLCBjaHVua3MpLFxuICAgIHNpZ25pZmljYW5jZSA9IG1hdGgucG93KDIsIGRpZ2l0cyksXG4gICAgb3ZlcmZsb3cgPSBzaWduaWZpY2FuY2UgKiAyLFxuICAgIG1hc2sgPSB3aWR0aCAtIDEsXG4gICAgbm9kZWNyeXB0bzsgICAgICAgICAvLyBub2RlLmpzIGNyeXB0byBtb2R1bGUsIGluaXRpYWxpemVkIGF0IHRoZSBib3R0b20uXG5cbi8vXG4vLyBzZWVkcmFuZG9tKClcbi8vIFRoaXMgaXMgdGhlIHNlZWRyYW5kb20gZnVuY3Rpb24gZGVzY3JpYmVkIGFib3ZlLlxuLy9cbmZ1bmN0aW9uIHNlZWRyYW5kb20oc2VlZCwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgdmFyIGtleSA9IFtdO1xuICBvcHRpb25zID0gKG9wdGlvbnMgPT0gdHJ1ZSkgPyB7IGVudHJvcHk6IHRydWUgfSA6IChvcHRpb25zIHx8IHt9KTtcblxuICAvLyBGbGF0dGVuIHRoZSBzZWVkIHN0cmluZyBvciBidWlsZCBvbmUgZnJvbSBsb2NhbCBlbnRyb3B5IGlmIG5lZWRlZC5cbiAgdmFyIHNob3J0c2VlZCA9IG1peGtleShmbGF0dGVuKFxuICAgIG9wdGlvbnMuZW50cm9weSA/IFtzZWVkLCB0b3N0cmluZyhwb29sKV0gOlxuICAgIChzZWVkID09IG51bGwpID8gYXV0b3NlZWQoKSA6IHNlZWQsIDMpLCBrZXkpO1xuXG4gIC8vIFVzZSB0aGUgc2VlZCB0byBpbml0aWFsaXplIGFuIEFSQzQgZ2VuZXJhdG9yLlxuICB2YXIgYXJjNCA9IG5ldyBBUkM0KGtleSk7XG5cbiAgLy8gVGhpcyBmdW5jdGlvbiByZXR1cm5zIGEgcmFuZG9tIGRvdWJsZSBpbiBbMCwgMSkgdGhhdCBjb250YWluc1xuICAvLyByYW5kb21uZXNzIGluIGV2ZXJ5IGJpdCBvZiB0aGUgbWFudGlzc2Egb2YgdGhlIElFRUUgNzU0IHZhbHVlLlxuICB2YXIgcHJuZyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBuID0gYXJjNC5nKGNodW5rcyksICAgICAgICAgICAgIC8vIFN0YXJ0IHdpdGggYSBudW1lcmF0b3IgbiA8IDIgXiA0OFxuICAgICAgICBkID0gc3RhcnRkZW5vbSwgICAgICAgICAgICAgICAgIC8vICAgYW5kIGRlbm9taW5hdG9yIGQgPSAyIF4gNDguXG4gICAgICAgIHggPSAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBhbmQgbm8gJ2V4dHJhIGxhc3QgYnl0ZScuXG4gICAgd2hpbGUgKG4gPCBzaWduaWZpY2FuY2UpIHsgICAgICAgICAgLy8gRmlsbCB1cCBhbGwgc2lnbmlmaWNhbnQgZGlnaXRzIGJ5XG4gICAgICBuID0gKG4gKyB4KSAqIHdpZHRoOyAgICAgICAgICAgICAgLy8gICBzaGlmdGluZyBudW1lcmF0b3IgYW5kXG4gICAgICBkICo9IHdpZHRoOyAgICAgICAgICAgICAgICAgICAgICAgLy8gICBkZW5vbWluYXRvciBhbmQgZ2VuZXJhdGluZyBhXG4gICAgICB4ID0gYXJjNC5nKDEpOyAgICAgICAgICAgICAgICAgICAgLy8gICBuZXcgbGVhc3Qtc2lnbmlmaWNhbnQtYnl0ZS5cbiAgICB9XG4gICAgd2hpbGUgKG4gPj0gb3ZlcmZsb3cpIHsgICAgICAgICAgICAgLy8gVG8gYXZvaWQgcm91bmRpbmcgdXAsIGJlZm9yZSBhZGRpbmdcbiAgICAgIG4gLz0gMjsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGxhc3QgYnl0ZSwgc2hpZnQgZXZlcnl0aGluZ1xuICAgICAgZCAvPSAyOyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgcmlnaHQgdXNpbmcgaW50ZWdlciBtYXRoIHVudGlsXG4gICAgICB4ID4+Pj0gMTsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICB3ZSBoYXZlIGV4YWN0bHkgdGhlIGRlc2lyZWQgYml0cy5cbiAgICB9XG4gICAgcmV0dXJuIChuICsgeCkgLyBkOyAgICAgICAgICAgICAgICAgLy8gRm9ybSB0aGUgbnVtYmVyIHdpdGhpbiBbMCwgMSkuXG4gIH07XG5cbiAgcHJuZy5pbnQzMiA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gYXJjNC5nKDQpIHwgMDsgfVxuICBwcm5nLnF1aWNrID0gZnVuY3Rpb24oKSB7IHJldHVybiBhcmM0LmcoNCkgLyAweDEwMDAwMDAwMDsgfVxuICBwcm5nLmRvdWJsZSA9IHBybmc7XG5cbiAgLy8gTWl4IHRoZSByYW5kb21uZXNzIGludG8gYWNjdW11bGF0ZWQgZW50cm9weS5cbiAgbWl4a2V5KHRvc3RyaW5nKGFyYzQuUyksIHBvb2wpO1xuXG4gIC8vIENhbGxpbmcgY29udmVudGlvbjogd2hhdCB0byByZXR1cm4gYXMgYSBmdW5jdGlvbiBvZiBwcm5nLCBzZWVkLCBpc19tYXRoLlxuICByZXR1cm4gKG9wdGlvbnMucGFzcyB8fCBjYWxsYmFjayB8fFxuICAgICAgZnVuY3Rpb24ocHJuZywgc2VlZCwgaXNfbWF0aF9jYWxsLCBzdGF0ZSkge1xuICAgICAgICBpZiAoc3RhdGUpIHtcbiAgICAgICAgICAvLyBMb2FkIHRoZSBhcmM0IHN0YXRlIGZyb20gdGhlIGdpdmVuIHN0YXRlIGlmIGl0IGhhcyBhbiBTIGFycmF5LlxuICAgICAgICAgIGlmIChzdGF0ZS5TKSB7IGNvcHkoc3RhdGUsIGFyYzQpOyB9XG4gICAgICAgICAgLy8gT25seSBwcm92aWRlIHRoZSAuc3RhdGUgbWV0aG9kIGlmIHJlcXVlc3RlZCB2aWEgb3B0aW9ucy5zdGF0ZS5cbiAgICAgICAgICBwcm5nLnN0YXRlID0gZnVuY3Rpb24oKSB7IHJldHVybiBjb3B5KGFyYzQsIHt9KTsgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgY2FsbGVkIGFzIGEgbWV0aG9kIG9mIE1hdGggKE1hdGguc2VlZHJhbmRvbSgpKSwgbXV0YXRlXG4gICAgICAgIC8vIE1hdGgucmFuZG9tIGJlY2F1c2UgdGhhdCBpcyBob3cgc2VlZHJhbmRvbS5qcyBoYXMgd29ya2VkIHNpbmNlIHYxLjAuXG4gICAgICAgIGlmIChpc19tYXRoX2NhbGwpIHsgbWF0aFtybmduYW1lXSA9IHBybmc7IHJldHVybiBzZWVkOyB9XG5cbiAgICAgICAgLy8gT3RoZXJ3aXNlLCBpdCBpcyBhIG5ld2VyIGNhbGxpbmcgY29udmVudGlvbiwgc28gcmV0dXJuIHRoZVxuICAgICAgICAvLyBwcm5nIGRpcmVjdGx5LlxuICAgICAgICBlbHNlIHJldHVybiBwcm5nO1xuICAgICAgfSkoXG4gIHBybmcsXG4gIHNob3J0c2VlZCxcbiAgJ2dsb2JhbCcgaW4gb3B0aW9ucyA/IG9wdGlvbnMuZ2xvYmFsIDogKHRoaXMgPT0gbWF0aCksXG4gIG9wdGlvbnMuc3RhdGUpO1xufVxubWF0aFsnc2VlZCcgKyBybmduYW1lXSA9IHNlZWRyYW5kb207XG5cbi8vXG4vLyBBUkM0XG4vL1xuLy8gQW4gQVJDNCBpbXBsZW1lbnRhdGlvbi4gIFRoZSBjb25zdHJ1Y3RvciB0YWtlcyBhIGtleSBpbiB0aGUgZm9ybSBvZlxuLy8gYW4gYXJyYXkgb2YgYXQgbW9zdCAod2lkdGgpIGludGVnZXJzIHRoYXQgc2hvdWxkIGJlIDAgPD0geCA8ICh3aWR0aCkuXG4vL1xuLy8gVGhlIGcoY291bnQpIG1ldGhvZCByZXR1cm5zIGEgcHNldWRvcmFuZG9tIGludGVnZXIgdGhhdCBjb25jYXRlbmF0ZXNcbi8vIHRoZSBuZXh0IChjb3VudCkgb3V0cHV0cyBmcm9tIEFSQzQuICBJdHMgcmV0dXJuIHZhbHVlIGlzIGEgbnVtYmVyIHhcbi8vIHRoYXQgaXMgaW4gdGhlIHJhbmdlIDAgPD0geCA8ICh3aWR0aCBeIGNvdW50KS5cbi8vXG5mdW5jdGlvbiBBUkM0KGtleSkge1xuICB2YXIgdCwga2V5bGVuID0ga2V5Lmxlbmd0aCxcbiAgICAgIG1lID0gdGhpcywgaSA9IDAsIGogPSBtZS5pID0gbWUuaiA9IDAsIHMgPSBtZS5TID0gW107XG5cbiAgLy8gVGhlIGVtcHR5IGtleSBbXSBpcyB0cmVhdGVkIGFzIFswXS5cbiAgaWYgKCFrZXlsZW4pIHsga2V5ID0gW2tleWxlbisrXTsgfVxuXG4gIC8vIFNldCB1cCBTIHVzaW5nIHRoZSBzdGFuZGFyZCBrZXkgc2NoZWR1bGluZyBhbGdvcml0aG0uXG4gIHdoaWxlIChpIDwgd2lkdGgpIHtcbiAgICBzW2ldID0gaSsrO1xuICB9XG4gIGZvciAoaSA9IDA7IGkgPCB3aWR0aDsgaSsrKSB7XG4gICAgc1tpXSA9IHNbaiA9IG1hc2sgJiAoaiArIGtleVtpICUga2V5bGVuXSArICh0ID0gc1tpXSkpXTtcbiAgICBzW2pdID0gdDtcbiAgfVxuXG4gIC8vIFRoZSBcImdcIiBtZXRob2QgcmV0dXJucyB0aGUgbmV4dCAoY291bnQpIG91dHB1dHMgYXMgb25lIG51bWJlci5cbiAgKG1lLmcgPSBmdW5jdGlvbihjb3VudCkge1xuICAgIC8vIFVzaW5nIGluc3RhbmNlIG1lbWJlcnMgaW5zdGVhZCBvZiBjbG9zdXJlIHN0YXRlIG5lYXJseSBkb3VibGVzIHNwZWVkLlxuICAgIHZhciB0LCByID0gMCxcbiAgICAgICAgaSA9IG1lLmksIGogPSBtZS5qLCBzID0gbWUuUztcbiAgICB3aGlsZSAoY291bnQtLSkge1xuICAgICAgdCA9IHNbaSA9IG1hc2sgJiAoaSArIDEpXTtcbiAgICAgIHIgPSByICogd2lkdGggKyBzW21hc2sgJiAoKHNbaV0gPSBzW2ogPSBtYXNrICYgKGogKyB0KV0pICsgKHNbal0gPSB0KSldO1xuICAgIH1cbiAgICBtZS5pID0gaTsgbWUuaiA9IGo7XG4gICAgcmV0dXJuIHI7XG4gICAgLy8gRm9yIHJvYnVzdCB1bnByZWRpY3RhYmlsaXR5LCB0aGUgZnVuY3Rpb24gY2FsbCBiZWxvdyBhdXRvbWF0aWNhbGx5XG4gICAgLy8gZGlzY2FyZHMgYW4gaW5pdGlhbCBiYXRjaCBvZiB2YWx1ZXMuICBUaGlzIGlzIGNhbGxlZCBSQzQtZHJvcFsyNTZdLlxuICAgIC8vIFNlZSBodHRwOi8vZ29vZ2xlLmNvbS9zZWFyY2g/cT1yc2ErZmx1aHJlcityZXNwb25zZSZidG5JXG4gIH0pKHdpZHRoKTtcbn1cblxuLy9cbi8vIGNvcHkoKVxuLy8gQ29waWVzIGludGVybmFsIHN0YXRlIG9mIEFSQzQgdG8gb3IgZnJvbSBhIHBsYWluIG9iamVjdC5cbi8vXG5mdW5jdGlvbiBjb3B5KGYsIHQpIHtcbiAgdC5pID0gZi5pO1xuICB0LmogPSBmLmo7XG4gIHQuUyA9IGYuUy5zbGljZSgpO1xuICByZXR1cm4gdDtcbn07XG5cbi8vXG4vLyBmbGF0dGVuKClcbi8vIENvbnZlcnRzIGFuIG9iamVjdCB0cmVlIHRvIG5lc3RlZCBhcnJheXMgb2Ygc3RyaW5ncy5cbi8vXG5mdW5jdGlvbiBmbGF0dGVuKG9iaiwgZGVwdGgpIHtcbiAgdmFyIHJlc3VsdCA9IFtdLCB0eXAgPSAodHlwZW9mIG9iaiksIHByb3A7XG4gIGlmIChkZXB0aCAmJiB0eXAgPT0gJ29iamVjdCcpIHtcbiAgICBmb3IgKHByb3AgaW4gb2JqKSB7XG4gICAgICB0cnkgeyByZXN1bHQucHVzaChmbGF0dGVuKG9ialtwcm9wXSwgZGVwdGggLSAxKSk7IH0gY2F0Y2ggKGUpIHt9XG4gICAgfVxuICB9XG4gIHJldHVybiAocmVzdWx0Lmxlbmd0aCA/IHJlc3VsdCA6IHR5cCA9PSAnc3RyaW5nJyA/IG9iaiA6IG9iaiArICdcXDAnKTtcbn1cblxuLy9cbi8vIG1peGtleSgpXG4vLyBNaXhlcyBhIHN0cmluZyBzZWVkIGludG8gYSBrZXkgdGhhdCBpcyBhbiBhcnJheSBvZiBpbnRlZ2VycywgYW5kXG4vLyByZXR1cm5zIGEgc2hvcnRlbmVkIHN0cmluZyBzZWVkIHRoYXQgaXMgZXF1aXZhbGVudCB0byB0aGUgcmVzdWx0IGtleS5cbi8vXG5mdW5jdGlvbiBtaXhrZXkoc2VlZCwga2V5KSB7XG4gIHZhciBzdHJpbmdzZWVkID0gc2VlZCArICcnLCBzbWVhciwgaiA9IDA7XG4gIHdoaWxlIChqIDwgc3RyaW5nc2VlZC5sZW5ndGgpIHtcbiAgICBrZXlbbWFzayAmIGpdID1cbiAgICAgIG1hc2sgJiAoKHNtZWFyIF49IGtleVttYXNrICYgal0gKiAxOSkgKyBzdHJpbmdzZWVkLmNoYXJDb2RlQXQoaisrKSk7XG4gIH1cbiAgcmV0dXJuIHRvc3RyaW5nKGtleSk7XG59XG5cbi8vXG4vLyBhdXRvc2VlZCgpXG4vLyBSZXR1cm5zIGFuIG9iamVjdCBmb3IgYXV0b3NlZWRpbmcsIHVzaW5nIHdpbmRvdy5jcnlwdG8gYW5kIE5vZGUgY3J5cHRvXG4vLyBtb2R1bGUgaWYgYXZhaWxhYmxlLlxuLy9cbmZ1bmN0aW9uIGF1dG9zZWVkKCkge1xuICB0cnkge1xuICAgIGlmIChub2RlY3J5cHRvKSB7IHJldHVybiB0b3N0cmluZyhub2RlY3J5cHRvLnJhbmRvbUJ5dGVzKHdpZHRoKSk7IH1cbiAgICB2YXIgb3V0ID0gbmV3IFVpbnQ4QXJyYXkod2lkdGgpO1xuICAgIChnbG9iYWwuY3J5cHRvIHx8IGdsb2JhbC5tc0NyeXB0bykuZ2V0UmFuZG9tVmFsdWVzKG91dCk7XG4gICAgcmV0dXJuIHRvc3RyaW5nKG91dCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB2YXIgYnJvd3NlciA9IGdsb2JhbC5uYXZpZ2F0b3IsXG4gICAgICAgIHBsdWdpbnMgPSBicm93c2VyICYmIGJyb3dzZXIucGx1Z2lucztcbiAgICByZXR1cm4gWytuZXcgRGF0ZSwgZ2xvYmFsLCBwbHVnaW5zLCBnbG9iYWwuc2NyZWVuLCB0b3N0cmluZyhwb29sKV07XG4gIH1cbn1cblxuLy9cbi8vIHRvc3RyaW5nKClcbi8vIENvbnZlcnRzIGFuIGFycmF5IG9mIGNoYXJjb2RlcyB0byBhIHN0cmluZ1xuLy9cbmZ1bmN0aW9uIHRvc3RyaW5nKGEpIHtcbiAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoMCwgYSk7XG59XG5cbi8vXG4vLyBXaGVuIHNlZWRyYW5kb20uanMgaXMgbG9hZGVkLCB3ZSBpbW1lZGlhdGVseSBtaXggYSBmZXcgYml0c1xuLy8gZnJvbSB0aGUgYnVpbHQtaW4gUk5HIGludG8gdGhlIGVudHJvcHkgcG9vbC4gIEJlY2F1c2Ugd2UgZG9cbi8vIG5vdCB3YW50IHRvIGludGVyZmVyZSB3aXRoIGRldGVybWluaXN0aWMgUFJORyBzdGF0ZSBsYXRlcixcbi8vIHNlZWRyYW5kb20gd2lsbCBub3QgY2FsbCBtYXRoLnJhbmRvbSBvbiBpdHMgb3duIGFnYWluIGFmdGVyXG4vLyBpbml0aWFsaXphdGlvbi5cbi8vXG5taXhrZXkobWF0aC5yYW5kb20oKSwgcG9vbCk7XG5cbi8vXG4vLyBOb2RlanMgYW5kIEFNRCBzdXBwb3J0OiBleHBvcnQgdGhlIGltcGxlbWVudGF0aW9uIGFzIGEgbW9kdWxlIHVzaW5nXG4vLyBlaXRoZXIgY29udmVudGlvbi5cbi8vXG5pZiAoKHR5cGVvZiBtb2R1bGUpID09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gc2VlZHJhbmRvbTtcbiAgLy8gV2hlbiBpbiBub2RlLmpzLCB0cnkgdXNpbmcgY3J5cHRvIHBhY2thZ2UgZm9yIGF1dG9zZWVkaW5nLlxuICB0cnkge1xuICAgIG5vZGVjcnlwdG8gPSByZXF1aXJlKCdjcnlwdG8nKTtcbiAgfSBjYXRjaCAoZXgpIHt9XG59IGVsc2UgaWYgKCh0eXBlb2YgZGVmaW5lKSA9PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgZGVmaW5lKGZ1bmN0aW9uKCkgeyByZXR1cm4gc2VlZHJhbmRvbTsgfSk7XG59XG5cbi8vIEVuZCBhbm9ueW1vdXMgc2NvcGUsIGFuZCBwYXNzIGluaXRpYWwgdmFsdWVzLlxufSkoXG4gIFtdLCAgICAgLy8gcG9vbDogZW50cm9weSBwb29sIHN0YXJ0cyBlbXB0eVxuICBNYXRoICAgIC8vIG1hdGg6IHBhY2thZ2UgY29udGFpbmluZyByYW5kb20sIHBvdywgYW5kIHNlZWRyYW5kb21cbik7XG4iLG51bGwsImlmICh0eXBlb2YgT2JqZWN0LmNyZWF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAvLyBpbXBsZW1lbnRhdGlvbiBmcm9tIHN0YW5kYXJkIG5vZGUuanMgJ3V0aWwnIG1vZHVsZVxuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaGVyaXRzKGN0b3IsIHN1cGVyQ3Rvcikge1xuICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yXG4gICAgY3Rvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ3Rvci5wcm90b3R5cGUsIHtcbiAgICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICAgIHZhbHVlOiBjdG9yLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuICB9O1xufSBlbHNlIHtcbiAgLy8gb2xkIHNjaG9vbCBzaGltIGZvciBvbGQgYnJvd3NlcnNcbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHtcbiAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuICAgIHZhciBUZW1wQ3RvciA9IGZ1bmN0aW9uICgpIHt9XG4gICAgVGVtcEN0b3IucHJvdG90eXBlID0gc3VwZXJDdG9yLnByb3RvdHlwZVxuICAgIGN0b3IucHJvdG90eXBlID0gbmV3IFRlbXBDdG9yKClcbiAgICBjdG9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGN0b3JcbiAgfVxufVxuIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcbiIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNCdWZmZXIoYXJnKSB7XG4gIHJldHVybiBhcmcgJiYgdHlwZW9mIGFyZyA9PT0gJ29iamVjdCdcbiAgICAmJiB0eXBlb2YgYXJnLmNvcHkgPT09ICdmdW5jdGlvbidcbiAgICAmJiB0eXBlb2YgYXJnLmZpbGwgPT09ICdmdW5jdGlvbidcbiAgICAmJiB0eXBlb2YgYXJnLnJlYWRVSW50OCA9PT0gJ2Z1bmN0aW9uJztcbn0iLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxudmFyIGZvcm1hdFJlZ0V4cCA9IC8lW3NkaiVdL2c7XG5leHBvcnRzLmZvcm1hdCA9IGZ1bmN0aW9uKGYpIHtcbiAgaWYgKCFpc1N0cmluZyhmKSkge1xuICAgIHZhciBvYmplY3RzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIG9iamVjdHMucHVzaChpbnNwZWN0KGFyZ3VtZW50c1tpXSkpO1xuICAgIH1cbiAgICByZXR1cm4gb2JqZWN0cy5qb2luKCcgJyk7XG4gIH1cblxuICB2YXIgaSA9IDE7XG4gIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICB2YXIgbGVuID0gYXJncy5sZW5ndGg7XG4gIHZhciBzdHIgPSBTdHJpbmcoZikucmVwbGFjZShmb3JtYXRSZWdFeHAsIGZ1bmN0aW9uKHgpIHtcbiAgICBpZiAoeCA9PT0gJyUlJykgcmV0dXJuICclJztcbiAgICBpZiAoaSA+PSBsZW4pIHJldHVybiB4O1xuICAgIHN3aXRjaCAoeCkge1xuICAgICAgY2FzZSAnJXMnOiByZXR1cm4gU3RyaW5nKGFyZ3NbaSsrXSk7XG4gICAgICBjYXNlICclZCc6IHJldHVybiBOdW1iZXIoYXJnc1tpKytdKTtcbiAgICAgIGNhc2UgJyVqJzpcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoYXJnc1tpKytdKTtcbiAgICAgICAgfSBjYXRjaCAoXykge1xuICAgICAgICAgIHJldHVybiAnW0NpcmN1bGFyXSc7XG4gICAgICAgIH1cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB4O1xuICAgIH1cbiAgfSk7XG4gIGZvciAodmFyIHggPSBhcmdzW2ldOyBpIDwgbGVuOyB4ID0gYXJnc1srK2ldKSB7XG4gICAgaWYgKGlzTnVsbCh4KSB8fCAhaXNPYmplY3QoeCkpIHtcbiAgICAgIHN0ciArPSAnICcgKyB4O1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHIgKz0gJyAnICsgaW5zcGVjdCh4KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHN0cjtcbn07XG5cblxuLy8gTWFyayB0aGF0IGEgbWV0aG9kIHNob3VsZCBub3QgYmUgdXNlZC5cbi8vIFJldHVybnMgYSBtb2RpZmllZCBmdW5jdGlvbiB3aGljaCB3YXJucyBvbmNlIGJ5IGRlZmF1bHQuXG4vLyBJZiAtLW5vLWRlcHJlY2F0aW9uIGlzIHNldCwgdGhlbiBpdCBpcyBhIG5vLW9wLlxuZXhwb3J0cy5kZXByZWNhdGUgPSBmdW5jdGlvbihmbiwgbXNnKSB7XG4gIC8vIEFsbG93IGZvciBkZXByZWNhdGluZyB0aGluZ3MgaW4gdGhlIHByb2Nlc3Mgb2Ygc3RhcnRpbmcgdXAuXG4gIGlmIChpc1VuZGVmaW5lZChnbG9iYWwucHJvY2VzcykpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZXhwb3J0cy5kZXByZWNhdGUoZm4sIG1zZykuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9XG5cbiAgaWYgKHByb2Nlc3Mubm9EZXByZWNhdGlvbiA9PT0gdHJ1ZSkge1xuICAgIHJldHVybiBmbjtcbiAgfVxuXG4gIHZhciB3YXJuZWQgPSBmYWxzZTtcbiAgZnVuY3Rpb24gZGVwcmVjYXRlZCgpIHtcbiAgICBpZiAoIXdhcm5lZCkge1xuICAgICAgaWYgKHByb2Nlc3MudGhyb3dEZXByZWNhdGlvbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTtcbiAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy50cmFjZURlcHJlY2F0aW9uKSB7XG4gICAgICAgIGNvbnNvbGUudHJhY2UobXNnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IobXNnKTtcbiAgICAgIH1cbiAgICAgIHdhcm5lZCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgcmV0dXJuIGRlcHJlY2F0ZWQ7XG59O1xuXG5cbnZhciBkZWJ1Z3MgPSB7fTtcbnZhciBkZWJ1Z0Vudmlyb247XG5leHBvcnRzLmRlYnVnbG9nID0gZnVuY3Rpb24oc2V0KSB7XG4gIGlmIChpc1VuZGVmaW5lZChkZWJ1Z0Vudmlyb24pKVxuICAgIGRlYnVnRW52aXJvbiA9IHByb2Nlc3MuZW52Lk5PREVfREVCVUcgfHwgJyc7XG4gIHNldCA9IHNldC50b1VwcGVyQ2FzZSgpO1xuICBpZiAoIWRlYnVnc1tzZXRdKSB7XG4gICAgaWYgKG5ldyBSZWdFeHAoJ1xcXFxiJyArIHNldCArICdcXFxcYicsICdpJykudGVzdChkZWJ1Z0Vudmlyb24pKSB7XG4gICAgICB2YXIgcGlkID0gcHJvY2Vzcy5waWQ7XG4gICAgICBkZWJ1Z3Nbc2V0XSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbXNnID0gZXhwb3J0cy5mb3JtYXQuYXBwbHkoZXhwb3J0cywgYXJndW1lbnRzKTtcbiAgICAgICAgY29uc29sZS5lcnJvcignJXMgJWQ6ICVzJywgc2V0LCBwaWQsIG1zZyk7XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1Z3Nbc2V0XSA9IGZ1bmN0aW9uKCkge307XG4gICAgfVxuICB9XG4gIHJldHVybiBkZWJ1Z3Nbc2V0XTtcbn07XG5cblxuLyoqXG4gKiBFY2hvcyB0aGUgdmFsdWUgb2YgYSB2YWx1ZS4gVHJ5cyB0byBwcmludCB0aGUgdmFsdWUgb3V0XG4gKiBpbiB0aGUgYmVzdCB3YXkgcG9zc2libGUgZ2l2ZW4gdGhlIGRpZmZlcmVudCB0eXBlcy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gcHJpbnQgb3V0LlxuICogQHBhcmFtIHtPYmplY3R9IG9wdHMgT3B0aW9uYWwgb3B0aW9ucyBvYmplY3QgdGhhdCBhbHRlcnMgdGhlIG91dHB1dC5cbiAqL1xuLyogbGVnYWN5OiBvYmosIHNob3dIaWRkZW4sIGRlcHRoLCBjb2xvcnMqL1xuZnVuY3Rpb24gaW5zcGVjdChvYmosIG9wdHMpIHtcbiAgLy8gZGVmYXVsdCBvcHRpb25zXG4gIHZhciBjdHggPSB7XG4gICAgc2VlbjogW10sXG4gICAgc3R5bGl6ZTogc3R5bGl6ZU5vQ29sb3JcbiAgfTtcbiAgLy8gbGVnYWN5Li4uXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID49IDMpIGN0eC5kZXB0aCA9IGFyZ3VtZW50c1syXTtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gNCkgY3R4LmNvbG9ycyA9IGFyZ3VtZW50c1szXTtcbiAgaWYgKGlzQm9vbGVhbihvcHRzKSkge1xuICAgIC8vIGxlZ2FjeS4uLlxuICAgIGN0eC5zaG93SGlkZGVuID0gb3B0cztcbiAgfSBlbHNlIGlmIChvcHRzKSB7XG4gICAgLy8gZ290IGFuIFwib3B0aW9uc1wiIG9iamVjdFxuICAgIGV4cG9ydHMuX2V4dGVuZChjdHgsIG9wdHMpO1xuICB9XG4gIC8vIHNldCBkZWZhdWx0IG9wdGlvbnNcbiAgaWYgKGlzVW5kZWZpbmVkKGN0eC5zaG93SGlkZGVuKSkgY3R4LnNob3dIaWRkZW4gPSBmYWxzZTtcbiAgaWYgKGlzVW5kZWZpbmVkKGN0eC5kZXB0aCkpIGN0eC5kZXB0aCA9IDI7XG4gIGlmIChpc1VuZGVmaW5lZChjdHguY29sb3JzKSkgY3R4LmNvbG9ycyA9IGZhbHNlO1xuICBpZiAoaXNVbmRlZmluZWQoY3R4LmN1c3RvbUluc3BlY3QpKSBjdHguY3VzdG9tSW5zcGVjdCA9IHRydWU7XG4gIGlmIChjdHguY29sb3JzKSBjdHguc3R5bGl6ZSA9IHN0eWxpemVXaXRoQ29sb3I7XG4gIHJldHVybiBmb3JtYXRWYWx1ZShjdHgsIG9iaiwgY3R4LmRlcHRoKTtcbn1cbmV4cG9ydHMuaW5zcGVjdCA9IGluc3BlY3Q7XG5cblxuLy8gaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9BTlNJX2VzY2FwZV9jb2RlI2dyYXBoaWNzXG5pbnNwZWN0LmNvbG9ycyA9IHtcbiAgJ2JvbGQnIDogWzEsIDIyXSxcbiAgJ2l0YWxpYycgOiBbMywgMjNdLFxuICAndW5kZXJsaW5lJyA6IFs0LCAyNF0sXG4gICdpbnZlcnNlJyA6IFs3LCAyN10sXG4gICd3aGl0ZScgOiBbMzcsIDM5XSxcbiAgJ2dyZXknIDogWzkwLCAzOV0sXG4gICdibGFjaycgOiBbMzAsIDM5XSxcbiAgJ2JsdWUnIDogWzM0LCAzOV0sXG4gICdjeWFuJyA6IFszNiwgMzldLFxuICAnZ3JlZW4nIDogWzMyLCAzOV0sXG4gICdtYWdlbnRhJyA6IFszNSwgMzldLFxuICAncmVkJyA6IFszMSwgMzldLFxuICAneWVsbG93JyA6IFszMywgMzldXG59O1xuXG4vLyBEb24ndCB1c2UgJ2JsdWUnIG5vdCB2aXNpYmxlIG9uIGNtZC5leGVcbmluc3BlY3Quc3R5bGVzID0ge1xuICAnc3BlY2lhbCc6ICdjeWFuJyxcbiAgJ251bWJlcic6ICd5ZWxsb3cnLFxuICAnYm9vbGVhbic6ICd5ZWxsb3cnLFxuICAndW5kZWZpbmVkJzogJ2dyZXknLFxuICAnbnVsbCc6ICdib2xkJyxcbiAgJ3N0cmluZyc6ICdncmVlbicsXG4gICdkYXRlJzogJ21hZ2VudGEnLFxuICAvLyBcIm5hbWVcIjogaW50ZW50aW9uYWxseSBub3Qgc3R5bGluZ1xuICAncmVnZXhwJzogJ3JlZCdcbn07XG5cblxuZnVuY3Rpb24gc3R5bGl6ZVdpdGhDb2xvcihzdHIsIHN0eWxlVHlwZSkge1xuICB2YXIgc3R5bGUgPSBpbnNwZWN0LnN0eWxlc1tzdHlsZVR5cGVdO1xuXG4gIGlmIChzdHlsZSkge1xuICAgIHJldHVybiAnXFx1MDAxYlsnICsgaW5zcGVjdC5jb2xvcnNbc3R5bGVdWzBdICsgJ20nICsgc3RyICtcbiAgICAgICAgICAgJ1xcdTAwMWJbJyArIGluc3BlY3QuY29sb3JzW3N0eWxlXVsxXSArICdtJztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gc3RyO1xuICB9XG59XG5cblxuZnVuY3Rpb24gc3R5bGl6ZU5vQ29sb3Ioc3RyLCBzdHlsZVR5cGUpIHtcbiAgcmV0dXJuIHN0cjtcbn1cblxuXG5mdW5jdGlvbiBhcnJheVRvSGFzaChhcnJheSkge1xuICB2YXIgaGFzaCA9IHt9O1xuXG4gIGFycmF5LmZvckVhY2goZnVuY3Rpb24odmFsLCBpZHgpIHtcbiAgICBoYXNoW3ZhbF0gPSB0cnVlO1xuICB9KTtcblxuICByZXR1cm4gaGFzaDtcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRWYWx1ZShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMpIHtcbiAgLy8gUHJvdmlkZSBhIGhvb2sgZm9yIHVzZXItc3BlY2lmaWVkIGluc3BlY3QgZnVuY3Rpb25zLlxuICAvLyBDaGVjayB0aGF0IHZhbHVlIGlzIGFuIG9iamVjdCB3aXRoIGFuIGluc3BlY3QgZnVuY3Rpb24gb24gaXRcbiAgaWYgKGN0eC5jdXN0b21JbnNwZWN0ICYmXG4gICAgICB2YWx1ZSAmJlxuICAgICAgaXNGdW5jdGlvbih2YWx1ZS5pbnNwZWN0KSAmJlxuICAgICAgLy8gRmlsdGVyIG91dCB0aGUgdXRpbCBtb2R1bGUsIGl0J3MgaW5zcGVjdCBmdW5jdGlvbiBpcyBzcGVjaWFsXG4gICAgICB2YWx1ZS5pbnNwZWN0ICE9PSBleHBvcnRzLmluc3BlY3QgJiZcbiAgICAgIC8vIEFsc28gZmlsdGVyIG91dCBhbnkgcHJvdG90eXBlIG9iamVjdHMgdXNpbmcgdGhlIGNpcmN1bGFyIGNoZWNrLlxuICAgICAgISh2YWx1ZS5jb25zdHJ1Y3RvciAmJiB2YWx1ZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgPT09IHZhbHVlKSkge1xuICAgIHZhciByZXQgPSB2YWx1ZS5pbnNwZWN0KHJlY3Vyc2VUaW1lcywgY3R4KTtcbiAgICBpZiAoIWlzU3RyaW5nKHJldCkpIHtcbiAgICAgIHJldCA9IGZvcm1hdFZhbHVlKGN0eCwgcmV0LCByZWN1cnNlVGltZXMpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xuICB9XG5cbiAgLy8gUHJpbWl0aXZlIHR5cGVzIGNhbm5vdCBoYXZlIHByb3BlcnRpZXNcbiAgdmFyIHByaW1pdGl2ZSA9IGZvcm1hdFByaW1pdGl2ZShjdHgsIHZhbHVlKTtcbiAgaWYgKHByaW1pdGl2ZSkge1xuICAgIHJldHVybiBwcmltaXRpdmU7XG4gIH1cblxuICAvLyBMb29rIHVwIHRoZSBrZXlzIG9mIHRoZSBvYmplY3QuXG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXModmFsdWUpO1xuICB2YXIgdmlzaWJsZUtleXMgPSBhcnJheVRvSGFzaChrZXlzKTtcblxuICBpZiAoY3R4LnNob3dIaWRkZW4pIHtcbiAgICBrZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModmFsdWUpO1xuICB9XG5cbiAgLy8gSUUgZG9lc24ndCBtYWtlIGVycm9yIGZpZWxkcyBub24tZW51bWVyYWJsZVxuICAvLyBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvaWUvZHd3NTJzYnQodj12cy45NCkuYXNweFxuICBpZiAoaXNFcnJvcih2YWx1ZSlcbiAgICAgICYmIChrZXlzLmluZGV4T2YoJ21lc3NhZ2UnKSA+PSAwIHx8IGtleXMuaW5kZXhPZignZGVzY3JpcHRpb24nKSA+PSAwKSkge1xuICAgIHJldHVybiBmb3JtYXRFcnJvcih2YWx1ZSk7XG4gIH1cblxuICAvLyBTb21lIHR5cGUgb2Ygb2JqZWN0IHdpdGhvdXQgcHJvcGVydGllcyBjYW4gYmUgc2hvcnRjdXR0ZWQuXG4gIGlmIChrZXlzLmxlbmd0aCA9PT0gMCkge1xuICAgIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgICAgdmFyIG5hbWUgPSB2YWx1ZS5uYW1lID8gJzogJyArIHZhbHVlLm5hbWUgOiAnJztcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZSgnW0Z1bmN0aW9uJyArIG5hbWUgKyAnXScsICdzcGVjaWFsJyk7XG4gICAgfVxuICAgIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZShSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLCAncmVnZXhwJyk7XG4gICAgfVxuICAgIGlmIChpc0RhdGUodmFsdWUpKSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoRGF0ZS5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdkYXRlJyk7XG4gICAgfVxuICAgIGlmIChpc0Vycm9yKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGZvcm1hdEVycm9yKHZhbHVlKTtcbiAgICB9XG4gIH1cblxuICB2YXIgYmFzZSA9ICcnLCBhcnJheSA9IGZhbHNlLCBicmFjZXMgPSBbJ3snLCAnfSddO1xuXG4gIC8vIE1ha2UgQXJyYXkgc2F5IHRoYXQgdGhleSBhcmUgQXJyYXlcbiAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgYXJyYXkgPSB0cnVlO1xuICAgIGJyYWNlcyA9IFsnWycsICddJ107XG4gIH1cblxuICAvLyBNYWtlIGZ1bmN0aW9ucyBzYXkgdGhhdCB0aGV5IGFyZSBmdW5jdGlvbnNcbiAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgdmFyIG4gPSB2YWx1ZS5uYW1lID8gJzogJyArIHZhbHVlLm5hbWUgOiAnJztcbiAgICBiYXNlID0gJyBbRnVuY3Rpb24nICsgbiArICddJztcbiAgfVxuXG4gIC8vIE1ha2UgUmVnRXhwcyBzYXkgdGhhdCB0aGV5IGFyZSBSZWdFeHBzXG4gIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcbiAgICBiYXNlID0gJyAnICsgUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKTtcbiAgfVxuXG4gIC8vIE1ha2UgZGF0ZXMgd2l0aCBwcm9wZXJ0aWVzIGZpcnN0IHNheSB0aGUgZGF0ZVxuICBpZiAoaXNEYXRlKHZhbHVlKSkge1xuICAgIGJhc2UgPSAnICcgKyBEYXRlLnByb3RvdHlwZS50b1VUQ1N0cmluZy5jYWxsKHZhbHVlKTtcbiAgfVxuXG4gIC8vIE1ha2UgZXJyb3Igd2l0aCBtZXNzYWdlIGZpcnN0IHNheSB0aGUgZXJyb3JcbiAgaWYgKGlzRXJyb3IodmFsdWUpKSB7XG4gICAgYmFzZSA9ICcgJyArIGZvcm1hdEVycm9yKHZhbHVlKTtcbiAgfVxuXG4gIGlmIChrZXlzLmxlbmd0aCA9PT0gMCAmJiAoIWFycmF5IHx8IHZhbHVlLmxlbmd0aCA9PSAwKSkge1xuICAgIHJldHVybiBicmFjZXNbMF0gKyBiYXNlICsgYnJhY2VzWzFdO1xuICB9XG5cbiAgaWYgKHJlY3Vyc2VUaW1lcyA8IDApIHtcbiAgICBpZiAoaXNSZWdFeHAodmFsdWUpKSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSwgJ3JlZ2V4cCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoJ1tPYmplY3RdJywgJ3NwZWNpYWwnKTtcbiAgICB9XG4gIH1cblxuICBjdHguc2Vlbi5wdXNoKHZhbHVlKTtcblxuICB2YXIgb3V0cHV0O1xuICBpZiAoYXJyYXkpIHtcbiAgICBvdXRwdXQgPSBmb3JtYXRBcnJheShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXlzKTtcbiAgfSBlbHNlIHtcbiAgICBvdXRwdXQgPSBrZXlzLm1hcChmdW5jdGlvbihrZXkpIHtcbiAgICAgIHJldHVybiBmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXksIGFycmF5KTtcbiAgICB9KTtcbiAgfVxuXG4gIGN0eC5zZWVuLnBvcCgpO1xuXG4gIHJldHVybiByZWR1Y2VUb1NpbmdsZVN0cmluZyhvdXRwdXQsIGJhc2UsIGJyYWNlcyk7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0UHJpbWl0aXZlKGN0eCwgdmFsdWUpIHtcbiAgaWYgKGlzVW5kZWZpbmVkKHZhbHVlKSlcbiAgICByZXR1cm4gY3R4LnN0eWxpemUoJ3VuZGVmaW5lZCcsICd1bmRlZmluZWQnKTtcbiAgaWYgKGlzU3RyaW5nKHZhbHVlKSkge1xuICAgIHZhciBzaW1wbGUgPSAnXFwnJyArIEpTT04uc3RyaW5naWZ5KHZhbHVlKS5yZXBsYWNlKC9eXCJ8XCIkL2csICcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLycvZywgXCJcXFxcJ1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcXFxcIi9nLCAnXCInKSArICdcXCcnO1xuICAgIHJldHVybiBjdHguc3R5bGl6ZShzaW1wbGUsICdzdHJpbmcnKTtcbiAgfVxuICBpZiAoaXNOdW1iZXIodmFsdWUpKVxuICAgIHJldHVybiBjdHguc3R5bGl6ZSgnJyArIHZhbHVlLCAnbnVtYmVyJyk7XG4gIGlmIChpc0Jvb2xlYW4odmFsdWUpKVxuICAgIHJldHVybiBjdHguc3R5bGl6ZSgnJyArIHZhbHVlLCAnYm9vbGVhbicpO1xuICAvLyBGb3Igc29tZSByZWFzb24gdHlwZW9mIG51bGwgaXMgXCJvYmplY3RcIiwgc28gc3BlY2lhbCBjYXNlIGhlcmUuXG4gIGlmIChpc051bGwodmFsdWUpKVxuICAgIHJldHVybiBjdHguc3R5bGl6ZSgnbnVsbCcsICdudWxsJyk7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0RXJyb3IodmFsdWUpIHtcbiAgcmV0dXJuICdbJyArIEVycm9yLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSArICddJztcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRBcnJheShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXlzKSB7XG4gIHZhciBvdXRwdXQgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyArK2kpIHtcbiAgICBpZiAoaGFzT3duUHJvcGVydHkodmFsdWUsIFN0cmluZyhpKSkpIHtcbiAgICAgIG91dHB1dC5wdXNoKGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsXG4gICAgICAgICAgU3RyaW5nKGkpLCB0cnVlKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG91dHB1dC5wdXNoKCcnKTtcbiAgICB9XG4gIH1cbiAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgIGlmICgha2V5Lm1hdGNoKC9eXFxkKyQvKSkge1xuICAgICAgb3V0cHV0LnB1c2goZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cyxcbiAgICAgICAgICBrZXksIHRydWUpKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gb3V0cHV0O1xufVxuXG5cbmZ1bmN0aW9uIGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleSwgYXJyYXkpIHtcbiAgdmFyIG5hbWUsIHN0ciwgZGVzYztcbiAgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodmFsdWUsIGtleSkgfHwgeyB2YWx1ZTogdmFsdWVba2V5XSB9O1xuICBpZiAoZGVzYy5nZXQpIHtcbiAgICBpZiAoZGVzYy5zZXQpIHtcbiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbR2V0dGVyL1NldHRlcl0nLCAnc3BlY2lhbCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW0dldHRlcl0nLCAnc3BlY2lhbCcpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoZGVzYy5zZXQpIHtcbiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbU2V0dGVyXScsICdzcGVjaWFsJyk7XG4gICAgfVxuICB9XG4gIGlmICghaGFzT3duUHJvcGVydHkodmlzaWJsZUtleXMsIGtleSkpIHtcbiAgICBuYW1lID0gJ1snICsga2V5ICsgJ10nO1xuICB9XG4gIGlmICghc3RyKSB7XG4gICAgaWYgKGN0eC5zZWVuLmluZGV4T2YoZGVzYy52YWx1ZSkgPCAwKSB7XG4gICAgICBpZiAoaXNOdWxsKHJlY3Vyc2VUaW1lcykpIHtcbiAgICAgICAgc3RyID0gZm9ybWF0VmFsdWUoY3R4LCBkZXNjLnZhbHVlLCBudWxsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0ciA9IGZvcm1hdFZhbHVlKGN0eCwgZGVzYy52YWx1ZSwgcmVjdXJzZVRpbWVzIC0gMSk7XG4gICAgICB9XG4gICAgICBpZiAoc3RyLmluZGV4T2YoJ1xcbicpID4gLTEpIHtcbiAgICAgICAgaWYgKGFycmF5KSB7XG4gICAgICAgICAgc3RyID0gc3RyLnNwbGl0KCdcXG4nKS5tYXAoZnVuY3Rpb24obGluZSkge1xuICAgICAgICAgICAgcmV0dXJuICcgICcgKyBsaW5lO1xuICAgICAgICAgIH0pLmpvaW4oJ1xcbicpLnN1YnN0cigyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHIgPSAnXFxuJyArIHN0ci5zcGxpdCgnXFxuJykubWFwKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgICAgICAgIHJldHVybiAnICAgJyArIGxpbmU7XG4gICAgICAgICAgfSkuam9pbignXFxuJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tDaXJjdWxhcl0nLCAnc3BlY2lhbCcpO1xuICAgIH1cbiAgfVxuICBpZiAoaXNVbmRlZmluZWQobmFtZSkpIHtcbiAgICBpZiAoYXJyYXkgJiYga2V5Lm1hdGNoKC9eXFxkKyQvKSkge1xuICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG4gICAgbmFtZSA9IEpTT04uc3RyaW5naWZ5KCcnICsga2V5KTtcbiAgICBpZiAobmFtZS5tYXRjaCgvXlwiKFthLXpBLVpfXVthLXpBLVpfMC05XSopXCIkLykpIHtcbiAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cigxLCBuYW1lLmxlbmd0aCAtIDIpO1xuICAgICAgbmFtZSA9IGN0eC5zdHlsaXplKG5hbWUsICduYW1lJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoLycvZywgXCJcXFxcJ1wiKVxuICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxcXFwiL2csICdcIicpXG4gICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8oXlwifFwiJCkvZywgXCInXCIpO1xuICAgICAgbmFtZSA9IGN0eC5zdHlsaXplKG5hbWUsICdzdHJpbmcnKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmFtZSArICc6ICcgKyBzdHI7XG59XG5cblxuZnVuY3Rpb24gcmVkdWNlVG9TaW5nbGVTdHJpbmcob3V0cHV0LCBiYXNlLCBicmFjZXMpIHtcbiAgdmFyIG51bUxpbmVzRXN0ID0gMDtcbiAgdmFyIGxlbmd0aCA9IG91dHB1dC5yZWR1Y2UoZnVuY3Rpb24ocHJldiwgY3VyKSB7XG4gICAgbnVtTGluZXNFc3QrKztcbiAgICBpZiAoY3VyLmluZGV4T2YoJ1xcbicpID49IDApIG51bUxpbmVzRXN0Kys7XG4gICAgcmV0dXJuIHByZXYgKyBjdXIucmVwbGFjZSgvXFx1MDAxYlxcW1xcZFxcZD9tL2csICcnKS5sZW5ndGggKyAxO1xuICB9LCAwKTtcblxuICBpZiAobGVuZ3RoID4gNjApIHtcbiAgICByZXR1cm4gYnJhY2VzWzBdICtcbiAgICAgICAgICAgKGJhc2UgPT09ICcnID8gJycgOiBiYXNlICsgJ1xcbiAnKSArXG4gICAgICAgICAgICcgJyArXG4gICAgICAgICAgIG91dHB1dC5qb2luKCcsXFxuICAnKSArXG4gICAgICAgICAgICcgJyArXG4gICAgICAgICAgIGJyYWNlc1sxXTtcbiAgfVxuXG4gIHJldHVybiBicmFjZXNbMF0gKyBiYXNlICsgJyAnICsgb3V0cHV0LmpvaW4oJywgJykgKyAnICcgKyBicmFjZXNbMV07XG59XG5cblxuLy8gTk9URTogVGhlc2UgdHlwZSBjaGVja2luZyBmdW5jdGlvbnMgaW50ZW50aW9uYWxseSBkb24ndCB1c2UgYGluc3RhbmNlb2ZgXG4vLyBiZWNhdXNlIGl0IGlzIGZyYWdpbGUgYW5kIGNhbiBiZSBlYXNpbHkgZmFrZWQgd2l0aCBgT2JqZWN0LmNyZWF0ZSgpYC5cbmZ1bmN0aW9uIGlzQXJyYXkoYXIpIHtcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYXIpO1xufVxuZXhwb3J0cy5pc0FycmF5ID0gaXNBcnJheTtcblxuZnVuY3Rpb24gaXNCb29sZWFuKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nO1xufVxuZXhwb3J0cy5pc0Jvb2xlYW4gPSBpc0Jvb2xlYW47XG5cbmZ1bmN0aW9uIGlzTnVsbChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gbnVsbDtcbn1cbmV4cG9ydHMuaXNOdWxsID0gaXNOdWxsO1xuXG5mdW5jdGlvbiBpc051bGxPclVuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PSBudWxsO1xufVxuZXhwb3J0cy5pc051bGxPclVuZGVmaW5lZCA9IGlzTnVsbE9yVW5kZWZpbmVkO1xuXG5mdW5jdGlvbiBpc051bWJlcihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInO1xufVxuZXhwb3J0cy5pc051bWJlciA9IGlzTnVtYmVyO1xuXG5mdW5jdGlvbiBpc1N0cmluZyhhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnO1xufVxuZXhwb3J0cy5pc1N0cmluZyA9IGlzU3RyaW5nO1xuXG5mdW5jdGlvbiBpc1N5bWJvbChhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnO1xufVxuZXhwb3J0cy5pc1N5bWJvbCA9IGlzU3ltYm9sO1xuXG5mdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gdm9pZCAwO1xufVxuZXhwb3J0cy5pc1VuZGVmaW5lZCA9IGlzVW5kZWZpbmVkO1xuXG5mdW5jdGlvbiBpc1JlZ0V4cChyZSkge1xuICByZXR1cm4gaXNPYmplY3QocmUpICYmIG9iamVjdFRvU3RyaW5nKHJlKSA9PT0gJ1tvYmplY3QgUmVnRXhwXSc7XG59XG5leHBvcnRzLmlzUmVnRXhwID0gaXNSZWdFeHA7XG5cbmZ1bmN0aW9uIGlzT2JqZWN0KGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsO1xufVxuZXhwb3J0cy5pc09iamVjdCA9IGlzT2JqZWN0O1xuXG5mdW5jdGlvbiBpc0RhdGUoZCkge1xuICByZXR1cm4gaXNPYmplY3QoZCkgJiYgb2JqZWN0VG9TdHJpbmcoZCkgPT09ICdbb2JqZWN0IERhdGVdJztcbn1cbmV4cG9ydHMuaXNEYXRlID0gaXNEYXRlO1xuXG5mdW5jdGlvbiBpc0Vycm9yKGUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0KGUpICYmXG4gICAgICAob2JqZWN0VG9TdHJpbmcoZSkgPT09ICdbb2JqZWN0IEVycm9yXScgfHwgZSBpbnN0YW5jZW9mIEVycm9yKTtcbn1cbmV4cG9ydHMuaXNFcnJvciA9IGlzRXJyb3I7XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nO1xufVxuZXhwb3J0cy5pc0Z1bmN0aW9uID0gaXNGdW5jdGlvbjtcblxuZnVuY3Rpb24gaXNQcmltaXRpdmUoYXJnKSB7XG4gIHJldHVybiBhcmcgPT09IG51bGwgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdib29sZWFuJyB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ251bWJlcicgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnc3ltYm9sJyB8fCAgLy8gRVM2IHN5bWJvbFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3VuZGVmaW5lZCc7XG59XG5leHBvcnRzLmlzUHJpbWl0aXZlID0gaXNQcmltaXRpdmU7XG5cbmV4cG9ydHMuaXNCdWZmZXIgPSByZXF1aXJlKCcuL3N1cHBvcnQvaXNCdWZmZXInKTtcblxuZnVuY3Rpb24gb2JqZWN0VG9TdHJpbmcobykge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pO1xufVxuXG5cbmZ1bmN0aW9uIHBhZChuKSB7XG4gIHJldHVybiBuIDwgMTAgPyAnMCcgKyBuLnRvU3RyaW5nKDEwKSA6IG4udG9TdHJpbmcoMTApO1xufVxuXG5cbnZhciBtb250aHMgPSBbJ0phbicsICdGZWInLCAnTWFyJywgJ0FwcicsICdNYXknLCAnSnVuJywgJ0p1bCcsICdBdWcnLCAnU2VwJyxcbiAgICAgICAgICAgICAgJ09jdCcsICdOb3YnLCAnRGVjJ107XG5cbi8vIDI2IEZlYiAxNjoxOTozNFxuZnVuY3Rpb24gdGltZXN0YW1wKCkge1xuICB2YXIgZCA9IG5ldyBEYXRlKCk7XG4gIHZhciB0aW1lID0gW3BhZChkLmdldEhvdXJzKCkpLFxuICAgICAgICAgICAgICBwYWQoZC5nZXRNaW51dGVzKCkpLFxuICAgICAgICAgICAgICBwYWQoZC5nZXRTZWNvbmRzKCkpXS5qb2luKCc6Jyk7XG4gIHJldHVybiBbZC5nZXREYXRlKCksIG1vbnRoc1tkLmdldE1vbnRoKCldLCB0aW1lXS5qb2luKCcgJyk7XG59XG5cblxuLy8gbG9nIGlzIGp1c3QgYSB0aGluIHdyYXBwZXIgdG8gY29uc29sZS5sb2cgdGhhdCBwcmVwZW5kcyBhIHRpbWVzdGFtcFxuZXhwb3J0cy5sb2cgPSBmdW5jdGlvbigpIHtcbiAgY29uc29sZS5sb2coJyVzIC0gJXMnLCB0aW1lc3RhbXAoKSwgZXhwb3J0cy5mb3JtYXQuYXBwbHkoZXhwb3J0cywgYXJndW1lbnRzKSk7XG59O1xuXG5cbi8qKlxuICogSW5oZXJpdCB0aGUgcHJvdG90eXBlIG1ldGhvZHMgZnJvbSBvbmUgY29uc3RydWN0b3IgaW50byBhbm90aGVyLlxuICpcbiAqIFRoZSBGdW5jdGlvbi5wcm90b3R5cGUuaW5oZXJpdHMgZnJvbSBsYW5nLmpzIHJld3JpdHRlbiBhcyBhIHN0YW5kYWxvbmVcbiAqIGZ1bmN0aW9uIChub3Qgb24gRnVuY3Rpb24ucHJvdG90eXBlKS4gTk9URTogSWYgdGhpcyBmaWxlIGlzIHRvIGJlIGxvYWRlZFxuICogZHVyaW5nIGJvb3RzdHJhcHBpbmcgdGhpcyBmdW5jdGlvbiBuZWVkcyB0byBiZSByZXdyaXR0ZW4gdXNpbmcgc29tZSBuYXRpdmVcbiAqIGZ1bmN0aW9ucyBhcyBwcm90b3R5cGUgc2V0dXAgdXNpbmcgbm9ybWFsIEphdmFTY3JpcHQgZG9lcyBub3Qgd29yayBhc1xuICogZXhwZWN0ZWQgZHVyaW5nIGJvb3RzdHJhcHBpbmcgKHNlZSBtaXJyb3IuanMgaW4gcjExNDkwMykuXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gY3RvciBDb25zdHJ1Y3RvciBmdW5jdGlvbiB3aGljaCBuZWVkcyB0byBpbmhlcml0IHRoZVxuICogICAgIHByb3RvdHlwZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IHN1cGVyQ3RvciBDb25zdHJ1Y3RvciBmdW5jdGlvbiB0byBpbmhlcml0IHByb3RvdHlwZSBmcm9tLlxuICovXG5leHBvcnRzLmluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTtcblxuZXhwb3J0cy5fZXh0ZW5kID0gZnVuY3Rpb24ob3JpZ2luLCBhZGQpIHtcbiAgLy8gRG9uJ3QgZG8gYW55dGhpbmcgaWYgYWRkIGlzbid0IGFuIG9iamVjdFxuICBpZiAoIWFkZCB8fCAhaXNPYmplY3QoYWRkKSkgcmV0dXJuIG9yaWdpbjtcblxuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGFkZCk7XG4gIHZhciBpID0ga2V5cy5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBvcmlnaW5ba2V5c1tpXV0gPSBhZGRba2V5c1tpXV07XG4gIH1cbiAgcmV0dXJuIG9yaWdpbjtcbn07XG5cbmZ1bmN0aW9uIGhhc093blByb3BlcnR5KG9iaiwgcHJvcCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7XG59XG4iLCJjb25zdCBmYWJyaWNvID0gcmVxdWlyZSgnZmFicmljbycpO1xuY29uc3QgZmFudGFzeSA9IHJlcXVpcmUoJ2ZhYnJpY28vZGlzdC9mYW50YXN5LmpzJyk7XG5cbmV4cG9ydHMuZmFicmljbyA9IGZhYnJpY287XG5cbmV4cG9ydHMuZmFudGFzeSA9IGZhbnRhc3k7XG5leHBvcnRzLm1hcHMgPSB7XG4gICAgdGVycmFpbk1hcDogcmVxdWlyZSgnLi9tYXBzL3RlcnJhaW5tYXAuanMnKSxcbiAgICBjaXR5OiByZXF1aXJlKCcuL21hcHMvY2l0eS5qcycpXG59O1xuIiwiY29uc3QgYmluSGVhcCA9IHJlcXVpcmUoJ2JpbmhlYXAnKTtcbmNvbnN0IF8gPSByZXF1aXJlKCcuLi91bmRlcnNjb3JlLmpzJykuXztcblxuZnVuY3Rpb24gY29uc3RydWN0UGF0aChjYW1lRnJvbSwgY3VycmVudCkge1xuICAgIFxuICAgIGxldCBwID0gW2N1cnJlbnRdO1xuICAgIFxuICAgIHdoaWxlKGNhbWVGcm9tW2N1cnJlbnQuaWRdKSB7XG4gICAgICAgIGN1cnJlbnQgPSBjYW1lRnJvbVtjdXJyZW50LmlkXTtcbiAgICAgICAgcC5wdXNoKGN1cnJlbnQpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gcDtcbn1cblxuY2xhc3MgQVN0YXJGaW5kZXIge1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgIH1cbiAgICBcbiAgICBkaWFnb25hbEhldXJpc3RpYyhzdGFydCwgZW5kKSB7XG4gICAgICAgIGxldCBEID0gMTtcbiAgICAgICAgbGV0IEQyID0gTWF0aC5TUVJUMjtcbiAgICAgICAgXG4gICAgICAgIGxldCBkeCA9IE1hdGguYWJzKHN0YXJ0LnggLSBlbmQueCk7XG4gICAgICAgIGxldCBkeSA9IE1hdGguYWJzKHN0YXJ0LnkgLSBlbmQueSk7XG4gICAgICAgIHJldHVybiBEICogKGR4ICsgZHkpICsgKEQyIC0gMiAqIEQpICogTWF0aC5taW4oZHgsIGR5KVxuICAgIH1cbiAgICBcbiAgICBmaW5kKG1hcCwgc3RhcnQsIGVuZCwgaGV1cmlzdGljKSB7XG4gICAgICAgIFxuICAgICAgICBoZXVyaXN0aWMgPSBoZXVyaXN0aWMgfHwgdGhpcy5kaWFnb25hbEhldXJpc3RpYztcbiAgICAgICAgXG4gICAgICAgIGxldCBlbmRGbiA9IG51bGw7XG4gICAgICAgIGlmKF8uaXNGdW5jdGlvbihlbmQpKSB7XG4gICAgICAgICAgICBlbmRGbiA9IGVuZDtcbiAgICAgICAgICAgIGVuZCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGxldCBkYXRhID0ge1xuICAgICAgICAgICAgbWFwOiBtYXAsXG4gICAgICAgICAgICBzdGFydDogc3RhcnQsXG4gICAgICAgICAgICBmcm9tOiB7fSxcbiAgICAgICAgICAgIGdzY29yZToge30sXG4gICAgICAgICAgICBmc2NvcmU6IHt9LFxuICAgICAgICAgICAgY2xvc2VkU2V0OiB7fVxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgZGF0YS5vcGVuU2V0ID0gYmluSGVhcChmdW5jdGlvbihub2RlKSB7IHJldHVybiBkYXRhLmZzY29yZVtub2RlLmlkXTsgfSk7XG4gICAgICAgIFxuICAgICAgICBkYXRhLmdzY29yZVtzdGFydC5pZF0gPSAwO1xuICAgICAgICBkYXRhLmZzY29yZVtzdGFydC5pZF0gPSBoZXVyaXN0aWMoc3RhcnQsIGVuZCk7XG4gICAgICAgIGRhdGEub3BlblNldC5wdXNoKHN0YXJ0KTtcbiAgICAgICAgXG4gICAgICAgIHdoaWxlKGRhdGEub3BlblNldC5zaXplKCkgPiAwKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxldCBjdXJyZW50ID0gZGF0YS5vcGVuU2V0LnBvcCgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihjdXJyZW50ID09PSBlbmQgfHwgKGVuZEZuICYmIGVuZEZuKGN1cnJlbnQpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb25zdHJ1Y3RQYXRoKGRhdGEuZnJvbSwgY3VycmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRhdGEuY2xvc2VkU2V0W2N1cnJlbnQuaWRdID0gY3VycmVudDtcbiAgICAgICAgICAgIGZvcihsZXQgbiBvZiBtYXAubmVpZ2hib3JzKGN1cnJlbnQpKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYoZGF0YS5jbG9zZWRTZXRbbi5pZF0pIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGxldCBpc05ldyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGxldCBnID0gZGF0YS5nc2NvcmVbY3VycmVudC5pZF0gKyBoZXVyaXN0aWMobiwgY3VycmVudCk7XG4gICAgICAgICAgICAgICAgaWYoZGF0YS5vcGVuU2V0LmhlYXAuaW5kZXhPZihuKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9uZXcgbm9kZVxuICAgICAgICAgICAgICAgICAgICBkYXRhLm9wZW5TZXQucHVzaChuKTtcbiAgICAgICAgICAgICAgICAgICAgaXNOZXcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZihnID49IGRhdGEuZ3Njb3JlW24uaWRdKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vd29yc2UgcGF0aFxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZGF0YS5mcm9tW24uaWRdID0gY3VycmVudDtcbiAgICAgICAgICAgICAgICBkYXRhLmdzY29yZVtuLmlkXSA9IGc7XG4gICAgICAgICAgICAgICAgZGF0YS5mc2NvcmVbbi5pZF0gPSBnICsgaGV1cmlzdGljKG4sIGVuZCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYoIWlzTmV3KSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEub3BlblNldC5yZXNjb3JlRWxlbWVudChuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IEFTdGFyRmluZGVyKCk7XG4iLCJjb25zdCBkcmQgPSByZXF1aXJlKCdmYWJyaWNvL25vZGVfbW9kdWxlcy9kZWZpbml0ZWx5LXJhbmRvbS1kYXRhL2Rpc3QvZHJkLmpzJyk7XG4vLyAgICAgICAgICAgICAgICAgICBkZWZpbml0ZWx5LXJhbmRvbS1kYXRhXG5jb25zdCBmYWJyaWNvID0gcmVxdWlyZSgnZmFicmljbycpO1xuY29uc3QgXyA9IHJlcXVpcmUoJy4uL3VuZGVyc2NvcmUuanMnKS5fO1xuY29uc3QgYXN0YXIgPSByZXF1aXJlKCcuL2FzdGFyLmpzJyk7XG5cbmZ1bmN0aW9uIGRlZmF1bHROb2RlUHJvdmlkZXIoeCx5KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaWQ6IHggKyAnXycgKyB5LFxuICAgICAgICB4OiB4LFxuICAgICAgICB5OiB5LFxuICAgICAgICBtb3ZhYmxlOiB0cnVlLFxuICAgICAgICBoZWlnaHQ6IDAsXG4gICAgICAgIHZlZ2l0YXRpb246IDAsXG4gICAgICAgIHdhdGVyOiAwLFxuICAgICAgICBwb3B1bGF0aW9uOiAwXG4gICAgfTtcbn1cblxuY2xhc3MgTWFwQnVpbGRlciB7XG4gICAgXG4gICAgY29uc3RydWN0b3IoeCwgeSwgbm9kZVByb3ZpZGVyKSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLm5vZGVQcm92aWRlciA9IG5vZGVQcm92aWRlciB8fCBkZWZhdWx0Tm9kZVByb3ZpZGVyO1xuICAgICAgICB0aGlzLndpZHRoID0geDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSB5O1xuICAgICAgICB0aGlzLmdyYXBoID0gW107XG4gICAgICAgIGZvcihsZXQgeXkgPSAwOyB5eSA8IHk7IHl5KyspIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGV0IHJvdyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5ncmFwaFt5eV0gPSByb3c7XG4gICAgICAgICAgICBmb3IobGV0IHh4ID0gMDsgeHggPCB4OyB4eCsrKSB7XG4gICAgICAgICAgICAgICAgcm93W3h4XSA9IHRoaXMubm9kZVByb3ZpZGVyKHh4LCB5eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZ2V0Tm9kZSh4LCB5KSB7XG4gICAgICAgIFxuICAgICAgICBpZih5ID49IDAgJiYgeSA8IHRoaXMuZ3JhcGgubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZih4ID49IDAgJiYgeCA8IHRoaXMuZ3JhcGhbeV0ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ3JhcGhbeV1beF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH0gXG4gICAgXG4gICAgbmVpZ2hib3JzKG5vZGUpIHtcbiAgICAgICAgbGV0IHJldCA9IFtdO1xuICAgICAgICBcbiAgICAgICAgbGV0IG4gPSB0aGlzLmdldE5vZGUobm9kZS54LCBub2RlLnkrMSk7XG4gICAgICAgIGlmKG4gIT09IG51bGwpIHJldC5wdXNoKG4pO1xuICAgICAgICBcbiAgICAgICAgbiA9IHRoaXMuZ2V0Tm9kZShub2RlLngrMSwgbm9kZS55KzEpO1xuICAgICAgICBpZihuICE9PSBudWxsKSByZXQucHVzaChuKTtcbiAgICBcbiAgICAgICAgbiA9IHRoaXMuZ2V0Tm9kZShub2RlLngrMSwgbm9kZS55KTtcbiAgICAgICAgaWYobiAhPT0gbnVsbCkgcmV0LnB1c2gobik7XG4gICAgICAgIFxuICAgICAgICBuID0gdGhpcy5nZXROb2RlKG5vZGUueCsxLCBub2RlLnktMSk7XG4gICAgICAgIGlmKG4gIT09IG51bGwpIHJldC5wdXNoKG4pO1xuICAgIFxuICAgICAgICBuID0gdGhpcy5nZXROb2RlKG5vZGUueCwgbm9kZS55LTEpO1xuICAgICAgICBpZihuICE9PSBudWxsKSByZXQucHVzaChuKTtcbiAgICAgICAgXG4gICAgICAgIG4gPSB0aGlzLmdldE5vZGUobm9kZS54LTEsIG5vZGUueS0xKTtcbiAgICAgICAgaWYobiAhPT0gbnVsbCkgcmV0LnB1c2gobik7XG4gICAgICAgIFxuICAgICAgICBuID0gdGhpcy5nZXROb2RlKG5vZGUueC0xLCBub2RlLnkpO1xuICAgICAgICBpZihuICE9PSBudWxsKSByZXQucHVzaChuKTtcbiAgICAgICAgXG4gICAgICAgIG4gPSB0aGlzLmdldE5vZGUobm9kZS54LTEsIG5vZGUueSsxKTtcbiAgICAgICAgaWYobiAhPT0gbnVsbCkgcmV0LnB1c2gobik7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgICBcbiAgICBwYXRoKHN0YXJ0LCBlbmQsIGgpIHtcbiAgICAgICAgcmV0dXJuIGFzdGFyLmZpbmQodGhpcywgc3RhcnQsIGVuZCwgaCk7XG4gICAgfVxuICAgIFxuICAgIGJyZWFkdGhGaXJzdFNlYXJjaChzdGFydCwgdmlzdCwgZGlhZ3MpIHtcbiAgICAgICAgXG4gICAgICAgIGxldCBkaXN0ID0ge307XG4gICAgICAgIGxldCBwYXJlbnRzID0ge307XG4gICAgICAgIFxuICAgICAgICBsZXQgcSA9IFtdO1xuICAgICAgICBcbiAgICAgICAgZGlzdFtzdGFydC5pZF0gPSAwO1xuICAgICAgICBxLnB1c2goc3RhcnQpO1xuICAgICAgICBsZXQgIGRpc3RGbiA9IGFzdGFyLmRpYWdvbmFsSGV1cmlzdGljO1xuICAgICAgICBcbiAgICAgICAgd2hpbGUocS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxldCBjdXIgPSBxLnNoaWZ0KCk7XG4gICAgICAgICAgICBmb3IobGV0IG4gb2YgdGhpcy5uZWlnaGJvcnMoY3VyKSkge1xuICAgICAgICAgICAgICAgIGlmKF8uaXNVbmRlZmluZWQoZGlzdFtuLmlkXSkgJiYgdmlzdChuLCBkaXN0W2N1ci5pZF0sIGN1cikpIHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGRpc3Rbbi5pZF0gPSBkaXN0Rm4oc3RhcnQsIG4pO1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnRzW24uaWRdID0gY3VyO1xuICAgICAgICAgICAgICAgICAgICBxLnB1c2gobik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGlzdGFuY2VzOiBkaXN0LFxuICAgICAgICAgICAgcGFyZW50czogcGFyZW50c1xuICAgICAgICB9XG4gICAgfVxuXG59XG5cbmxldCBidWlsZGVyID0gZXhwb3J0cy5idWlsZGVyID0gZnVuY3Rpb24odGVycmFpbk1hcCkge1xuICAgIFxuICAgIGxldCBiID0gbmV3IE1hcEJ1aWxkZXIodGVycmFpbk1hcC53aWR0aCwgdGVycmFpbk1hcC5oZWlnaHQsIGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgIGxldCBub2RlID0gZGVmYXVsdE5vZGVQcm92aWRlcih4LCB5KTtcbiAgICAgICAgbGV0IHQgPSB0ZXJyYWluTWFwLmdldCh4LCB5KTtcbiAgICAgICAgbm9kZS5oZWlnaHQgPSB0LmhlaWdodDtcbiAgICAgICAgbm9kZS52ZWdpdGF0aW9uID0gdC52ZWdpdGF0aW9uO1xuICAgICAgICBub2RlLndhdGVyID0gdC53YXRlcjtcbiAgICAgICAgbm9kZS5wb3B1bGF0aW9uID0gMDtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiBiO1xufVxuXG5sZXQgc2VlZFBvcHVsYXRpb24gPSBleHBvcnRzLnNlZWRQb3B1bGF0aW9uID0gZnVuY3Rpb24oYiwgZGVuc2l0eSkge1xuICAgIFxuICAgIGxldCBybmcgPSBkcmQuRGVmYXVsdHMuZGVmYXVsdFJuZztcbiAgICBkZW5zaXR5ID0gZGVuc2l0eSB8fCA2O1xuICAgIGxldCBkaXN0Rm4gPSBhc3Rhci5kaWFnb25hbEhldXJpc3RpYztcbiAgICBcbiAgICBsZXQgc2VlZHMgPSBbXTtcbiAgICBcbiAgICBsZXQgbWF4eCA9IG51bGw7XG4gICAgbGV0IG1heHkgPSBudWxsO1xuICAgIGxldCBtaW54ID0gbnVsbDtcbiAgICBsZXQgbWlueSA9IG51bGw7XG4gICAgXG4gICAgZm9yKGxldCBpPTA7IGk8ZGVuc2l0eTsgaSsrKSB7XG4gICAgICAgIFxuICAgICAgICBsZXQgc3ggPSBybmcuZ2V0UmFuZG9tSW50KDAsIGIud2lkdGgpO1xuICAgICAgICBsZXQgc3kgPSBybmcuZ2V0UmFuZG9tSW50KDAsIGIuaGVpZ2h0KTtcbiAgICAgICAgXG4gICAgICAgIGxldCBjdXIgPSBiLmdldE5vZGUoc3gsIHN5KTtcbiAgICAgICAgaWYoY3VyLndhdGVyID09PSAyNTUpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy9maW5kIG5lYXJlc3Qgbm9uLXdhdGVyIHRpbGVcbiAgICAgICAgICAgIGxldCBmb3VuZCA9IGZhbHNlO1xuICAgICAgICAgICAgYi5icmVhZHRoRmlyc3RTZWFyY2goY3VyLCBmdW5jdGlvbihuKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYoZm91bmQpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZihuLndhdGVyID09PSAyNTUpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjdXIgPSBuO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihjdXIud2F0ZXIgPT09IDI1NSlcbiAgICAgICAgICAgICAgICBjb250aW51ZTsgLy9XaXRoIHRoYXQgbXVjaCB3YXRlciBpdCdzIGhvcGVsZXNzXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHNlZWRzLnB1c2goY3VyKTtcbiAgICAgICAgXG4gICAgICAgIGlmKG1heHggPT0gbnVsbCB8fCBtYXh4LnggPCBjdXIueClcbiAgICAgICAgICAgIG1heHggPSBjdXI7XG4gICAgICAgIGlmKG1heHkgPT0gbnVsbCB8fCBtYXh5LnkgPCBjdXIueSlcbiAgICAgICAgICAgIG1heHkgPSBjdXI7XG4gICAgICAgIGlmKG1pbnggPT0gbnVsbCB8fCBtaW54LnggPiBjdXIueClcbiAgICAgICAgICAgIG1pbnggPSBjdXI7XG4gICAgICAgIGlmKG1pbnkgPT0gbnVsbCB8fCBtaW55LnkgPiBjdXIueSlcbiAgICAgICAgICAgIG1pbnkgPSBjdXI7XG4gICAgfVxuICAgIFxuICAgIGxldCBmdXJ0aGVyZXN0UGFpciA9IG51bGw7XG4gICAgbGV0IGZ1cnRoZXJlc3REaXN0ID0gbnVsbDtcbiAgICBcbiAgICBsZXQgZGlzdHMgPSBbbWF4eCwgbWF4eSwgbWlueCwgbWlueV07XG4gICAgXG4gICAgZm9yKGxldCBpPTA7IGk8ZGlzdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IGEgPSBkaXN0c1tpXTtcbiAgICAgICAgZm9yKGxldCBrPWkrMTsgazxkaXN0cy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgbGV0IGIgPSBkaXN0c1trXTtcbiAgICAgICAgICAgIGxldCBkID0gZGlzdEZuKGEsIGIpO1xuICAgICAgICAgICAgaWYoZnVydGhlcmVzdERpc3QgPT0gbnVsbCB8fCBkID4gZnVydGhlcmVzdERpc3QpIHtcbiAgICAgICAgICAgICAgICBmdXJ0aGVyZXN0UGFpciA9IFthLCBiXTtcbiAgICAgICAgICAgICAgICBmdXJ0aGVyZXN0RGlzdCA9IGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgbGV0IHdlaWdodEZuID0gZnVuY3Rpb24oYSwgYikge1xuICAgICAgICBcbiAgICAgICAgLy9ldmVyeSBjaGFuZ2Ugb2YgZWxldmF0aW9uIG9mIDE3IGNvc3RzIDEgdGlsZVxuICAgICAgICAvL2V2ZXJ5IGNoYW5nZSBvZiB2ZWdpdGF0aW9uIG9mIDE3IGNvc3RzIDEgdGlsZVxuICAgICAgICAvL2V2ZXJ5IHdhdGVyIGNvc3RzIDggdGlsZXNcbiAgICAgICAgXG4gICAgICAgIGlmKGEgPT0gbnVsbCB8fCBiID09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgXG4gICAgICAgIGxldCBkaCA9IE1hdGguYWJzKGEuaGVpZ2h0IC0gYi5oZWlnaHQpIC8gMTc7XG4gICAgICAgIGxldCBkdiA9IE1hdGguYWJzKGEudmVnaXRhdGlvbiAtIGIudmVnaXRhdGlvbikgLyAxNztcbiAgICAgICAgbGV0IGR3ID0gKGEud2F0ZXIgPiAwID8gOCA6IDApICsgKGIud2F0ZXIgPiAwID8gOCA6IDApO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIDEgKyBkaCArIGR2ICsgZHc7XG4gICAgfTtcbiAgICBcbiAgICBsZXQgbWFpblJvYWQgPSBbXTtcbiAgICBsZXQgc2lkZVJvYWRzID0gW107XG4gICAgXG4gICAgZm9yKGxldCBvIG9mIGIucGF0aChmdXJ0aGVyZXN0UGFpclswXSwgZnVydGhlcmVzdFBhaXJbMV0sIHdlaWdodEZuKSkge1xuICAgICAgICBvLnBvcHVsYXRpb24gPSAyNTU7XG4gICAgICAgIG1haW5Sb2FkW28uaWRdID0gbztcbiAgICB9XG4gICAgXG4gICAgZm9yKGxldCBjdXIgb2Ygc2VlZHMpIHtcbiAgICAgICAgXG4gICAgICAgIGxldCBjdXIgPSBzZWVkcy5zaGlmdCgpO1xuICAgICAgICBpZihjdXIgPT09IGZ1cnRoZXJlc3RQYWlyWzBdIHx8IGN1ciA9PT0gZnVydGhlcmVzdFBhaXJbMV0pIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBsZXQgcCA9IGFzdGFyLmZpbmQoYiwgY3VyLCBmdW5jdGlvbihlbmQpIHsgcmV0dXJuIGVuZCAhPSBudWxsICYmIG1haW5Sb2FkW2VuZC5pZF07IH0sIHdlaWdodEZuKTtcbiAgICAgICAgXG4gICAgICAgIGZvcihsZXQgbyBvZiBwKSB7XG4gICAgICAgICAgICBvLnBvcHVsYXRpb24gPSAyNTU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGI7XG59XG5cbiIsIi8qXG5cblRlcnJhaW5NYXAgLVxuXG4gICAgXG5cbiovXG5cbmxldCB0ZXJyYWlubWFwID0gbW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBUZXJyYWluTWFwIHtcbiAgICBcbiAgICAvKlxuICAgICAqIFJHQkEgZm9ybWF0IDFkIGFycmF5XG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZGF0YSwgd2lkdGgsIGhlaWdodCkge1xuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIH1cbiAgICBcbiAgICAvKlxuICAgICBMb2FkIGltYWdlIGludG8gaGVpZ2htYXAuIFJHQkEgZm9ybWF0IDFkIGFycmF5XG4gICAgIFxuICAgICBSZWQgPSBFbGV2YXRpb25cbiAgICAgR3JlZW4gPSBWZWdpdGF0aW9uIGRlbnNpdHkgXG4gICAgICAgICAgICAwID0gcm9ja3kvYmFycmVuXG4gICAgICAgICAgICAyNTUgPSB0aGljayBmb3Jlc3QvanVuZ2xlXG4gICAgIEJsdWUgPSBXYXRlciBkZW5zaXR5IFxuICAgICAgICAgICAgMCA9IGdyb3VuZFxuICAgICAgICAgICAgMSAtIDEyNyA9IHJlc2VydmVkID9cbiAgICAgICAgICAgIDEyOCA9IHN3YW1wXG4gICAgICAgICAgICAyNTUgPSBpbXBhc3NpYmxlIHdpdGhvdXQgYm9hdFxuICAgICBBID0gPz9cbiAgICAgXG4gICAgICovXG4gICAgZ2V0KHgsIHkpIHtcbiAgICAgICAgXG4gICAgICAgIGlmKHggPCAwIHx8ICAgIHggPj0gdGhpcy53aWR0aCB8fCB5IDwgMCB8fCB5ID49IHRoaXMuaGVpZ2h0KSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgbGV0IHcgPSB0aGlzLndpZHRoO1xuICAgICAgICBsZXQgaCA9IHRoaXMuaGVpZ2h0O1xuICAgICAgICBcbiAgICAgICAgbGV0IGlkeCA9IHkgKiB3ICsgeDtcbiAgICAgICAgaWR4ICo9IDQ7Ly90aGVyZSdzIDQgYnl0ZXNcbiAgICAgICAgXG4gICAgICAgIGxldCByID0gdGhpcy5kYXRhW2lkeF07XG4gICAgICAgIGxldCBnID0gdGhpcy5kYXRhW2lkeCsxXTtcbiAgICAgICAgbGV0IGIgPSB0aGlzLmRhdGFbaWR4KzJdO1xuICAgICAgICBsZXQgYSA9IHRoaXMuZGF0YVtpZHgrM107XG4gICAgICAgIFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBoZWlnaHQ6IHIsXG4gICAgICAgICAgICB2ZWdpdGF0aW9uOiBnLFxuICAgICAgICAgICAgd2F0ZXI6IGJcbiAgICAgICAgICAgIFxuICAgICAgICB9O1xuICAgIH1cbiAgICBcbiAgICAvKlxuICAgIC8qXG4gICAgICogQ3JlYXRlIG1hcCBmcm9tIG5vaXNlXG4gICAgICpcbiAgICBzdGF0aWMgY3JlYXRlKHdpZHRoLCBoZWlnaHQsIG5vaXNlRm4pIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgKi9cbn1cbiIsIi8vICAgICBVbmRlcnNjb3JlLmpzIDEuOC4zXG4vLyAgICAgaHR0cDovL3VuZGVyc2NvcmVqcy5vcmdcbi8vICAgICAoYykgMjAwOS0yMDE1IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4vLyAgICAgVW5kZXJzY29yZSBtYXkgYmUgZnJlZWx5IGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbihmdW5jdGlvbigpe2Z1bmN0aW9uIG4obil7ZnVuY3Rpb24gdCh0LHIsZSx1LGksbyl7Zm9yKDtpPj0wJiZvPmk7aSs9bil7dmFyIGE9dT91W2ldOmk7ZT1yKGUsdFthXSxhLHQpfXJldHVybiBlfXJldHVybiBmdW5jdGlvbihyLGUsdSxpKXtlPWIoZSxpLDQpO3ZhciBvPSFrKHIpJiZtLmtleXMociksYT0ob3x8cikubGVuZ3RoLGM9bj4wPzA6YS0xO3JldHVybiBhcmd1bWVudHMubGVuZ3RoPDMmJih1PXJbbz9vW2NdOmNdLGMrPW4pLHQocixlLHUsbyxjLGEpfX1mdW5jdGlvbiB0KG4pe3JldHVybiBmdW5jdGlvbih0LHIsZSl7cj14KHIsZSk7Zm9yKHZhciB1PU8odCksaT1uPjA/MDp1LTE7aT49MCYmdT5pO2krPW4paWYocih0W2ldLGksdCkpcmV0dXJuIGk7cmV0dXJuLTF9fWZ1bmN0aW9uIHIobix0LHIpe3JldHVybiBmdW5jdGlvbihlLHUsaSl7dmFyIG89MCxhPU8oZSk7aWYoXCJudW1iZXJcIj09dHlwZW9mIGkpbj4wP289aT49MD9pOk1hdGgubWF4KGkrYSxvKTphPWk+PTA/TWF0aC5taW4oaSsxLGEpOmkrYSsxO2Vsc2UgaWYociYmaSYmYSlyZXR1cm4gaT1yKGUsdSksZVtpXT09PXU/aTotMTtpZih1IT09dSlyZXR1cm4gaT10KGwuY2FsbChlLG8sYSksbS5pc05hTiksaT49MD9pK286LTE7Zm9yKGk9bj4wP286YS0xO2k+PTAmJmE+aTtpKz1uKWlmKGVbaV09PT11KXJldHVybiBpO3JldHVybi0xfX1mdW5jdGlvbiBlKG4sdCl7dmFyIHI9SS5sZW5ndGgsZT1uLmNvbnN0cnVjdG9yLHU9bS5pc0Z1bmN0aW9uKGUpJiZlLnByb3RvdHlwZXx8YSxpPVwiY29uc3RydWN0b3JcIjtmb3IobS5oYXMobixpKSYmIW0uY29udGFpbnModCxpKSYmdC5wdXNoKGkpO3ItLTspaT1JW3JdLGkgaW4gbiYmbltpXSE9PXVbaV0mJiFtLmNvbnRhaW5zKHQsaSkmJnQucHVzaChpKX12YXIgdT10aGlzLGk9dS5fLG89QXJyYXkucHJvdG90eXBlLGE9T2JqZWN0LnByb3RvdHlwZSxjPUZ1bmN0aW9uLnByb3RvdHlwZSxmPW8ucHVzaCxsPW8uc2xpY2Uscz1hLnRvU3RyaW5nLHA9YS5oYXNPd25Qcm9wZXJ0eSxoPUFycmF5LmlzQXJyYXksdj1PYmplY3Qua2V5cyxnPWMuYmluZCx5PU9iamVjdC5jcmVhdGUsZD1mdW5jdGlvbigpe30sbT1mdW5jdGlvbihuKXtyZXR1cm4gbiBpbnN0YW5jZW9mIG0/bjp0aGlzIGluc3RhbmNlb2YgbT92b2lkKHRoaXMuX3dyYXBwZWQ9bik6bmV3IG0obil9O1widW5kZWZpbmVkXCIhPXR5cGVvZiBleHBvcnRzPyhcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cyYmKGV4cG9ydHM9bW9kdWxlLmV4cG9ydHM9bSksZXhwb3J0cy5fPW0pOnUuXz1tLG0uVkVSU0lPTj1cIjEuOC4zXCI7dmFyIGI9ZnVuY3Rpb24obix0LHIpe2lmKHQ9PT12b2lkIDApcmV0dXJuIG47c3dpdGNoKG51bGw9PXI/MzpyKXtjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKHIpe3JldHVybiBuLmNhbGwodCxyKX07Y2FzZSAyOnJldHVybiBmdW5jdGlvbihyLGUpe3JldHVybiBuLmNhbGwodCxyLGUpfTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKHIsZSx1KXtyZXR1cm4gbi5jYWxsKHQscixlLHUpfTtjYXNlIDQ6cmV0dXJuIGZ1bmN0aW9uKHIsZSx1LGkpe3JldHVybiBuLmNhbGwodCxyLGUsdSxpKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG4uYXBwbHkodCxhcmd1bWVudHMpfX0seD1mdW5jdGlvbihuLHQscil7cmV0dXJuIG51bGw9PW4/bS5pZGVudGl0eTptLmlzRnVuY3Rpb24obik/YihuLHQscik6bS5pc09iamVjdChuKT9tLm1hdGNoZXIobik6bS5wcm9wZXJ0eShuKX07bS5pdGVyYXRlZT1mdW5jdGlvbihuLHQpe3JldHVybiB4KG4sdCwxLzApfTt2YXIgXz1mdW5jdGlvbihuLHQpe3JldHVybiBmdW5jdGlvbihyKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoO2lmKDI+ZXx8bnVsbD09cilyZXR1cm4gcjtmb3IodmFyIHU9MTtlPnU7dSsrKWZvcih2YXIgaT1hcmd1bWVudHNbdV0sbz1uKGkpLGE9by5sZW5ndGgsYz0wO2E+YztjKyspe3ZhciBmPW9bY107dCYmcltmXSE9PXZvaWQgMHx8KHJbZl09aVtmXSl9cmV0dXJuIHJ9fSxqPWZ1bmN0aW9uKG4pe2lmKCFtLmlzT2JqZWN0KG4pKXJldHVybnt9O2lmKHkpcmV0dXJuIHkobik7ZC5wcm90b3R5cGU9bjt2YXIgdD1uZXcgZDtyZXR1cm4gZC5wcm90b3R5cGU9bnVsbCx0fSx3PWZ1bmN0aW9uKG4pe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dD92b2lkIDA6dFtuXX19LEE9TWF0aC5wb3coMiw1MyktMSxPPXcoXCJsZW5ndGhcIiksaz1mdW5jdGlvbihuKXt2YXIgdD1PKG4pO3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0JiZ0Pj0wJiZBPj10fTttLmVhY2g9bS5mb3JFYWNoPWZ1bmN0aW9uKG4sdCxyKXt0PWIodCxyKTt2YXIgZSx1O2lmKGsobikpZm9yKGU9MCx1PW4ubGVuZ3RoO3U+ZTtlKyspdChuW2VdLGUsbik7ZWxzZXt2YXIgaT1tLmtleXMobik7Zm9yKGU9MCx1PWkubGVuZ3RoO3U+ZTtlKyspdChuW2lbZV1dLGlbZV0sbil9cmV0dXJuIG59LG0ubWFwPW0uY29sbGVjdD1mdW5jdGlvbihuLHQscil7dD14KHQscik7Zm9yKHZhciBlPSFrKG4pJiZtLmtleXMobiksdT0oZXx8bikubGVuZ3RoLGk9QXJyYXkodSksbz0wO3U+bztvKyspe3ZhciBhPWU/ZVtvXTpvO2lbb109dChuW2FdLGEsbil9cmV0dXJuIGl9LG0ucmVkdWNlPW0uZm9sZGw9bS5pbmplY3Q9bigxKSxtLnJlZHVjZVJpZ2h0PW0uZm9sZHI9bigtMSksbS5maW5kPW0uZGV0ZWN0PWZ1bmN0aW9uKG4sdCxyKXt2YXIgZTtyZXR1cm4gZT1rKG4pP20uZmluZEluZGV4KG4sdCxyKTptLmZpbmRLZXkobix0LHIpLGUhPT12b2lkIDAmJmUhPT0tMT9uW2VdOnZvaWQgMH0sbS5maWx0ZXI9bS5zZWxlY3Q9ZnVuY3Rpb24obix0LHIpe3ZhciBlPVtdO3JldHVybiB0PXgodCxyKSxtLmVhY2gobixmdW5jdGlvbihuLHIsdSl7dChuLHIsdSkmJmUucHVzaChuKX0pLGV9LG0ucmVqZWN0PWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gbS5maWx0ZXIobixtLm5lZ2F0ZSh4KHQpKSxyKX0sbS5ldmVyeT1tLmFsbD1mdW5jdGlvbihuLHQscil7dD14KHQscik7Zm9yKHZhciBlPSFrKG4pJiZtLmtleXMobiksdT0oZXx8bikubGVuZ3RoLGk9MDt1Pmk7aSsrKXt2YXIgbz1lP2VbaV06aTtpZighdChuW29dLG8sbikpcmV0dXJuITF9cmV0dXJuITB9LG0uc29tZT1tLmFueT1mdW5jdGlvbihuLHQscil7dD14KHQscik7Zm9yKHZhciBlPSFrKG4pJiZtLmtleXMobiksdT0oZXx8bikubGVuZ3RoLGk9MDt1Pmk7aSsrKXt2YXIgbz1lP2VbaV06aTtpZih0KG5bb10sbyxuKSlyZXR1cm4hMH1yZXR1cm4hMX0sbS5jb250YWlucz1tLmluY2x1ZGVzPW0uaW5jbHVkZT1mdW5jdGlvbihuLHQscixlKXtyZXR1cm4gayhuKXx8KG49bS52YWx1ZXMobikpLChcIm51bWJlclwiIT10eXBlb2Ygcnx8ZSkmJihyPTApLG0uaW5kZXhPZihuLHQscik+PTB9LG0uaW52b2tlPWZ1bmN0aW9uKG4sdCl7dmFyIHI9bC5jYWxsKGFyZ3VtZW50cywyKSxlPW0uaXNGdW5jdGlvbih0KTtyZXR1cm4gbS5tYXAobixmdW5jdGlvbihuKXt2YXIgdT1lP3Q6blt0XTtyZXR1cm4gbnVsbD09dT91OnUuYXBwbHkobixyKX0pfSxtLnBsdWNrPWZ1bmN0aW9uKG4sdCl7cmV0dXJuIG0ubWFwKG4sbS5wcm9wZXJ0eSh0KSl9LG0ud2hlcmU9ZnVuY3Rpb24obix0KXtyZXR1cm4gbS5maWx0ZXIobixtLm1hdGNoZXIodCkpfSxtLmZpbmRXaGVyZT1mdW5jdGlvbihuLHQpe3JldHVybiBtLmZpbmQobixtLm1hdGNoZXIodCkpfSxtLm1heD1mdW5jdGlvbihuLHQscil7dmFyIGUsdSxpPS0xLzAsbz0tMS8wO2lmKG51bGw9PXQmJm51bGwhPW4pe249ayhuKT9uOm0udmFsdWVzKG4pO2Zvcih2YXIgYT0wLGM9bi5sZW5ndGg7Yz5hO2ErKyllPW5bYV0sZT5pJiYoaT1lKX1lbHNlIHQ9eCh0LHIpLG0uZWFjaChuLGZ1bmN0aW9uKG4scixlKXt1PXQobixyLGUpLCh1Pm98fHU9PT0tMS8wJiZpPT09LTEvMCkmJihpPW4sbz11KX0pO3JldHVybiBpfSxtLm1pbj1mdW5jdGlvbihuLHQscil7dmFyIGUsdSxpPTEvMCxvPTEvMDtpZihudWxsPT10JiZudWxsIT1uKXtuPWsobik/bjptLnZhbHVlcyhuKTtmb3IodmFyIGE9MCxjPW4ubGVuZ3RoO2M+YTthKyspZT1uW2FdLGk+ZSYmKGk9ZSl9ZWxzZSB0PXgodCxyKSxtLmVhY2gobixmdW5jdGlvbihuLHIsZSl7dT10KG4scixlKSwobz51fHwxLzA9PT11JiYxLzA9PT1pKSYmKGk9bixvPXUpfSk7cmV0dXJuIGl9LG0uc2h1ZmZsZT1mdW5jdGlvbihuKXtmb3IodmFyIHQscj1rKG4pP246bS52YWx1ZXMobiksZT1yLmxlbmd0aCx1PUFycmF5KGUpLGk9MDtlPmk7aSsrKXQ9bS5yYW5kb20oMCxpKSx0IT09aSYmKHVbaV09dVt0XSksdVt0XT1yW2ldO3JldHVybiB1fSxtLnNhbXBsZT1mdW5jdGlvbihuLHQscil7cmV0dXJuIG51bGw9PXR8fHI/KGsobil8fChuPW0udmFsdWVzKG4pKSxuW20ucmFuZG9tKG4ubGVuZ3RoLTEpXSk6bS5zaHVmZmxlKG4pLnNsaWNlKDAsTWF0aC5tYXgoMCx0KSl9LG0uc29ydEJ5PWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gdD14KHQsciksbS5wbHVjayhtLm1hcChuLGZ1bmN0aW9uKG4scixlKXtyZXR1cm57dmFsdWU6bixpbmRleDpyLGNyaXRlcmlhOnQobixyLGUpfX0pLnNvcnQoZnVuY3Rpb24obix0KXt2YXIgcj1uLmNyaXRlcmlhLGU9dC5jcml0ZXJpYTtpZihyIT09ZSl7aWYocj5lfHxyPT09dm9pZCAwKXJldHVybiAxO2lmKGU+cnx8ZT09PXZvaWQgMClyZXR1cm4tMX1yZXR1cm4gbi5pbmRleC10LmluZGV4fSksXCJ2YWx1ZVwiKX07dmFyIEY9ZnVuY3Rpb24obil7cmV0dXJuIGZ1bmN0aW9uKHQscixlKXt2YXIgdT17fTtyZXR1cm4gcj14KHIsZSksbS5lYWNoKHQsZnVuY3Rpb24oZSxpKXt2YXIgbz1yKGUsaSx0KTtuKHUsZSxvKX0pLHV9fTttLmdyb3VwQnk9RihmdW5jdGlvbihuLHQscil7bS5oYXMobixyKT9uW3JdLnB1c2godCk6bltyXT1bdF19KSxtLmluZGV4Qnk9RihmdW5jdGlvbihuLHQscil7bltyXT10fSksbS5jb3VudEJ5PUYoZnVuY3Rpb24obix0LHIpe20uaGFzKG4scik/bltyXSsrOm5bcl09MX0pLG0udG9BcnJheT1mdW5jdGlvbihuKXtyZXR1cm4gbj9tLmlzQXJyYXkobik/bC5jYWxsKG4pOmsobik/bS5tYXAobixtLmlkZW50aXR5KTptLnZhbHVlcyhuKTpbXX0sbS5zaXplPWZ1bmN0aW9uKG4pe3JldHVybiBudWxsPT1uPzA6ayhuKT9uLmxlbmd0aDptLmtleXMobikubGVuZ3RofSxtLnBhcnRpdGlvbj1mdW5jdGlvbihuLHQscil7dD14KHQscik7dmFyIGU9W10sdT1bXTtyZXR1cm4gbS5lYWNoKG4sZnVuY3Rpb24obixyLGkpeyh0KG4scixpKT9lOnUpLnB1c2gobil9KSxbZSx1XX0sbS5maXJzdD1tLmhlYWQ9bS50YWtlPWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gbnVsbD09bj92b2lkIDA6bnVsbD09dHx8cj9uWzBdOm0uaW5pdGlhbChuLG4ubGVuZ3RoLXQpfSxtLmluaXRpYWw9ZnVuY3Rpb24obix0LHIpe3JldHVybiBsLmNhbGwobiwwLE1hdGgubWF4KDAsbi5sZW5ndGgtKG51bGw9PXR8fHI/MTp0KSkpfSxtLmxhc3Q9ZnVuY3Rpb24obix0LHIpe3JldHVybiBudWxsPT1uP3ZvaWQgMDpudWxsPT10fHxyP25bbi5sZW5ndGgtMV06bS5yZXN0KG4sTWF0aC5tYXgoMCxuLmxlbmd0aC10KSl9LG0ucmVzdD1tLnRhaWw9bS5kcm9wPWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gbC5jYWxsKG4sbnVsbD09dHx8cj8xOnQpfSxtLmNvbXBhY3Q9ZnVuY3Rpb24obil7cmV0dXJuIG0uZmlsdGVyKG4sbS5pZGVudGl0eSl9O3ZhciBTPWZ1bmN0aW9uKG4sdCxyLGUpe2Zvcih2YXIgdT1bXSxpPTAsbz1lfHwwLGE9TyhuKTthPm87bysrKXt2YXIgYz1uW29dO2lmKGsoYykmJihtLmlzQXJyYXkoYyl8fG0uaXNBcmd1bWVudHMoYykpKXt0fHwoYz1TKGMsdCxyKSk7dmFyIGY9MCxsPWMubGVuZ3RoO2Zvcih1Lmxlbmd0aCs9bDtsPmY7KXVbaSsrXT1jW2YrK119ZWxzZSByfHwodVtpKytdPWMpfXJldHVybiB1fTttLmZsYXR0ZW49ZnVuY3Rpb24obix0KXtyZXR1cm4gUyhuLHQsITEpfSxtLndpdGhvdXQ9ZnVuY3Rpb24obil7cmV0dXJuIG0uZGlmZmVyZW5jZShuLGwuY2FsbChhcmd1bWVudHMsMSkpfSxtLnVuaXE9bS51bmlxdWU9ZnVuY3Rpb24obix0LHIsZSl7bS5pc0Jvb2xlYW4odCl8fChlPXIscj10LHQ9ITEpLG51bGwhPXImJihyPXgocixlKSk7Zm9yKHZhciB1PVtdLGk9W10sbz0wLGE9TyhuKTthPm87bysrKXt2YXIgYz1uW29dLGY9cj9yKGMsbyxuKTpjO3Q/KG8mJmk9PT1mfHx1LnB1c2goYyksaT1mKTpyP20uY29udGFpbnMoaSxmKXx8KGkucHVzaChmKSx1LnB1c2goYykpOm0uY29udGFpbnModSxjKXx8dS5wdXNoKGMpfXJldHVybiB1fSxtLnVuaW9uPWZ1bmN0aW9uKCl7cmV0dXJuIG0udW5pcShTKGFyZ3VtZW50cywhMCwhMCkpfSxtLmludGVyc2VjdGlvbj1mdW5jdGlvbihuKXtmb3IodmFyIHQ9W10scj1hcmd1bWVudHMubGVuZ3RoLGU9MCx1PU8obik7dT5lO2UrKyl7dmFyIGk9bltlXTtpZighbS5jb250YWlucyh0LGkpKXtmb3IodmFyIG89MTtyPm8mJm0uY29udGFpbnMoYXJndW1lbnRzW29dLGkpO28rKyk7bz09PXImJnQucHVzaChpKX19cmV0dXJuIHR9LG0uZGlmZmVyZW5jZT1mdW5jdGlvbihuKXt2YXIgdD1TKGFyZ3VtZW50cywhMCwhMCwxKTtyZXR1cm4gbS5maWx0ZXIobixmdW5jdGlvbihuKXtyZXR1cm4hbS5jb250YWlucyh0LG4pfSl9LG0uemlwPWZ1bmN0aW9uKCl7cmV0dXJuIG0udW56aXAoYXJndW1lbnRzKX0sbS51bnppcD1mdW5jdGlvbihuKXtmb3IodmFyIHQ9biYmbS5tYXgobixPKS5sZW5ndGh8fDAscj1BcnJheSh0KSxlPTA7dD5lO2UrKylyW2VdPW0ucGx1Y2sobixlKTtyZXR1cm4gcn0sbS5vYmplY3Q9ZnVuY3Rpb24obix0KXtmb3IodmFyIHI9e30sZT0wLHU9TyhuKTt1PmU7ZSsrKXQ/cltuW2VdXT10W2VdOnJbbltlXVswXV09bltlXVsxXTtyZXR1cm4gcn0sbS5maW5kSW5kZXg9dCgxKSxtLmZpbmRMYXN0SW5kZXg9dCgtMSksbS5zb3J0ZWRJbmRleD1mdW5jdGlvbihuLHQscixlKXtyPXgocixlLDEpO2Zvcih2YXIgdT1yKHQpLGk9MCxvPU8obik7bz5pOyl7dmFyIGE9TWF0aC5mbG9vcigoaStvKS8yKTtyKG5bYV0pPHU/aT1hKzE6bz1hfXJldHVybiBpfSxtLmluZGV4T2Y9cigxLG0uZmluZEluZGV4LG0uc29ydGVkSW5kZXgpLG0ubGFzdEluZGV4T2Y9cigtMSxtLmZpbmRMYXN0SW5kZXgpLG0ucmFuZ2U9ZnVuY3Rpb24obix0LHIpe251bGw9PXQmJih0PW58fDAsbj0wKSxyPXJ8fDE7Zm9yKHZhciBlPU1hdGgubWF4KE1hdGguY2VpbCgodC1uKS9yKSwwKSx1PUFycmF5KGUpLGk9MDtlPmk7aSsrLG4rPXIpdVtpXT1uO3JldHVybiB1fTt2YXIgRT1mdW5jdGlvbihuLHQscixlLHUpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXJldHVybiBuLmFwcGx5KHIsdSk7dmFyIGk9aihuLnByb3RvdHlwZSksbz1uLmFwcGx5KGksdSk7cmV0dXJuIG0uaXNPYmplY3Qobyk/bzppfTttLmJpbmQ9ZnVuY3Rpb24obix0KXtpZihnJiZuLmJpbmQ9PT1nKXJldHVybiBnLmFwcGx5KG4sbC5jYWxsKGFyZ3VtZW50cywxKSk7aWYoIW0uaXNGdW5jdGlvbihuKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQmluZCBtdXN0IGJlIGNhbGxlZCBvbiBhIGZ1bmN0aW9uXCIpO3ZhciByPWwuY2FsbChhcmd1bWVudHMsMiksZT1mdW5jdGlvbigpe3JldHVybiBFKG4sZSx0LHRoaXMsci5jb25jYXQobC5jYWxsKGFyZ3VtZW50cykpKX07cmV0dXJuIGV9LG0ucGFydGlhbD1mdW5jdGlvbihuKXt2YXIgdD1sLmNhbGwoYXJndW1lbnRzLDEpLHI9ZnVuY3Rpb24oKXtmb3IodmFyIGU9MCx1PXQubGVuZ3RoLGk9QXJyYXkodSksbz0wO3U+bztvKyspaVtvXT10W29dPT09bT9hcmd1bWVudHNbZSsrXTp0W29dO2Zvcig7ZTxhcmd1bWVudHMubGVuZ3RoOylpLnB1c2goYXJndW1lbnRzW2UrK10pO3JldHVybiBFKG4scix0aGlzLHRoaXMsaSl9O3JldHVybiByfSxtLmJpbmRBbGw9ZnVuY3Rpb24obil7dmFyIHQscixlPWFyZ3VtZW50cy5sZW5ndGg7aWYoMT49ZSl0aHJvdyBuZXcgRXJyb3IoXCJiaW5kQWxsIG11c3QgYmUgcGFzc2VkIGZ1bmN0aW9uIG5hbWVzXCIpO2Zvcih0PTE7ZT50O3QrKylyPWFyZ3VtZW50c1t0XSxuW3JdPW0uYmluZChuW3JdLG4pO3JldHVybiBufSxtLm1lbW9pemU9ZnVuY3Rpb24obix0KXt2YXIgcj1mdW5jdGlvbihlKXt2YXIgdT1yLmNhY2hlLGk9XCJcIisodD90LmFwcGx5KHRoaXMsYXJndW1lbnRzKTplKTtyZXR1cm4gbS5oYXModSxpKXx8KHVbaV09bi5hcHBseSh0aGlzLGFyZ3VtZW50cykpLHVbaV19O3JldHVybiByLmNhY2hlPXt9LHJ9LG0uZGVsYXk9ZnVuY3Rpb24obix0KXt2YXIgcj1sLmNhbGwoYXJndW1lbnRzLDIpO3JldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cmV0dXJuIG4uYXBwbHkobnVsbCxyKX0sdCl9LG0uZGVmZXI9bS5wYXJ0aWFsKG0uZGVsYXksbSwxKSxtLnRocm90dGxlPWZ1bmN0aW9uKG4sdCxyKXt2YXIgZSx1LGksbz1udWxsLGE9MDtyfHwocj17fSk7dmFyIGM9ZnVuY3Rpb24oKXthPXIubGVhZGluZz09PSExPzA6bS5ub3coKSxvPW51bGwsaT1uLmFwcGx5KGUsdSksb3x8KGU9dT1udWxsKX07cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGY9bS5ub3coKTthfHxyLmxlYWRpbmchPT0hMXx8KGE9Zik7dmFyIGw9dC0oZi1hKTtyZXR1cm4gZT10aGlzLHU9YXJndW1lbnRzLDA+PWx8fGw+dD8obyYmKGNsZWFyVGltZW91dChvKSxvPW51bGwpLGE9ZixpPW4uYXBwbHkoZSx1KSxvfHwoZT11PW51bGwpKTpvfHxyLnRyYWlsaW5nPT09ITF8fChvPXNldFRpbWVvdXQoYyxsKSksaX19LG0uZGVib3VuY2U9ZnVuY3Rpb24obix0LHIpe3ZhciBlLHUsaSxvLGEsYz1mdW5jdGlvbigpe3ZhciBmPW0ubm93KCktbzt0PmYmJmY+PTA/ZT1zZXRUaW1lb3V0KGMsdC1mKTooZT1udWxsLHJ8fChhPW4uYXBwbHkoaSx1KSxlfHwoaT11PW51bGwpKSl9O3JldHVybiBmdW5jdGlvbigpe2k9dGhpcyx1PWFyZ3VtZW50cyxvPW0ubm93KCk7dmFyIGY9ciYmIWU7cmV0dXJuIGV8fChlPXNldFRpbWVvdXQoYyx0KSksZiYmKGE9bi5hcHBseShpLHUpLGk9dT1udWxsKSxhfX0sbS53cmFwPWZ1bmN0aW9uKG4sdCl7cmV0dXJuIG0ucGFydGlhbCh0LG4pfSxtLm5lZ2F0ZT1mdW5jdGlvbihuKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4hbi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSxtLmNvbXBvc2U9ZnVuY3Rpb24oKXt2YXIgbj1hcmd1bWVudHMsdD1uLmxlbmd0aC0xO3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgcj10LGU9blt0XS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ci0tOyllPW5bcl0uY2FsbCh0aGlzLGUpO3JldHVybiBlfX0sbS5hZnRlcj1mdW5jdGlvbihuLHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybi0tbjwxP3QuYXBwbHkodGhpcyxhcmd1bWVudHMpOnZvaWQgMH19LG0uYmVmb3JlPWZ1bmN0aW9uKG4sdCl7dmFyIHI7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuLS1uPjAmJihyPXQuYXBwbHkodGhpcyxhcmd1bWVudHMpKSwxPj1uJiYodD1udWxsKSxyfX0sbS5vbmNlPW0ucGFydGlhbChtLmJlZm9yZSwyKTt2YXIgTT0he3RvU3RyaW5nOm51bGx9LnByb3BlcnR5SXNFbnVtZXJhYmxlKFwidG9TdHJpbmdcIiksST1bXCJ2YWx1ZU9mXCIsXCJpc1Byb3RvdHlwZU9mXCIsXCJ0b1N0cmluZ1wiLFwicHJvcGVydHlJc0VudW1lcmFibGVcIixcImhhc093blByb3BlcnR5XCIsXCJ0b0xvY2FsZVN0cmluZ1wiXTttLmtleXM9ZnVuY3Rpb24obil7aWYoIW0uaXNPYmplY3QobikpcmV0dXJuW107aWYodilyZXR1cm4gdihuKTt2YXIgdD1bXTtmb3IodmFyIHIgaW4gbiltLmhhcyhuLHIpJiZ0LnB1c2gocik7cmV0dXJuIE0mJmUobix0KSx0fSxtLmFsbEtleXM9ZnVuY3Rpb24obil7aWYoIW0uaXNPYmplY3QobikpcmV0dXJuW107dmFyIHQ9W107Zm9yKHZhciByIGluIG4pdC5wdXNoKHIpO3JldHVybiBNJiZlKG4sdCksdH0sbS52YWx1ZXM9ZnVuY3Rpb24obil7Zm9yKHZhciB0PW0ua2V5cyhuKSxyPXQubGVuZ3RoLGU9QXJyYXkociksdT0wO3I+dTt1KyspZVt1XT1uW3RbdV1dO3JldHVybiBlfSxtLm1hcE9iamVjdD1mdW5jdGlvbihuLHQscil7dD14KHQscik7Zm9yKHZhciBlLHU9bS5rZXlzKG4pLGk9dS5sZW5ndGgsbz17fSxhPTA7aT5hO2ErKyllPXVbYV0sb1tlXT10KG5bZV0sZSxuKTtyZXR1cm4gb30sbS5wYWlycz1mdW5jdGlvbihuKXtmb3IodmFyIHQ9bS5rZXlzKG4pLHI9dC5sZW5ndGgsZT1BcnJheShyKSx1PTA7cj51O3UrKyllW3VdPVt0W3VdLG5bdFt1XV1dO3JldHVybiBlfSxtLmludmVydD1mdW5jdGlvbihuKXtmb3IodmFyIHQ9e30scj1tLmtleXMobiksZT0wLHU9ci5sZW5ndGg7dT5lO2UrKyl0W25bcltlXV1dPXJbZV07cmV0dXJuIHR9LG0uZnVuY3Rpb25zPW0ubWV0aG9kcz1mdW5jdGlvbihuKXt2YXIgdD1bXTtmb3IodmFyIHIgaW4gbiltLmlzRnVuY3Rpb24obltyXSkmJnQucHVzaChyKTtyZXR1cm4gdC5zb3J0KCl9LG0uZXh0ZW5kPV8obS5hbGxLZXlzKSxtLmV4dGVuZE93bj1tLmFzc2lnbj1fKG0ua2V5cyksbS5maW5kS2V5PWZ1bmN0aW9uKG4sdCxyKXt0PXgodCxyKTtmb3IodmFyIGUsdT1tLmtleXMobiksaT0wLG89dS5sZW5ndGg7bz5pO2krKylpZihlPXVbaV0sdChuW2VdLGUsbikpcmV0dXJuIGV9LG0ucGljaz1mdW5jdGlvbihuLHQscil7dmFyIGUsdSxpPXt9LG89bjtpZihudWxsPT1vKXJldHVybiBpO20uaXNGdW5jdGlvbih0KT8odT1tLmFsbEtleXMobyksZT1iKHQscikpOih1PVMoYXJndW1lbnRzLCExLCExLDEpLGU9ZnVuY3Rpb24obix0LHIpe3JldHVybiB0IGluIHJ9LG89T2JqZWN0KG8pKTtmb3IodmFyIGE9MCxjPXUubGVuZ3RoO2M+YTthKyspe3ZhciBmPXVbYV0sbD1vW2ZdO2UobCxmLG8pJiYoaVtmXT1sKX1yZXR1cm4gaX0sbS5vbWl0PWZ1bmN0aW9uKG4sdCxyKXtpZihtLmlzRnVuY3Rpb24odCkpdD1tLm5lZ2F0ZSh0KTtlbHNle3ZhciBlPW0ubWFwKFMoYXJndW1lbnRzLCExLCExLDEpLFN0cmluZyk7dD1mdW5jdGlvbihuLHQpe3JldHVybiFtLmNvbnRhaW5zKGUsdCl9fXJldHVybiBtLnBpY2sobix0LHIpfSxtLmRlZmF1bHRzPV8obS5hbGxLZXlzLCEwKSxtLmNyZWF0ZT1mdW5jdGlvbihuLHQpe3ZhciByPWoobik7cmV0dXJuIHQmJm0uZXh0ZW5kT3duKHIsdCkscn0sbS5jbG9uZT1mdW5jdGlvbihuKXtyZXR1cm4gbS5pc09iamVjdChuKT9tLmlzQXJyYXkobik/bi5zbGljZSgpOm0uZXh0ZW5kKHt9LG4pOm59LG0udGFwPWZ1bmN0aW9uKG4sdCl7cmV0dXJuIHQobiksbn0sbS5pc01hdGNoPWZ1bmN0aW9uKG4sdCl7dmFyIHI9bS5rZXlzKHQpLGU9ci5sZW5ndGg7aWYobnVsbD09bilyZXR1cm4hZTtmb3IodmFyIHU9T2JqZWN0KG4pLGk9MDtlPmk7aSsrKXt2YXIgbz1yW2ldO2lmKHRbb10hPT11W29dfHwhKG8gaW4gdSkpcmV0dXJuITF9cmV0dXJuITB9O3ZhciBOPWZ1bmN0aW9uKG4sdCxyLGUpe2lmKG49PT10KXJldHVybiAwIT09bnx8MS9uPT09MS90O2lmKG51bGw9PW58fG51bGw9PXQpcmV0dXJuIG49PT10O24gaW5zdGFuY2VvZiBtJiYobj1uLl93cmFwcGVkKSx0IGluc3RhbmNlb2YgbSYmKHQ9dC5fd3JhcHBlZCk7dmFyIHU9cy5jYWxsKG4pO2lmKHUhPT1zLmNhbGwodCkpcmV0dXJuITE7c3dpdGNoKHUpe2Nhc2VcIltvYmplY3QgUmVnRXhwXVwiOmNhc2VcIltvYmplY3QgU3RyaW5nXVwiOnJldHVyblwiXCIrbj09XCJcIit0O2Nhc2VcIltvYmplY3QgTnVtYmVyXVwiOnJldHVybituIT09K24/K3QhPT0rdDowPT09K24/MS8rbj09PTEvdDorbj09PSt0O2Nhc2VcIltvYmplY3QgRGF0ZV1cIjpjYXNlXCJbb2JqZWN0IEJvb2xlYW5dXCI6cmV0dXJuK249PT0rdH12YXIgaT1cIltvYmplY3QgQXJyYXldXCI9PT11O2lmKCFpKXtpZihcIm9iamVjdFwiIT10eXBlb2Ygbnx8XCJvYmplY3RcIiE9dHlwZW9mIHQpcmV0dXJuITE7dmFyIG89bi5jb25zdHJ1Y3RvcixhPXQuY29uc3RydWN0b3I7aWYobyE9PWEmJiEobS5pc0Z1bmN0aW9uKG8pJiZvIGluc3RhbmNlb2YgbyYmbS5pc0Z1bmN0aW9uKGEpJiZhIGluc3RhbmNlb2YgYSkmJlwiY29uc3RydWN0b3JcImluIG4mJlwiY29uc3RydWN0b3JcImluIHQpcmV0dXJuITF9cj1yfHxbXSxlPWV8fFtdO2Zvcih2YXIgYz1yLmxlbmd0aDtjLS07KWlmKHJbY109PT1uKXJldHVybiBlW2NdPT09dDtpZihyLnB1c2gobiksZS5wdXNoKHQpLGkpe2lmKGM9bi5sZW5ndGgsYyE9PXQubGVuZ3RoKXJldHVybiExO2Zvcig7Yy0tOylpZighTihuW2NdLHRbY10scixlKSlyZXR1cm4hMX1lbHNle3ZhciBmLGw9bS5rZXlzKG4pO2lmKGM9bC5sZW5ndGgsbS5rZXlzKHQpLmxlbmd0aCE9PWMpcmV0dXJuITE7Zm9yKDtjLS07KWlmKGY9bFtjXSwhbS5oYXModCxmKXx8IU4obltmXSx0W2ZdLHIsZSkpcmV0dXJuITF9cmV0dXJuIHIucG9wKCksZS5wb3AoKSwhMH07bS5pc0VxdWFsPWZ1bmN0aW9uKG4sdCl7cmV0dXJuIE4obix0KX0sbS5pc0VtcHR5PWZ1bmN0aW9uKG4pe3JldHVybiBudWxsPT1uPyEwOmsobikmJihtLmlzQXJyYXkobil8fG0uaXNTdHJpbmcobil8fG0uaXNBcmd1bWVudHMobikpPzA9PT1uLmxlbmd0aDowPT09bS5rZXlzKG4pLmxlbmd0aH0sbS5pc0VsZW1lbnQ9ZnVuY3Rpb24obil7cmV0dXJuISghbnx8MSE9PW4ubm9kZVR5cGUpfSxtLmlzQXJyYXk9aHx8ZnVuY3Rpb24obil7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiPT09cy5jYWxsKG4pfSxtLmlzT2JqZWN0PWZ1bmN0aW9uKG4pe3ZhciB0PXR5cGVvZiBuO3JldHVyblwiZnVuY3Rpb25cIj09PXR8fFwib2JqZWN0XCI9PT10JiYhIW59LG0uZWFjaChbXCJBcmd1bWVudHNcIixcIkZ1bmN0aW9uXCIsXCJTdHJpbmdcIixcIk51bWJlclwiLFwiRGF0ZVwiLFwiUmVnRXhwXCIsXCJFcnJvclwiXSxmdW5jdGlvbihuKXttW1wiaXNcIituXT1mdW5jdGlvbih0KXtyZXR1cm4gcy5jYWxsKHQpPT09XCJbb2JqZWN0IFwiK24rXCJdXCJ9fSksbS5pc0FyZ3VtZW50cyhhcmd1bWVudHMpfHwobS5pc0FyZ3VtZW50cz1mdW5jdGlvbihuKXtyZXR1cm4gbS5oYXMobixcImNhbGxlZVwiKX0pLFwiZnVuY3Rpb25cIiE9dHlwZW9mLy4vJiZcIm9iamVjdFwiIT10eXBlb2YgSW50OEFycmF5JiYobS5pc0Z1bmN0aW9uPWZ1bmN0aW9uKG4pe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIG58fCExfSksbS5pc0Zpbml0ZT1mdW5jdGlvbihuKXtyZXR1cm4gaXNGaW5pdGUobikmJiFpc05hTihwYXJzZUZsb2F0KG4pKX0sbS5pc05hTj1mdW5jdGlvbihuKXtyZXR1cm4gbS5pc051bWJlcihuKSYmbiE9PStufSxtLmlzQm9vbGVhbj1mdW5jdGlvbihuKXtyZXR1cm4gbj09PSEwfHxuPT09ITF8fFwiW29iamVjdCBCb29sZWFuXVwiPT09cy5jYWxsKG4pfSxtLmlzTnVsbD1mdW5jdGlvbihuKXtyZXR1cm4gbnVsbD09PW59LG0uaXNVbmRlZmluZWQ9ZnVuY3Rpb24obil7cmV0dXJuIG49PT12b2lkIDB9LG0uaGFzPWZ1bmN0aW9uKG4sdCl7cmV0dXJuIG51bGwhPW4mJnAuY2FsbChuLHQpfSxtLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdS5fPWksdGhpc30sbS5pZGVudGl0eT1mdW5jdGlvbihuKXtyZXR1cm4gbn0sbS5jb25zdGFudD1mdW5jdGlvbihuKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbn19LG0ubm9vcD1mdW5jdGlvbigpe30sbS5wcm9wZXJ0eT13LG0ucHJvcGVydHlPZj1mdW5jdGlvbihuKXtyZXR1cm4gbnVsbD09bj9mdW5jdGlvbigpe306ZnVuY3Rpb24odCl7cmV0dXJuIG5bdF19fSxtLm1hdGNoZXI9bS5tYXRjaGVzPWZ1bmN0aW9uKG4pe3JldHVybiBuPW0uZXh0ZW5kT3duKHt9LG4pLGZ1bmN0aW9uKHQpe3JldHVybiBtLmlzTWF0Y2godCxuKX19LG0udGltZXM9ZnVuY3Rpb24obix0LHIpe3ZhciBlPUFycmF5KE1hdGgubWF4KDAsbikpO3Q9Yih0LHIsMSk7Zm9yKHZhciB1PTA7bj51O3UrKyllW3VdPXQodSk7cmV0dXJuIGV9LG0ucmFuZG9tPWZ1bmN0aW9uKG4sdCl7cmV0dXJuIG51bGw9PXQmJih0PW4sbj0wKSxuK01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoodC1uKzEpKX0sbS5ub3c9RGF0ZS5ub3d8fGZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBEYXRlKS5nZXRUaW1lKCl9O3ZhciBCPXtcIiZcIjpcIiZhbXA7XCIsXCI8XCI6XCImbHQ7XCIsXCI+XCI6XCImZ3Q7XCIsJ1wiJzpcIiZxdW90O1wiLFwiJ1wiOlwiJiN4Mjc7XCIsXCJgXCI6XCImI3g2MDtcIn0sVD1tLmludmVydChCKSxSPWZ1bmN0aW9uKG4pe3ZhciB0PWZ1bmN0aW9uKHQpe3JldHVybiBuW3RdfSxyPVwiKD86XCIrbS5rZXlzKG4pLmpvaW4oXCJ8XCIpK1wiKVwiLGU9UmVnRXhwKHIpLHU9UmVnRXhwKHIsXCJnXCIpO3JldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gbj1udWxsPT1uP1wiXCI6XCJcIituLGUudGVzdChuKT9uLnJlcGxhY2UodSx0KTpufX07bS5lc2NhcGU9UihCKSxtLnVuZXNjYXBlPVIoVCksbS5yZXN1bHQ9ZnVuY3Rpb24obix0LHIpe3ZhciBlPW51bGw9PW4/dm9pZCAwOm5bdF07cmV0dXJuIGU9PT12b2lkIDAmJihlPXIpLG0uaXNGdW5jdGlvbihlKT9lLmNhbGwobik6ZX07dmFyIHE9MDttLnVuaXF1ZUlkPWZ1bmN0aW9uKG4pe3ZhciB0PSsrcStcIlwiO3JldHVybiBuP24rdDp0fSxtLnRlbXBsYXRlU2V0dGluZ3M9e2V2YWx1YXRlOi88JShbXFxzXFxTXSs/KSU+L2csaW50ZXJwb2xhdGU6LzwlPShbXFxzXFxTXSs/KSU+L2csZXNjYXBlOi88JS0oW1xcc1xcU10rPyklPi9nfTt2YXIgSz0vKC4pXi8sej17XCInXCI6XCInXCIsXCJcXFxcXCI6XCJcXFxcXCIsXCJcXHJcIjpcInJcIixcIlxcblwiOlwiblwiLFwiXFx1MjAyOFwiOlwidTIwMjhcIixcIlxcdTIwMjlcIjpcInUyMDI5XCJ9LEQ9L1xcXFx8J3xcXHJ8XFxufFxcdTIwMjh8XFx1MjAyOS9nLEw9ZnVuY3Rpb24obil7cmV0dXJuXCJcXFxcXCIreltuXX07bS50ZW1wbGF0ZT1mdW5jdGlvbihuLHQscil7IXQmJnImJih0PXIpLHQ9bS5kZWZhdWx0cyh7fSx0LG0udGVtcGxhdGVTZXR0aW5ncyk7dmFyIGU9UmVnRXhwKFsodC5lc2NhcGV8fEspLnNvdXJjZSwodC5pbnRlcnBvbGF0ZXx8Sykuc291cmNlLCh0LmV2YWx1YXRlfHxLKS5zb3VyY2VdLmpvaW4oXCJ8XCIpK1wifCRcIixcImdcIiksdT0wLGk9XCJfX3ArPSdcIjtuLnJlcGxhY2UoZSxmdW5jdGlvbih0LHIsZSxvLGEpe3JldHVybiBpKz1uLnNsaWNlKHUsYSkucmVwbGFjZShELEwpLHU9YSt0Lmxlbmd0aCxyP2krPVwiJytcXG4oKF9fdD0oXCIrcitcIikpPT1udWxsPycnOl8uZXNjYXBlKF9fdCkpK1xcbidcIjplP2krPVwiJytcXG4oKF9fdD0oXCIrZStcIikpPT1udWxsPycnOl9fdCkrXFxuJ1wiOm8mJihpKz1cIic7XFxuXCIrbytcIlxcbl9fcCs9J1wiKSx0fSksaSs9XCInO1xcblwiLHQudmFyaWFibGV8fChpPVwid2l0aChvYmp8fHt9KXtcXG5cIitpK1wifVxcblwiKSxpPVwidmFyIF9fdCxfX3A9JycsX19qPUFycmF5LnByb3RvdHlwZS5qb2luLFwiK1wicHJpbnQ9ZnVuY3Rpb24oKXtfX3ArPV9fai5jYWxsKGFyZ3VtZW50cywnJyk7fTtcXG5cIitpK1wicmV0dXJuIF9fcDtcXG5cIjt0cnl7dmFyIG89bmV3IEZ1bmN0aW9uKHQudmFyaWFibGV8fFwib2JqXCIsXCJfXCIsaSl9Y2F0Y2goYSl7dGhyb3cgYS5zb3VyY2U9aSxhfXZhciBjPWZ1bmN0aW9uKG4pe3JldHVybiBvLmNhbGwodGhpcyxuLG0pfSxmPXQudmFyaWFibGV8fFwib2JqXCI7cmV0dXJuIGMuc291cmNlPVwiZnVuY3Rpb24oXCIrZitcIil7XFxuXCIraStcIn1cIixjfSxtLmNoYWluPWZ1bmN0aW9uKG4pe3ZhciB0PW0obik7cmV0dXJuIHQuX2NoYWluPSEwLHR9O3ZhciBQPWZ1bmN0aW9uKG4sdCl7cmV0dXJuIG4uX2NoYWluP20odCkuY2hhaW4oKTp0fTttLm1peGluPWZ1bmN0aW9uKG4pe20uZWFjaChtLmZ1bmN0aW9ucyhuKSxmdW5jdGlvbih0KXt2YXIgcj1tW3RdPW5bdF07bS5wcm90b3R5cGVbdF09ZnVuY3Rpb24oKXt2YXIgbj1bdGhpcy5fd3JhcHBlZF07cmV0dXJuIGYuYXBwbHkobixhcmd1bWVudHMpLFAodGhpcyxyLmFwcGx5KG0sbikpfX0pfSxtLm1peGluKG0pLG0uZWFjaChbXCJwb3BcIixcInB1c2hcIixcInJldmVyc2VcIixcInNoaWZ0XCIsXCJzb3J0XCIsXCJzcGxpY2VcIixcInVuc2hpZnRcIl0sZnVuY3Rpb24obil7dmFyIHQ9b1tuXTttLnByb3RvdHlwZVtuXT1mdW5jdGlvbigpe3ZhciByPXRoaXMuX3dyYXBwZWQ7cmV0dXJuIHQuYXBwbHkocixhcmd1bWVudHMpLFwic2hpZnRcIiE9PW4mJlwic3BsaWNlXCIhPT1ufHwwIT09ci5sZW5ndGh8fGRlbGV0ZSByWzBdLFAodGhpcyxyKX19KSxtLmVhY2goW1wiY29uY2F0XCIsXCJqb2luXCIsXCJzbGljZVwiXSxmdW5jdGlvbihuKXt2YXIgdD1vW25dO20ucHJvdG90eXBlW25dPWZ1bmN0aW9uKCl7cmV0dXJuIFAodGhpcyx0LmFwcGx5KHRoaXMuX3dyYXBwZWQsYXJndW1lbnRzKSl9fSksbS5wcm90b3R5cGUudmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fd3JhcHBlZH0sbS5wcm90b3R5cGUudmFsdWVPZj1tLnByb3RvdHlwZS50b0pTT049bS5wcm90b3R5cGUudmFsdWUsbS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIlwiK3RoaXMuX3dyYXBwZWR9LFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZCYmZGVmaW5lKFwidW5kZXJzY29yZVwiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIG19KX0pLmNhbGwodGhpcyk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD11bmRlcnNjb3JlLW1pbi5tYXAiXX0=
